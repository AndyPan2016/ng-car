var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))(function(n,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?n(e.value):new o(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return r([e,t])}}function r(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(a=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,i,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__decorate=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Neon;!function(e){var t=function(){function e(e){this.data=null,this.next=null,this.data=e}return e}(),o=function(){function e(){this.front=null,this.back=null}return e.prototype.push=function(e){var o=new t(e);null===this.front?(this.front=o,this.back=o):(this.back.next=o,this.back=o)},e.prototype.shift=function(){if(this.empty())return this.back=null,null;var e=this.front;return this.front=this.front.next,e.data},e.prototype.empty=function(){return null===this.front},e}();e.Queue=o}(Neon||(Neon={}));var Neon;!function(e){function t(e){return Array.isArray?Array.isArray(e):!(!e||"number"!=typeof e.length||e.constructor!==Array)}function o(e){return"string"==typeof e||e instanceof String}function r(e){return!0===e||!1===e}function n(e){return("number"==typeof e||e instanceof Number)&&!isNaN(e)}function i(e){return"function"==typeof e}function a(e){return void 0===e}function s(e){return a(e)||null===e}function l(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function c(e){if(!l(e))return!1;for(var t in e)if(u.call(e,t))return!1;return!0}e.isArray=t,e.isString=o,e.isBoolean=r,e.isNumber=n,e.isFunction=i,e.isUndefined=a,e.isUndefinedOrNull=s,e.isObject=l;var u=Object.prototype.hasOwnProperty;e.isEmptyObject=c}(Neon||(Neon={}));var Neon;!function(e){function t(){return o}e.kNAME="Neon",e.kVERSION="v0.1.0",e.STATIC_URL=null,e.CURRENT_MODEL_DIRECTORY=null,e.ISLOADOVER=!1;var o=!1;e.isDebug=t}(Neon||(Neon={}));var DEBUG=!0,Neon;!function(e){function t(e){return 31===e[0]&&139===e[1]?pako.ungzip(e):e}function o(e){return-1!==y.indexOf(e)}function r(){return"undefined"!=typeof window&&"ontouchstart"in window}function n(){return!!v&&/ip(ad|hone|od)/.test(y)}function i(){return!!v&&o("android")}function a(){return!!v&&(o("safari")&&!o("chrome"))}function s(){return!!v&&o("firefox")}function l(){return!!v&&(i()||n())}function c(){return!!v&&o("mac os")}function u(){return!!v&&(o("win32")||o("windows"))}function d(){return A}function h(){return g||x}function p(){}function m(e){var t=b(null);t.__=void 0,delete t.__;for(var o in e)w.call(e,o)&&(t[o]=e[o]);return t}function f(){if(WebGLRenderingContext){for(var t=document.createElement("canvas"),o=["webgl","experimental-webgl","moz-webgl","webkit-3d"],r=null,n=0;4!=n;++n)try{if((r=t.getContext(o[n]))&&e.isFunction(r.getParameter))return 1}catch(e){}return 0}return-1}e.unzip=t;var v="undefined"!=typeof navigator,g=v&&!!navigator.userAgent.match(/Trident\/7\./),x=v&&!!navigator.userAgent.match(/Edge/),y=v?navigator.userAgent.toLowerCase():"",A="undefined"!=typeof self&&"undefined"==typeof window;e.isTouchDevice=r,e.isIOS=n,e.isAndroid=i,e.isSafari=a,e.isFireFox=s,e.isMobile=l,e.isMac=c,e.isWindows=u,e.isInWorker=d,e.isIE=h,e.noop=p;var b=Object.create,w=Object.prototype.hasOwnProperty;e.createDictionary=m,e.detectWebGL=f}(Neon||(Neon={}));var Neon;Neon||(Neon={});var Neon;!function(e){var t=function(){},o=function(){function e(){this.log=t,this.info=t,this.warn=t,this.debug=t,this.error=t}return Object.defineProperty(e.prototype,"level",{set:function(e){this.debug=e>=5?console.debug.bind(console):t,this.log=e>=4?console.log.bind(console):t,this.info=e>=3?console.info.bind(console):t,this.warn=e>=2?console.warn.bind(console):t,this.error=e>=1?console.error.bind(console):t},enumerable:!0,configurable:!0}),e}();e.logger=new o,e.logger.level=3}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function t(){}return t.prototype.on=function(t,o){t&&(void 0===this.listeners&&(this.listeners=e.createDictionary()),void 0===this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push(o))},t.prototype.has=function(e,t){return!!e&&(void 0!==this.listeners&&(void 0!==this.listeners[e]&&-1!==this.listeners[e].indexOf(t)))},t.prototype.off=function(t,o){if(t&&(void 0===this.listeners&&(this.listeners=e.createDictionary()),this.listeners[t]instanceof Array))for(var r=this.listeners[t],n=0,i=r.length;n<i;n++)if(r[n]===o){r.splice(n,1);break}},t.prototype.reSet=function(){var t=this.listeners.OnPropertyChanged;this.listeners=e.createDictionary(),this.listeners.OnPropertyChanged=t},t.prototype.emit=function(t){var o=this;if(void 0===this.listeners&&(this.listeners=e.createDictionary()),"string"==typeof t&&(t={type:t}),!t.target)try{t.target=this}catch(e){}if(!t.type)throw new Error("\u4e8b\u4ef6\u7c7b\u578b\u672a\u77e5.");setTimeout(function(){if(o.listeners[t.type]instanceof Array)for(var e=o.listeners[t.type].slice(),r=0;r<e.length;r++)e[r].call(o,t)},1)},t}();e.EventEmitter=t}(Neon||(Neon={}));var Neon;!function(e){function t(e){e=e.toLowerCase();var t=document.getElementsByTagName("script");if(t&&t.length>0)for(var o=0;o<t.length;++o)if(t[o].src&&-1!==t[o].src.toLowerCase().indexOf(e))return t[o];return null}function o(o){if(e.STATIC_URL)return e.STATIC_URL+o;var r=t(e.kNAME);if(r){var n=r.src.toLowerCase(),i=n.indexOf("neon");e.STATIC_URL=n.substr(0,i)}return e.STATIC_URL+o}function r(t){var o,r=t.data;if(void 0!==r.error&&console.error(r.error),2===r.objectDef&&32===r.packageType){if(!(o=e.getModel()))return;for(var n=parseInt(r.package),i=0;i<r.vbo.length;++i)o.addGeometry(r.vbo[i],n+":"+i)}f(r.workerId)}function n(t){console.log("create subWorker");for(var o=Math.min(u,d.length),n=0;n<o;++n){var i=new Worker(e.WORKER_CACHE_URL);i.workerId=n,i.addEventListener("message",r,!1),p.push(i),f(i.workerId)}}function i(t){if(t.data.error)return void e.logger.error(t.data);var o=t.data.packages;void 0===d&&(d=[]);for(var r=0;r<o.length;++r)d.push({action:1,workerId:-1,url:m+o[r],package:o[r],packageType:32,options:{responseType:2}});e.processer.setAttribute("max",String(d.length)),e.processer.style.display="block",delete t.data.packages,delete t.data.packageType,e.model=e.createModel(t.data,h.callback),n(e.model),e.model.start(),h.terminate()}function a(t){h||(h=new Worker(e.WORKER_CACHE_URL),h.workerId=0,void 0!==t&&(h.callback=t),h.addEventListener("message",i,!1),h.postMessage({action:1,url:m,package:"project.jdx",packageType:2147483648,options:{responseType:2}}))}function s(e){m=e}function l(t,r){e.CURRENT_MODEL_DIRECTORY=t,c();console.log("load"),e.worker_url=t,void 0!=e.model&&(e.model.dispose(),e.model=void 0,e.inCallBack.clear(),p.map(function(e){e.terminate()}),p.length=0,h&&h.terminate(),e.initialize({container:e.container}),h=null),e.processer||e.initialize({container:e.container}),s(t);var n=new XMLHttpRequest,i=o(e.VMSCRIPT);n.open("GET",i,!0),n.withCredentials=!1,n.onload=function(){var t;try{t=new Blob([n.responseText],{type:"application/javascript"})}catch(t){e.logger.error("can't get resource: [ "+i+" ]")}e.WORKER_CACHE_URL=URL.createObjectURL(t),a(r)},n.send()}function c(){if(null!=e.CURRENT_MODEL_DIRECTORY){var t=e.CURRENT_MODEL_DIRECTORY.split("/");e.logger.debug("temp",t);var o=t.pop();""!=o&&t.push(o),e.MODEL_UP_URL="";for(var r=0;r<t.length-1;++r)e.MODEL_UP_URL+=t[r]+"/";e.logger.debug("model",e.MODEL_UP_URL)}}e.VMSCRIPT=e.isDebug()?"nevm.js":"nevm.min.js",e.WORKER_CACHE_URL=null,e.worker_url=null,e.MODEL_UP_URL=null;var u=e.isMobile()?5:10;e.getResourceUrl=o;var d,h=null,p=[],m="",f=function(){return function(t){for(var o,r,n=0;n<p.length&&(o=p[n],r=n,o.workerId!==t);++n);if(0===d.length)return o.terminate(),o=null,p.splice(r,1)[0]=null,void(0===p.length&&(e.processer.style.display="none",e.inCallBack.run(),h.callback.fn.call(h.callback.target,e.model.getFloorAndMajorAndCategoryName()),h=null,e.ISLOADOVER=!0,e.model.reset()));var i=d.shift();i.workerId=t,o.postMessage(i),e.processer.setAttribute("value",String(parseInt(e.processer.getAttribute("max"))-d.length))}}();e.load=l}(Neon||(Neon={}));var Neon;!function(e){function t(t){if(console.log("init"),e.worker_url,t.url,t=t||{},e.isMobile()){var o=document.createElement("meta");o.name="viewport",o.content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",document.getElementsByTagName("head")[0].appendChild(o)}if(e.container=void 0===t.container?document.body:t.container,e.container.oncontextmenu=function(){return!1},void 0===s||null===s){console.debug("undefined");var r=document.createElement("canvas"),n=document.createElement("canvas");n.style.zIndex="1",e.container.style.overflow="hidden",r.width=e.container.clientWidth,r.height=e.container.clientHeight,n.width=e.container.clientWidth,n.height=e.container.clientHeight,r.style.position="absolute",n.style.position="absolute",e.container.tabIndex=-1,s=e.createRender({canvas:r,antialias:!0}),c=e.createRender({canvas:n,alpha:!0,antialias:!0})}e.container.appendChild(s.domElement),e.container.appendChild(c.domElement),e.container.tabIndex=0,s.clear(!0,!0,!0),s.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),s.setSize(e.container.clientWidth,e.container.clientHeight,!0);var i=document.createElement("canvas");1!=(u=window.devicePixelRatio?window.devicePixelRatio:1)&&(u*=.75);i.width=200,i.height=200,i.style.top="55px",i.style.position="absolute",i.style.right="0px",i.style.border="none",i.style.zIndex="2",e.processer=document.createElement("PROGRESS"),e.processer.style.top=String(200)+"px",e.processer.style.left=String((e.container.clientWidth-450)/2)+"px",e.processer.style.width="450px",e.processer.style.height="25px",e.processer.style.position="absolute",e.processer.style.zIndex="3",e.processer.textContent="\u6a21\u578b\u52a0\u8f7d\u8fdb\u5ea6",e.processer.style.display="none",e.processer.setAttribute("max","0"),e.container.appendChild(e.processer),l=void 0===l?e.createRender({canvas:i,alpha:!0}):l,l.clear(!0,!0,!0),l.setPixelRatio(u),l.setSize(200/u/1.5,200/u/1.5,!0),e.container.appendChild(l.domElement),console.log("init over")}function o(){return s}function r(){return l}function n(){return e.container}function i(){return u}function a(){return c}var s,l,c,u;e.initialize=t,e.getRenderContext=o,e.getNavRenderContext=r,e.getContainer=n,e.getpixeRatio=i,e.getRenderUpContext=a}(Neon||(Neon={}));var Neon;!function(e){var t=THREE;e.ShaderPass=t.ShaderPass,e.SSAOSahder=t.SSAOShader,e.BufferGeometry=t.BufferGeometry,e.BufferAttribute=t.BufferAttribute,e.InterleavedBuffer=t.InterleavedBuffer,e.InterleavedBufferAttribute=t.InterleavedBufferAttribute,e.Mesh=t.Mesh,e.Scene=t.Scene,e.Camera=t.Camera,e.Vector3=t.Vector3,e.Euler=t.Euler,e.Quaternion=t.Quaternion,e.Box2=t.Box2,e.Box3=t.Box3,e.BoxHelper=t.BoxHelper,e.CylinderBufferGeometry=t.CylinderBufferGeometry,e.Color=t.Color,e.Frustum=t.Frustum,e.Line3=t.Line3,e._Math=t.Math,e.Matrix3=t.Matrix3,e.Matrix4=t.Matrix4,e.Plane=t.Plane,e.Ray=t.Ray,e.Sphere=t.Sphere,e.Spherical=t.Spherical,e.Spline=t.Spline,e.Triangle=t.Triangle,e.Vector2=t.Vector2,e.Vector4=t.Vector4,e.Material=t.Material,e.MeshBasicMaterial=t.MeshBasicMaterial,e.DirectionalLight=t.DirectionalLight,e.AmbientLight=t.AmbientLight,e.WebGLUniforms=t.WebGLUniforms,e.ShaderLib=t.ShaderLib,e.UniformsLib=t.UniformsLib,e.UniformsUtils=t.UniformsUtils,e.LensFlarePlugin=t.LensFlarePlugin,e.SpritePlugin=t.SpritePlugin,e.WebGLShadowMap=t.WebGLShadowMap,e.ShaderMaterial=t.ShaderMaterial,e.Geometry=t.Geometry,e.BoxBufferGeometry=t.BoxBufferGeometry,e.PlaneBufferGeometry=t.PlaneBufferGeometry,e.PerspectiveCamera=t.PerspectiveCamera,e.OrthographicCamera=t.OrthographicCamera,e.WebGLIndexedBufferRenderer=t.WebGLIndexedBufferRenderer,e.WebGLBufferRenderer=t.WebGLBufferRenderer,e.WebGLLights=t.WebGLLights,e.WebGLPrograms=t.WebGLPrograms,e.WebGLObjects=t.WebGLObjects,e.WebGLTextures=t.WebGLTextures,e.WebGLProperties=t.WebGLProperties,e.WebGLState=t.WebGLState,e.WebGLCapabilities=t.WebGLCapabilities,e.WebGLExtensions=t.WebGLExtensions,e.WebGLClipping=t.WebGLClipping,e.WebGLRenderTarget=t.WebGLRenderTarget,e.WebGLRenderTargetCube=t.WebGLRenderTargetCube,e.TextureLoader=t.TextureLoader,e.Raycaster=t.Raycaster;var o=function(e){function t(t){var o=e.call(this,t)||this;return o.transform=null,o}return __extends(t,e),t}(t.MeshPhongMaterial);e.MeshPhongMaterial=o}(Neon||(Neon={}));var Neon;!function(e){function t(){return e._selector}var o=function(t){function o(){var o=t.call(this)||this,r=[],n=new Set;return o.add=function(t){if(e.isString(t))n.has(t)||(r.push(t),n.add(t));else{if(!e.isArray(t))return;for(var o=0,i=t.length;o<i;++o)n.has(t[o])||(r.push(t[o]),n.add(t[o]))}},o.pressKey=function(e){"Escape"==e.key&&this.emit({type:"onPressEsc",target:null})},o.clear=function(e){r.length=0,n.clear()},o.select=function(t,n){if(e.isString(t))r.push(t);else{if(!e.isArray(t))return;r.push.apply(r,t)}o.emit({type:"OnSelectorSel",target:{uuids:r.slice(),isLag:n}})},o.focus=function(e){o.emit({type:"_OnFocus",target:e})},o.text=function(e){o.emit({type:"OnText",target:{enable:e}})},o.focusBack=function(){o.emit({type:"_OnFocusBack",target:null})},o.selectFloorAndMajorAndClass=function(e,t){void 0==e?o.selectAll(!0):"none"==String(e)?o.selectAll(!1):o.emit({type:"OnSelectFloorN",target:{names:e,treeName:t}})},o.selectAll=function(e){this.emit({type:"OnSelectAll",target:{enable:e}})},o.get=function(){return r.slice()},o.createLevel=function(e,t){o.emit({type:"_OnCreateLevel",targer:{theta:e,phi:t}})},o.setCameraState=function(e,t){return o.emit({type:"_OnSetCameraState",targer:{cameraID:e,cameraState:t}})},o.InitCamera=function(){return o.emit({type:"_OnInitCamera",targer:null})},o.setMethod=function(e,t){o.emit({type:"OnSetMethod",target:{name:e,enable:t}})},o.setConstructionsection=function(e){o.emit({type:"OnSetConstructionsection",targer:{enable:e}})},o.getClassInfo=function(t,o){return o?!0===o?e.coreModel[0].getFragmentSet().getClassInfoFromClassName(t):void 0:e.coreModel[0].getFragmentSet().getClassInfo(t)},o}return __extends(o,t),o}(e.EventEmitter);e.Selector=o,e._selector=new o,e.getSelector=t}(Neon||(Neon={}));var Neon;!function(e){function t(t,o,r){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){switch(i.label){case 0:return n=new Promise(function(t,r){var n=new e.TextureLoader,i=function(t){e.logger.log("load texture error: "+o),r(null)},a=function(e){t(e)},s=e.noop,l=e.CURRENT_MODEL_DIRECTORY+"/Texc/"+o;e.logger.debug(o),n.load(l,a,s,i)}),[4,n.then(function(e){e.name=o,e.wrapS=1e3,e.wrapT=1e3,t[r]=e})];case 1:return i.sent(),[2]}})})}function o(o,r,n){n.name=o.name,n.color=(new e.Color).setRGB((o.color>>16&255)/255,(o.color>>8&255)/255,(255&o.color)/255),n.opacity=o.opacity,n.transparent=o.transparency,n.reflectivity=o.reflectivity,n.needsUpdate=!0,n.id=r,void 0!==o.map&&(t(n,o.map.path,"map"),n.setUvMatrix(o.map.transform)),void 0!==o.bumpMap&&(t(n,o.bumpMap.path,"bumpMap"),n.setUvMatrix(o.bumpMap.transform)),void 0!==o.alphaMap&&(t(n,o.alphaMap.path,"alphaMap"),n.setUvMatrix(o.alphaMap.transform)),void 0!==o.normalMap&&(t(n,o.normalMap.path,"normalMap"),n.setUvMatrix(o.normalMap.transform)),void 0!==o.aoMap&&(t(n,o.aoMap.path,"aoMap"),n.setUvMatrix(o.aoMap.transform)),void 0!==o.displacementMap&&(t(n,o.displacementMap.path,"displacementMap"),n.setUvMatrix(o.displacementMap.transform)),void 0!==o.emissiveMap&&(t(n,o.emissiveMap.path,"emissiveMap"),n.setUvMatrix(o.emissiveMap.transform)),void 0!==o.envMap&&(t(n,o.aoMap.path,"aoMap"),n.setUvMatrix(o.aoMap.transform)),void 0!==o.lightMap&&(t(n,o.lightMap.path,"lightMap"),n.setUvMatrix(o.lightMap.transform)),void 0!==o.specularMap&&(t(n,o.specularMap.path,"specularMap"),n.setUvMatrix(o.specularMap.transform)),o=null}function r(t,o,r){for(var n=t.attributes,i=n.position,a=i instanceof e.BufferAttribute?3:i.data.stride,s=i instanceof e.BufferAttribute?0:i.offset,l=i.count,c=i.array,u=new e.Vector3,d=0;d<l;d++)u.set(c[d*a+s],c[d*a+s+1],c[d*a+s+2]),r&&u.applyMatrix4(r),o(u,d)}function n(t){function o(e,t){var o=0|e.x*u,r=0|e.y*u,n=0|e.z*u,i=a[o];i||(a[o]=i={});var s=i[r];s||(i[r]=s={});var l=s[n];return void 0===l&&(s[n]=l=t),l}function n(e,t){var r=o(e,t);i[t]=r}var i=[],a={},s=1;if(t.computeBoundingBox(),t.boundingBox){var l=(new e.Box3).copy(t.boundingBox),c=l.getSize();s=Math.max(c.x,Math.max(c.y,c.z))}var u=65536/s;return r(t,n),i}function i(e){return e&&e.attributes&&e.attributes.position?e.attributes.position.count:0}function a(e,t){function o(e,t){n[3*t]=e.x,n[3*t+1]=e.y,n[3*t+2]=e.z}var n=new Float32Array(3*i(e));return r(e,o,t),n}function s(t,o,r){function i(e,t){t.x=u[3*e],t.y=u[3*e+1],t.z=u[3*e+2]}function s(e,t,o,r){i(e,p),i(t,m),i(o,f),m.sub(p),f.sub(p),m.cross(f),r.copy(m).normalize()}function l(e,t,r){var n=c[e],i=c[t],a=c[r];if(n!==i&&n!==a&&i!==a){var l=!1;if(n>i){var u=n;n=i,i=u,l=!0}var p=d[n];if(p){var m=p[i];if(void 0===m)p[i]=l?-r-1:r;else{if(o)h.push(e),h.push(t);else{s(e,t,r,v),m<0?s(i,n,c[-m-1],g):s(n,i,c[m],g);var f=v.dot(g);Math.abs(f)<.25&&(h.push(e),h.push(t))}delete p[i]}}else d[n]={},d[n][i]=r}}var c=n(t);r||(r=new e.Matrix4);var u=a(t,r),d={},h=[],p=new e.Vector3,m=new e.Vector3,f=new e.Vector3,v=new e.Vector3,g=new e.Vector3,x=t.index;if(x)for(var y=x.array,A=0,b=y.length;A<b;A+=3)!function(e,t,o){l(e,t,o),l(t,o,e),l(o,e,t)}(y[A],y[A+1],y[A+2]);t.lineIndex=h}function l(e,t){var o=new v,r=new m(e.vb,e.strides,t),n=e.attributes.position;return o.addAttribute("position",new f(r,n.itemSize,n.offset,!1)),n=e.attributes.normal,o.addAttribute("normal",new f(r,n.itemSize,n.offset,!1)),n=e.attributes.uv,o.addAttribute("uv",new f(r,n.itemSize,n.offset,!1)),o.setIndex(new p(e.indices,1,!1,t)),o.dynamicMode=e.drawMode,e=null,s(o,!1),o}function c(t,o){var r=Math.abs,n=new e.Vector3,i=new e.Vector3;new e.Vector3;e.axisNets=null,e.axisNets=new Map;for(var a=new Set,s=0,l=t.length;s<l;++s){var c=t[s];if(0==c.type){var u=0;n.set(c.data[0],c.data[1],c.data[2]).applyMatrix4(o),i.set(c.data[3],c.data[4],c.data[5]).applyMatrix4(o),7==c.data.length&&(u=new Int32Array(c.data)[6]);var d=e.axisNets.get(u);void 0==d&&(d=[]);var h=void 0;r(n.x-i.x)<1e-4?h=g.XMODE:r(n.y-i.y)<1e-4&&(h=g.YMODE),a.has(c.name)||(d.push({name:c.name,mode:h,startPoint:(new e.Vector3).copy(n),endPoint:(new e.Vector3).copy(i),centerPoint:void 0}),a.add(c.name)),e.axisNets.set(u,d)}}e.logger.log("axisNets",e.axisNets)}function u(t,o){function r(t,o,r){isNaN(t)&&(t=0);var i=e.levels.get(t);void 0==i&&(i={b:null,c:null}),o==b.BUILDING?i.b={mode:o,location:r+n.z}:i.c={mode:o,location:r+n.z},e.levels.set(t,i)}var n=new e.Vector3,i=new e.Quaternion,a=new e.Vector3;e.levels=null,e.levels=new Map,o.decompose(n,i,a),e.gloableTran.copy(n);for(var s=0,l=t.length;s<l;++s){var c=t[s];"\u57fa\u7840"==c.name?r(-1,b.STRUCTURE,c.height):"\u5c4b\u9762\u7ed3\u6784"==c.name?r(9,b.STRUCTURE,c.height):"\u6c34\u7bb1\u95f4\u7ed3\u6784"==c.name?r(10,b.STRUCTURE,c.height):"\u51fa\u5c4b\u9762"==c.name?r(11,b.STRUCTURE,c.height):"\u5c4b\u9762\u5efa\u7b51"==c.name?r(9,b.BUILDING,c.height):"\u6c34\u7bb1\u95f4\u5efa\u7b51"==c.name&&r(10,b.BUILDING,c.height);var u=c.name.split("F");if(2==u.length){var d="\u7ed3\u6784"==u[1]?b.STRUCTURE:b.BUILDING;r(parseInt(u[0]),d,c.height)}if(u=c.name.split(" "),2==u.length){e.logger.log(u);var d=u[0].indexOf("\u5efa\u7b51")<0?b.STRUCTURE:b.BUILDING;"\u5efa\u7b51\u5c4b\u9762"==u[0]?d=b.STRUCTURE:"\u7ad9\u623f"==u[0]&&(d=b.BUILDING),r(parseFloat(u[1]),d,c.height)}if(u=c.name.split("-"),2==u.length){var d="\u5efa\u7b51"==u[0]?b.BUILDING:b.STRUCTURE;r(parseFloat(u[1].split("/")[0]),d,c.height)}}}e.zmax=null,e.zmin=null,e.enableFloor=!1,e.enableAxisNet=!1,e.enableLevel=!0,e.firstCreat=!0,e.isPartitioned=!1,e.gloableTran=new e.Vector3;var d=1e7,h=function(t){function o(e,o){var r=t.call(this,e)||this;return r.hasUvMatrix=!1,void 0!=o&&(r.hasUvMatrix=!0,r.uvMatrix=o),r.side=THREE.DoubleSide,r}return __extends(o,t),o.prototype.setUvMatrix=function(t){this.hasUvMatrix=!0,this.uvMatrix=t,e.logger.log(t)},o.prototype.getUvMatrix=function(){return this.uvMatrix},o}(THREE.MeshLambertMaterial);e.NeonPhongMaterial=h;var p=function(){function t(t,o,r,n){this.uuid="N2_"+n+"_"+d++,this.array=t,this.itemSize=o,this.count=void 0!==t?t.length/o:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=e.noop,this.version=0}return t}();e.RenderBufferAttribute=p,p.prototype=Object.create(e.BufferAttribute.prototype);var m=function(){function t(t,o,r){this.uuid="N2_"+r+"_"+d++,this.array=t,this.stride=o,this.count=void 0!==t?t.length/o:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=e.noop,this.version=0}return t}();e.RenderInterleavedBuffer=m,m.prototype=Object.create(e.InterleavedBuffer.prototype);var f=function(){function e(e,t,o,r){this.uuid=null,this.data=e,this.itemSize=t,this.offset=o,this.normalized=!0===r}return e}();e.RenderInterleavedBufferAttribute=f,f.prototype=Object.create(e.InterleavedBufferAttribute.prototype);var v=function(){function t(){this.boundingSphere=new e.Sphere,this.boundingBox=new e.Box3,this.lineIndex=null,this.id=d++,this.uuid=null,this.name=null,this.type=null,this.index=null,this.dynamicMode=1,this.classType=1245488,this.attributes={},this.morphAttributes={},this.groups=[],this.drawRange={start:0,count:1/0}}return t}();e.RenderBufferGeometry=v,v.prototype=Object.create(e.BufferGeometry.prototype);var g,x=function(){function t(t){function o(t,o,r){if(s>=536870912)t.drawMode=6;else{t.byteLength*(o||1)<1e5&&(t.drawMode=6)}return 2!=(2&t.drawMode)&&(s+=t.byteLength,c+=1),u++,(e.isUndefined(r)||r<0)&&(r=a.length),d+=t.byteLength,a[r]=l(t,h),r}function r(e){var t=this.get(e);return t?(a[e]=null,t.byteLength):0}function n(e){return a[e]}function i(){return a.length}var a=[],s=0,c=0,u=0,d=0,h=t;this.clear=function(){for(var e=0,t=a.length;e<t;++e)a[e]&&a[e].dispatchEvent({type:"dispose"});a.length=0},this.add=o,this.remove=r,this.get=n,this.getCount=i}return t}(),y=function(){function t(t){function r(e){for(var t=0;t<e.length;++t)n(e[t],t);e=null}function n(t,r){e.isUndefined(r)&&(r=l.length);var n=null;return n=void 0!==l[r]?l[r]:new h({}),o(t,r,n),l[r]=n,r}function i(e){return l[e]=null,e}function a(e){return l[e]}function s(){return l.length}var l=[],c=function(){var e={name:"",color:0,shininess:0,opacity:0,transparency:!1};return function(t){var o=l[t];return o&&(e.name=o.name,e.color=o.color.getHex(),e.opacity=o.opacity,e.transparency=o.transparent),e}}();this.clear=function(){for(var e=0,t=l.length;e<t;++e)l[e]&&l[e].dispose();l.length=0},this.initialize=r,this.add=n,this.remove=i,this.get=a,this.getOriginal=c,this.getCount=s}return t}();!function(e){e[e.XMODE=0]="XMODE",e[e.YMODE=1]="YMODE",e[e.ARC=2]="ARC"}(g=e.AXISMODE||(e.AXISMODE={}));var A=function(){function e(){}return e}();e.Axis=A,e.axisNets=new Map;var b;!function(e){e[e.BUILDING=0]="BUILDING",e[e.STRUCTURE=1]="STRUCTURE"}(b=e.LEVELMODE||(e.LEVELMODE={}));var w=function(){function e(){}return e}();e.Level=w,e.levels=new Map,e.cadPicture=new Map;var E=function(){function e(){this.intersectAxis=[],this.adjoinAxis={xpos:null,xneg:null,ypos:null,yneg:null},this.isSelected=!1,this.selectedBox=[],this.isTaskSelected=!1}return e}();e.floorsMap=new Map;var M=function(){function t(t,o,r,n,i,a){function s(e,t){var o=e.startPoint,r=e.endPoint;return e.mode==g.XMODE?o.x<t.max.x&&o.x>t.min.x?o.y>t.max.y&&r.y<t.min.y||o.y<t.min.y&&r.y>t.max.x?{flag:!0,dis:0,mode:g.XMODE,axis:e}:{flag:!0,dis:null,mode:g.XMODE,axis:e}:o.y>t.max.y&&r.y<t.min.y||o.y<t.min.y&&r.y>t.max.x?{flag:!1,dis:t.getCenter().x-o.x,mode:g.XMODE,axis:e}:{flag:!1,dis:null,mode:g.XMODE,axis:e}:e.mode==g.YMODE?o.y<t.max.y&&o.y>t.min.y?o.x>t.max.x&&r.x<t.min.x||o.x<t.min.x&&r.x>t.max.x?{flag:!0,dis:0,mode:g.YMODE,axis:e}:{flag:!0,dis:null,mode:g.YMODE,axis:e}:o.x>t.max.x&&r.x<t.min.x||o.x<t.min.x&&r.x>t.max.x?{flag:!1,dis:t.getCenter().y-o.y,mode:g.YMODE,axis:e}:{flag:!1,dis:null,mode:g.YMODE,axis:e}:void 0}function l(e,t){var o=t.indices[e];if(void 0!==o){var r=t.pairs,n=t.keys,i=t.values,a=t.category,s=t.names,l=t.types,c=s[r[o]],u=l[r[++o]],d=r[++o],h={};h.name=c,h.type=u;for(var p=0;p<d;p++)for(var m=h[a[r[++o]]]={},f=r[++o],v=0;v<f;v++)m[n[r[++o]]]=i[r[++o]];return h}return null}function c(e,t){for(var o in e)for(var r in e[o])if(r==t)return e[o][r]}function u(e,t){for(var o in e)for(var r in e[o]){var n=e[o][r];if(n.indexOf(t)>=0)return!0}return!1}function d(e,t){var o,r;v=e;for(var n=0;n<t;++n){o=l(n,e),r=i.get(a[n]);var s=void 0;s=c(o,"\u5de5\u4f5c\u96c6"),"\u6bd5\u8282\u7ad9-\u5e55\u5899"!=s&&void 0!=s&&""!=s&&"7-\u5e55\u5899"!=s?m(s,r,o,n):(s=c(o,"\u6ce8\u91ca"),void 0==s||""==s?m(null,r,o,n):m(s,r,o,n))}}function h(e){for(var t=null,o=null,r=null,n=null,i=0;i<e.length;++i){var a=e[i];a.mode==g.XMODE&&(a.dis>0?(null==t||e[t].dis>a.dis)&&(t=i):a.dis<0&&(null==o||e[o].dis<a.dis)&&(o=i)),a.mode==g.YMODE&&(a.dis>0?(null==r||e[r].dis>a.dis)&&(r=i):a.dis<0&&(null==n||e[n].dis<a.dis)&&(n=i))}return{xpos:t,xneg:o,ypos:r,yneg:n}}function p(e){var t=e.split("("),o=[];t.map(function(e){o=o.concat(e.split(")"))});var r=[];return o.map(function(e){""!==e&&r.push(e)}),r}function m(t,o,r,n,i){var l=new E;if(null==t||""==t)l.floorNum=1e3,l.floorName="\u672a\u77e5",l.major="\u672a\u77e5",l.category="\u672a\u77e5";else if(t.includes("_")){var d=t.split("_");if(d.length>0){var m=p(d[0]);if(2===m.length?(l.floorNum=parseFloat(m[0]),l.floorName=m[1]):1===m.length&&(l.floorNum=1e3,l.floorName=m[0]),d.length>1){var f=p(d[1]);l.major=f[0]}if(d.length>2){var f=p(d[2]);l.category=f[0]}if(d.length>3){var f=p(d[3]);l.categoryName=f[0]}}}else if(1==i){var d=t.split("-");if(d.length>=3){""==d[0]&&(d[0]=d[1],d[0]="-"+d[0],d[1]=d[2],d[2]=d[3],5==d.length&&(d[3]=d[4]),d.pop());var v=d[0].split("\uff08");l.floorNum=parseInt(v[0]),l.floorName=v[1].slice(0,v[1].length-1),"\u5927\u5c4b\u9762"!=l.floorName&&"\u5c0f\u5c4b\u9762"!=l.floorName&&"\u5927\u5c4b\u9762\u5c42"!=l.floorName&&"\u6c34\u7bb1\u95f4"!=l.floorName||(l.floorName="\u672a\u77e5"),l.major=d[1],l.category=d[2],l.categoryName=d[3]}}else{var d=t.split("-");if(d.length>=4)""==d[0]&&5==d.length&&""==d[0]&&(d[0]=d[1],d[0]="-"+d[0],d[1]=d[2],d[2]=d[3],d.pop()),""==d[0]&&d.length>=6&&(d[0]="-"+d[1],d[1]="-"+d[3],d[2]=d[4],d[3]=d[5],d[4]=d[6],d.pop(),d.pop()),l.floorNum=parseInt(d[0]),l.floorName=d[1],l.major=d[2],l.category=d[3],l.categoryName=d[4];else if(2==d.length||3==d.length&&""==d[0]){3==d.length&&""==d[0]&&(d[0]=d[1],d[0]="-"+d[0],d[1]=d[2],d.pop());var v=d[0].split("\uff08");if(1==v.length?(l.floorNum=1e3,l.floorName="\u672a\u77e5",l.major=d[1]):(l.floorNum=parseInt(v[0]),l.floorName=v[1].slice(0,v[1].length-1),"\uff09"!=l.floorName[l.floorName.length-1]&&")"!=l.floorName[l.floorName.length-1]||(l.floorName=v[1].slice(0,v[1].length-2)),l.major=d[1]),l.sysName=c(r,"\u7cfb\u7edf\u540d\u79f0"),void 0!=l.sysName)for(l.category=l.sysName.slice(0,l.sysName.length);l.category.length>0;){var g=l.category.length;if(!e.isNumber(parseInt(l.category[g-1])))break;l.category=l.category.slice(0,g-1)}}else 3==d.length&&""!=d[0]?(l.floorNum=parseInt(d[0]),l.floorName=d[1],l.major=d[2],l.category=void 0):2==d.length&&""!=d[0]&&(l.floorNum=0,l.floorName=d[1],l.major=d[2],l.category=void 0);void 0==l.floorName&&(l.floorNum=1e3,l.floorName="\u672a\u77e5",l.major="\u672a\u77e5",l.category="\u672a\u77e5"),e.floorsMap.set(l.floorName,l.floorNum)}l.location=o.getCenter(),l.upLevel=o.max.z,l.downLevel=o.min.z;var y=e.axisNets.get(l.floorNum);if(void 0==y&&(y=e.axisNets.get(0)),void 0!=y){for(var A=[],b=0;b<y.length;++b){var S=void 0;S=s(y[b],o),S&&(1==S.flag&&0==S.dis?l.intersectAxis.push(y[b]):0==S.flag&&null!=S.dis&&A.push(S))}var f=h(A);null!=f.xpos&&(l.adjoinAxis.xpos=A[f.xpos].axis),null!=f.xneg&&(l.adjoinAxis.xneg=A[f.xneg].axis),null!=f.ypos&&(l.adjoinAxis.ypos=A[f.ypos].axis),null!=f.yneg&&(l.adjoinAxis.yneg=A[f.yneg].axis)}r&&(l.name=r.name,l.type=r.type),l.volume=c(r,"\u4f53\u79ef"),l.length=c(r,"\u957f\u5ea6"),l.width=c(r,"\u5bbd\u5ea6"),l.height=c(r,"\u9ad8\u5ea6"),l.inner=c(r,"\u5185\u5f84"),l.area=c(r,"\u9762\u79ef"),l.comments=c(r,"\u6ce8\u91ca"),l.workSet=c(r,"\u5de5\u4f5c\u96c6"),u(r,"\u6df7\u51dd\u571f")&&(l.material="\u6df7\u51dd\u571f"),u(r,"C30")&&(l.specification="C30"),u(r,"C45")&&(l.specification="C45"),l.class=l.type,l.class&&l.class.indexOf("CFG")>=0&&console.log(l.class);var C=w.get(l.class);C||(C=[],w.set(l.class,C)),C.push(a[n]);var R=M.get(l.class);R||(R=new Set,M.set(l.class,R));for(var B in r)if(R.add(B),!e.isString(r[B]))for(var T in r[B])R.add(T);var D=c(r,"\u7ed3\u6784\u6750\u8d28");if(D){var k=D.split("-");k=e.filterSpace(k),l.material=void 0==k[0]?void 0:k[0],l.cNames=void 0==k[1]?void 0:k[1],l.specification=void 0==k[2]?void 0:k[2];var q=r.name;q&&"\u6869"==l.cNames&&(q.indexOf("\u76f4\u5f84")>0?(l.pileCate="\u5706\u6869",l.pileSize=q.split(" ")[0],l.pileDepth=c(r,"h"),l.pileBlockLevel=c(r,"\u9876\u90e8\u9ad8\u7a0b")):(l.pileCate="\u65b9\u6869",l.pileSize=q.split(" ")[0],l.pileDepth=c(r,"h"),l.pileBlockLevel=c(r,"\u9876\u90e8\u9ad8\u7a0b")))}void 0==l.inner&&void 0!=l.width&&void 0!=l.height&&(l.inner=l.width+"x"+l.height),"\u6881"==l.category?(l.sectionLength=c(r,"\u526a\u5207\u957f\u5ea6"),null!=l.volume&&null!=l.length&&(l.sectionalArea=String((parseFloat(l.volume)/(parseFloat(l.length)/1e3)).toFixed(2)))):"\u677f"==l.category&&(l.mm=c(r,"\u539a\u5ea6")),"\u7ed3\u6784"==l.major?l.value="\u4f53\u79ef":"\u5efa\u7b51"==l.major?"\u95e8\u7a97"==l.category?l.value="\u4e2a\u6570":"\u677f"==l.category?l.value="\u9762\u79ef":l.value="\u4f53\u79ef":"\u88c5\u9970"==l.major?"\u5185\u88c5"==l.category?("\u5730\u9762"!=l.categoryName&&"\u5929\u82b1"!=l.categoryName||(l.value="\u4e2a\u6570"),"\u5899\u9762"==l.categoryName&&(l.value="\u9762\u79ef")):"\u5916\u88c5"==l.category&&"\u5e55\u5899"==l.categoryName&&(l.value="\u9762\u79ef"):l.value,x.set(a[n],l)}function f(e){if(e<a.length)return x.get(a[e])}var v,x=new Map,y=new e.Vector3,A=new e.Quaternion,b=new e.Vector3,w=new Map,M=new Map;r.decompose(y,A,b);!function(){var t=new e.Box3,o=0}();this.clear=function(){x.clear()},this.getValue=function(e,t){return c(l(e,v),t)},this.has=function(e){return x.has(a[e])},this.addAttribute=function(e,t){
var o=l(e,t),r=i.get(a[e]),n=c(o,"\u5de5\u4f5c\u96c6");if("\u6bd5\u8282\u7ad9\u5e55\u5899"!=n&&void 0!=n&&""!=n&&"7-\u5e55\u5899"!=n&&"Workset1"!=n&&n.indexOf("\u5efa\u7b51\u5899")<0)m(n,r,o,e);else if(void 0==(n=c(o,"\u6ce8\u91ca"))||""==n){var s=!0;for(var u in o)if("\u6587\u5b57"==u){for(var d in o[u])"\u4fe1\u606f"==d&&(n=o["\u6587\u5b57"][d]);void 0!=n&&(m(n,r,o,e,!0),s=!1)}s&&m(null,r,o,e)}else m(n,r,o,e)},this.getFromUUid=function(e){return x.get(e)},this.getClassMap=function(){return w},this.getClassInfo=function(t){var o=this;if(t){if(e.isArray(t)){var r={},n=new Map;return t.map(function(e){var t=o.getAttributeUUID(e).class,r=n.get(t);r||(r=[],n.set(t,r)),r.push(e)}),r.classNo=n.size,n.forEach(function(e,t){r[t]=e}),r}return o.getAttributeUUID(t).class}var i={};return i.classNo=w.size,w.forEach(function(e,t){i[t]=e}),i},this.getClassInfoFromClassName=function(t){if(t){if(e.isArray(t)){var o={};return t.map(function(e){o[e]=M.get(e)}),o}return M.get(t)}},this.add=m,this.get=f,this.init=d}return t}(),S=function(){function t(t,o,r){function n(t,o){t.drawMode=1;var r=k[o];if(void 0===r)return void e.logger.warn("Add geometry failed in [ "+o+" ]");var n=0;if(n=e.isNumber(r)?1:r.length,T+=n,P.add(t,n,o),h(r,2),e.isNumber(r)){var i=S[r];0==j.has(i)&&j.addAttribute(i,L)}else if(e.isArray(r))for(var a=0,s=r.length;a<s;++a){var i=S[r[a]];0==j.has(i)&&j.addAttribute(i,L)}}function i(e,t){for(var o=16*e,r=0;r<16;++r)t.elements[r]=q[o+r]}function a(){return B}function s(){return B===T}function l(e){var t=S[e];return R[t]}function d(e){return N[e]}function h(t,o){if(e.isArray(t))for(var r=0,n=t;r<n.length;r++){var i=n[r];8!==N[i]&&(N[i]=o)}else 8!==N[t]&&(N[t]=o)}function p(e){return E[e]}function m(){return P}function f(){return H}function v(e){var t=L.indices[e];if(void 0!==t){for(var o=L.pairs,r=L.keys,n=L.values,i=L.category,a=L.names,s=L.types,l=(a[o[t]],s[o[++t]],o[++t]),c=0;c<l;c++)if("\u6587\u5b57"==i[o[++t]])for(var u=o[++t],d=0;d<u;d++){if("\u4fe1\u606f"==r[o[++t]])return n[o[++t]];t+=2}else{var u=o[++t];t+=2*u}return null}}function g(e){return j.get(S[e])}var A=this,b=t.fragments,w=b.bbox,E=b.facets,S=b.frag2idx,C=b.frag2mesh,R=b.idx2frag,B=b.length,T=b.loaded,D=b.materialIdx,k=b.mesh2frag,q=b.transform,I=t.uuids,U=o,N=new Uint8Array(B),P=new x(o),H=new y(o),z=t.worldMatrix.elements,L=t.attributes[0],F=t.attributes[1],V=t.attributes[2],O=new Map,_=new Map,j=new M(o,w,(new e.Matrix4).fromArray(z),R,_,I);e.logger.log(V,F),t.materials&&H.initialize(t.materials),F&&void 0==r&&u(F,(new e.Matrix4).fromArray(z)),e.logger.debug("levels",e.levels),V&&void 0==r&&c(V,(new e.Matrix4).fromArray(z)),e.logger.debug("axisNets",e.axisNets);var G=function(){var e;return function(t){return e=C[t],P.get(e)}}(),W=function(){var e;return function(t){return e=D[t],H.get(e)}}(),Y=function(){var t=new e.Box3,o=0;return function(e){return o=6*e,t.min.x=w[o],t.min.y=w[o+1],t.min.z=w[o+2],t.max.x=w[o+3],t.max.y=w[o+4],t.max.z=w[o+5],t}}(),Q=function(){var e;return function(t){return e=S[t],I[e]}}(),X=function(){function t(t,o,r,n,i,a,s){return e.Triangle.barycoordFromPoint(t,o,r,n,C),i.multiplyScalar(C.x),a.multiplyScalar(C.y),s.multiplyScalar(C.z),i.add(a).add(s),i.clone()}function o(e,t,o,r,n,i,a,s,l,c){var u=e.material;if(null===(1===u.side?o.intersectTriangle(r,n,i,!0,a):o.intersectTriangle(r,n,i,2!==u.side,a)))return null;D.copy(a),D.applyMatrix4(e.matrixWorld);var d=t.ray.origin.distanceTo(D);return d<t.near||d>t.far?null:{distance:d,point:D.clone(),vA:r.clone().applyMatrix4(e.matrixWorld),vB:n.clone().applyMatrix4(e.matrixWorld),vC:i.clone().applyMatrix4(e.matrixWorld)}}function r(e,r,n,i,a,s,l,c){v.set(i[8*a],i[8*a+1],i[8*a+2]),g.set(i[8*s],i[8*s+1],i[8*s+2]),x.set(i[8*l],i[8*l+1],i[8*l+2]),y.set(c[8*a+3],c[8*a+4],c[8*a+5]),A.set(c[8*s+3],c[8*s+4],c[8*s+5]),b.set(c[8*l+3],c[8*l+4],c[8*l+5]);var u=o(e,r,n,v,g,x,T,y,A,b);return u&&(w.set(i[8*a+6],i[8*a+7]),E.set(i[8*s+6],i[8*s+7]),M.set(i[8*l+6],i[8*l+7]),u.uv=t(T,v,g,x,w,E,M),u.faceIndex=a),u}function n(e,t,o){var n=e.geometry;if(n){var i=e.matrixWorld;m.getInverse(i),f.copy(t.ray).applyMatrix4(m);for(var a,s,l,c,u=n.index,d=n.attributes.position.array,h=n.attributes.normal.array,p=0,v=u.count;p<v;p+=3)a=u.getX(p),s=u.getX(p+1),l=u.getX(p+2),(c=r(e,t,f,d,a,s,l,h))&&(c.faceIndex=Math.floor(p/3),c.fragId=e.fragId,o.push(c))}}var a,s,l,c=[],u=0,p=new e.Mesh(void 0,void 0),m=new e.Matrix4,f=new e.Ray,v=new e.Vector3,g=new e.Vector3,x=new e.Vector3,y=new e.Vector3,A=new e.Vector3,b=new e.Vector3,w=new e.Vector2,E=new e.Vector2,M=new e.Vector2,C=new e.Vector3,T=new e.Vector3,D=new e.Vector3;return function(t,o){function r(t){return t.max.x<=e.clipBox.max.x&&t.max.y<=e.clipBox.max.y&&t.max.z<=e.clipBox.max.z&&t.max.x>=e.clipBox.min.x&&t.max.y>=e.clipBox.min.y&&t.max.z>=e.clipBox.min.z||t.min.x<=e.clipBox.max.x&&t.min.y<=e.clipBox.max.y&&t.min.z<=e.clipBox.max.z&&t.min.x>=e.clipBox.min.x&&t.min.y>=e.clipBox.min.y&&t.min.z>=e.clipBox.min.z}c.length=0;for(var m=0;m<B;++m)u=m,a=Y(u),1!==(s=d(u))&&0!==s&&16!==s&&t.ray.intersectBox(a)&&c.push(u);if(!(c.length<=0)){for(var f=[],v=[],g=null,x=0;x<c.length;x++)u=c[x],1!==d(u)&&(p.geometry=G(u),p.material=W(u),p.uuid=Q(u),p.modelId=U,p.fragId=u,p.state=d(u),i(u,p.matrixWorld),i(u,p.matrix),n(p,t,v),v.length>0&&f.push(v[0]),v.length=0);if(0!==f.length){if(f.sort(function(e,t){return e.distance>t.distance?1:e.distance<t.distance?-1:0}),null!=e.zmax&&null!=e.zmin&&e.enableFloor){for(var y=0,A=!1;y<f.length;++y){u=f[y].fragId,g=f[y];var b=Y(u);if((b.max.z>=e.zmax&&b.min.z<e.zmin||b.max.z>e.zmin&&b.min.z<=e.zmin||b.max.z<=e.zmax&&b.min.z>=e.zmin)&&r(b)){A=!0;break}}if(!1===A)return}else for(var m=0;m<f.length;++m)if(r(Y(f[m].fragId))){u=f[m].fragId,g=f[m];break}u=S[u];var w=I[u];if(e._selector.emit({type:"_OnPropertyChanged",target:{id:u,isQuick:!1,uuid:w}}),e._selector.add(I[u]),l=R[u],void 0==o)return g;if(e.isNumber(l))o.push(l),h(l,4);else if(e.isArray(l))for(var m=0;m<l.length;++m)o.push(l[m]),h(l[m],4);return g}}}}(),K=function(){var t;return function(o){return e.isUndefined(t)&&(t=new e.Mesh(void 0,void 0)),t.geometry=G(o),t.material=W(o),t.uuid=Q(o),t.modelId=U,t.receiveShadow=!0,t.castShadow=!0,t.fragId=o,t.state=d(o),i(o,t.matrixWorld),i(o,t.matrix),t}}();this.getAttributeUUID=function(e){var t=O.get(e);return j.get(S[t[0]])},this.dispose=function(){P.clear(),H.clear(),j.clear(),I=null,S=null,R=null,P=null,H=null,j=null},this.getWorldMatrix=function(){return(new e.Matrix4).fromArray(z)};var J=function(){var t,o,r,n=new e.Vector3,a=new e.Vector3,s=new e.Vector3,l=new e.Matrix4;return function(c){var u=A.getAttributeUUID(c);if(void 0!=u.volume)return parseFloat(u.volume);for(var d=O.get(c),h=0,p=0;p<d.length;++p){var m=d[p],f=K(m).geometry;if(void 0==f||void 0==f.attributes||void 0==f.attributes.position)return;var v=f.attributes.position.array,g=f.index,x=new e.Vector3;i(m,l);for(var y=0,b=g.count;y<b;y+=3)t=g.getX(y),o=g.getX(y+1),r=g.getX(y+2),n.set(v[8*t]/e.meter2foot,v[8*t+1]/e.meter2foot,v[8*t+2]/e.meter2foot).applyMatrix4(l),a.set(v[8*o]/e.meter2foot,v[8*o+1]/e.meter2foot,v[8*o+2]/e.meter2foot).applyMatrix4(l),s.set(v[8*r]/e.meter2foot,v[8*r+1]/e.meter2foot,v[8*r+2]/e.meter2foot).applyMatrix4(l),h+=x.crossVectors(n,a).dot(s)/6}return h}}();this.getValue=function(e,t){var o=j.getFromUUid(e);return"\u4f53\u79ef"==o.value?String(J(e)):"\u4e2a\u6570"==o.value?"1\u4ef6":"\u9762\u79ef"==o.value?o.area+"\u5e73\u65b9\u7c73":"\u957f\u5ea6"==o.value?o.length+"\u7c73":void 0};var Z=function(){function t(e,t){return e.x>=t.min.x-.001&&e.y>=t.min.y-.001&&e.z>=t.min.z-.001&&e.x<=t.max.x+.001&&e.y<=t.max.y+.001&&e.z<=t.max.z+.001}function o(o,r,n){var i=[],a=(new e.Vector3).copy(r).sub(o).normalize();if(r.x>n.max.x){var s=(n.max.x-o.x)/a.x;i.push((new e.Vector3).set(o.x+a.x*s,o.y+a.y*s,o.z+a.z*s))}else if(r.x<n.min.x){var s=(n.min.x-o.x)/a.x;i.push((new e.Vector3).set(o.x+a.x*s,o.y+a.y*s,o.z+a.z*s))}if(r.y>n.max.y){var s=(n.max.y-o.y)/a.y;i.push((new e.Vector3).set(o.x+a.x*s,o.y+a.y*s,o.z+a.z*s))}else if(r.y<n.min.y){var s=(n.min.y-o.y)/a.y;i.push((new e.Vector3).set(o.x+a.x*s,o.y+a.y*s,o.z+a.z*s))}if(r.z>n.max.z){var s=(n.max.z-o.z)/a.z;i.push((new e.Vector3).set(o.x+a.x*s,o.y+a.y*s,o.z+a.z*s))}else if(r.z<n.min.z){var s=(n.min.z-o.z)/a.z;i.push((new e.Vector3).set(o.x+a.x*s,o.y+a.y*s,o.z+a.z*s))}for(var l=0;l<i.length;++l)if(t(i[l],n))return i[l]}function r(t,o){return t.max.z>o.max.z?new e.Vector3(0,0,o.max.z):t.min.z<o.min.z?new e.Vector3(0,0,o.min.z):t.max.x>o.max.x?new e.Vector3(o.max.x,0,0):t.min.x<o.min.x?new e.Vector3(o.min.x,0,0):t.max.y>o.max.y?new e.Vector3(0,o.max.y,0):t.min.y<o.min.y?new e.Vector3(0,o.min.y,0):new e.Vector3(0,0,0)}var n,a,s,l=(new e.Box3,new e.Vector3,new e.Vector3,new e.Vector3,new e.Vector3),c=new e.Vector3,u=new e.Vector3,d=new e.Matrix4;return function(h,p){var m=G(h),f=m.attributes.position.array,v=m.index,g=new e.Vector3,x=(new e.Vector3,new THREE.Raycaster,r(Y(h),p));i(h,d);for(var y=0,A=0,b=v.count;A<b;A+=3)if(n=v.getX(A),a=v.getX(A+1),s=v.getX(A+2),l.set(f[8*n],f[8*n+1],f[8*n+2]).applyMatrix4(d),c.set(f[8*a],f[8*a+1],f[8*a+2]).applyMatrix4(d),u.set(f[8*s],f[8*s+1],f[8*s+2]).applyMatrix4(d),t(l,p)&&t(c,p)&&t(u,p)){var w=(new e.Vector3).copy(l).sub(x),E=(new e.Vector3).copy(c).sub(x),M=(new e.Vector3).copy(u).sub(x);y+=g.crossVectors(w,E).dot(M)/6}else if(!t(l,p)||t(c,p)||t(u,p))if(t(l,p)||!t(c,p)||t(u,p))if(t(l,p)||t(c,p)||!t(u,p))if(t(l,p)||t(c,p)||t(u,p)){var S=(new e.Vector3).copy(l).sub(x),C=(new e.Vector3).copy(c).sub(x),R=(new e.Vector3).copy(u).sub(x);if(y+=g.crossVectors(S,C).dot(R)/6,t(l,p)&&t(c,p)&&!t(u,p)){var w=o(l,u,p).sub(x),E=o(c,u,p).sub(x),M=(new e.Vector3).copy(u).sub(x);y-=g.crossVectors(w,E).dot(M)/6}else if(t(l,p)&&!t(c,p)&&t(u,p)){var w=o(l,c,p).sub(x),E=(new e.Vector3).copy(c).sub(x),M=o(u,c,p).sub(x);y-=g.crossVectors(w,E).dot(M)/6}else if(!t(l,p)&&t(c,p)&&t(u,p)){var w=(new e.Vector3).copy(l).sub(x),E=o(c,l,p).sub(x),M=o(u,l,p).sub(x);y-=g.crossVectors(w,E).dot(M)/6}else e.logger.log(8)}else y+=0;else{var w=o(u,l,p).sub(x),E=o(u,c,p).sub(x),M=(new e.Vector3).copy(u).sub(x);y+=g.crossVectors(w,E).dot(M)/6}else{var w=o(c,l,p).sub(x),E=(new e.Vector3).copy(c).sub(x),M=o(c,u,p).sub(x);y+=g.crossVectors(w,E).dot(M)/6}else{var w=(new e.Vector3).copy(l).sub(x),E=o(l,c,p).sub(x),M=o(l,u,p).sub(x);y+=g.crossVectors(w,E).dot(M)/6}return y/Math.pow(e.meter2foot,3)}}();this.getInsectValue=function(e,t,o){switch(o){case"\u4f53\u79ef":return Z(e,t)}};for(var $=0,ee=I.length;$<ee;++$){var te=[],oe=R[$],re=new e.Box3;if(e.isNumber(oe))te.push(oe),re.copy(Y(oe));else if(e.isArray(oe))for(var ne=0;ne<oe.length;++ne)te.push(oe[ne]),0==ne?re.copy(Y(oe[ne])):re.union(Y(oe[ne]));O.has(I[$])?console.log("break"):(O.set(I[$],te),_.set(I[$],re))}this.getBoundingBoxFromUuid=function(e){return _.get(e)},this.getProper=function(e){var t=O.get(e);if(t){S[t[0]]}},this.raycast=X,this.getMesh=K,this.addGeometry=n,this.getGeometry=G,this.getMaterial=W,this.getMatrix=i,this.getBoundingBox=Y,this.getUUID=Q,this.getFragId=l,this.getFacet=p,this.getState=d,this.setState=h,this.getGeometrySet=m,this.getMaterialSet=f,this.getCount=a,this.hasLoadedComplete=s,this.idx2frag=R,this.frag2idx=S,this.getproperIn=v,this.getAttribute=g,this.uuids=I,this.uuid2fragid=O,this.uuidBox=_,this.calcVolume=J,this.getClassInfo=j.getClassInfo,this.getClassInfoFromClassName=j.getClassInfoFromClassName}return t}();e.FragmentSet=S}(Neon||(Neon={}));var Neon;!function(e){var t={glyphs:{0:{ha:814,x_min:62,x_max:755,o:"m 62 505 q 154 925 62 783 q 421 1068 246 1068 q 755 530 755 1068 q 661 123 755 264 q 397 -18 567 -18 q 150 116 237 -18 q 62 505 62 250 m 197 511 q 410 92 197 92 q 618 517 618 92 q 414 958 618 958 q 197 511 197 958 z "},1:{ha:814,x_min:122,x_max:730,o:"m 730 0 l 128 0 l 128 115 l 363 115 l 363 912 l 122 842 l 122 964 l 496 1073 l 496 115 l 730 115 l 730 0 z "},2:{ha:814,x_min:72,x_max:720,o:"m 711 0 l 72 0 l 72 115 l 377 420 q 546 620 503 546 q 589 772 589 693 q 538 909 589 861 q 393 957 488 957 q 125 838 253 957 l 125 972 q 414 1068 250 1068 q 638 991 556 1068 q 720 785 720 915 q 668 594 720 688 q 469 355 615 500 l 229 121 l 229 118 l 711 118 l 711 0 z "},3:{ha:814,x_min:97,x_max:711,o:"m 97 176 q 340 92 205 92 q 512 145 449 92 q 576 288 576 199 q 290 488 576 488 l 203 488 l 203 597 l 286 597 q 539 785 539 597 q 346 958 539 958 q 138 883 235 958 l 138 1008 q 378 1068 241 1068 q 594 998 513 1068 q 675 816 675 928 q 465 551 675 610 l 465 548 q 645 468 579 536 q 711 298 711 399 q 609 69 711 156 q 338 -18 507 -18 q 97 38 189 -18 l 97 176 z "},4:{ha:814,x_min:12,x_max:765,o:"m 765 273 l 631 273 l 631 0 l 502 0 l 502 273 l 12 273 l 12 359 l 477 1050 l 631 1050 l 631 378 l 765 378 l 765 273 m 502 378 l 502 818 q 505 926 502 865 l 502 926 q 462 845 492 900 l 149 378 l 502 378 z "},5:{ha:814,x_min:120,x_max:717,o:"m 120 161 q 340 92 226 92 q 515 153 449 92 q 582 314 582 214 q 514 471 582 415 q 319 526 447 526 q 153 517 257 526 l 153 1050 l 669 1050 l 669 933 l 276 933 l 276 636 q 365 640 335 640 q 624 555 531 640 q 717 323 717 471 q 617 77 717 171 q 342 -18 517 -18 q 120 26 195 -18 l 120 161 z "},6:{ha:814,x_min:80,x_max:756,o:"m 690 916 q 519 958 608 958 q 300 839 382 958 q 216 515 217 720 l 219 515 q 457 659 294 659 q 675 570 593 659 q 756 334 756 481 q 662 81 756 180 q 422 -18 568 -18 q 171 107 262 -18 q 80 463 80 233 q 200 904 80 741 q 515 1068 319 1068 q 690 1038 627 1068 l 690 916 m 224 344 q 279 166 224 240 q 426 92 334 92 q 567 156 513 92 q 621 320 621 220 q 570 489 621 429 q 425 549 519 549 q 279 488 335 549 q 224 344 224 427 z "},7:{ha:814,x_min:64,x_max:747,o:"m 747 1004 l 336 0 l 198 0 l 589 933 l 64 933 l 64 1050 l 747 1050 l 747 1004 z "},8:{ha:814,x_min:72,x_max:745,o:"m 297 553 q 109 806 109 640 q 197 995 109 922 q 422 1068 286 1068 q 629 1000 548 1068 q 711 823 711 931 q 515 553 711 648 l 515 551 q 745 269 745 468 q 650 60 745 138 q 386 -18 555 -18 q 159 59 247 -18 q 72 258 72 136 q 297 550 72 458 l 297 553 m 576 807 q 532 918 576 878 q 413 959 488 959 q 293 917 342 959 q 243 808 243 874 q 408 608 243 677 q 576 807 576 678 m 400 490 q 205 264 205 411 q 262 140 205 189 q 411 91 319 91 q 555 139 500 91 q 611 260 611 188 q 400 490 611 413 z "},9:{ha:814,x_min:68,x_max:742,o:"m 125 142 q 313 92 212 92 q 531 203 454 92 q 609 519 609 315 q 606 519 608 518 q 374 388 537 388 q 155 479 241 388 q 68 715 68 570 q 163 969 68 869 q 409 1068 258 1068 q 654 945 566 1068 q 742 587 742 822 q 628 139 742 296 q 313 -18 514 -18 q 125 18 202 -18 l 125 142 m 202 732 q 256 564 202 626 q 406 502 311 502 q 545 558 489 502 q 602 696 602 615 q 546 883 602 809 q 398 958 490 958 q 258 893 313 958 q 202 732 202 829 z "}," ":{ha:411,x_min:0,x_max:0,o:""},'"':{ha:605,x_min:144,x_max:462,o:"m 279 1052 l 256 725 l 165 725 l 144 1052 l 279 1052 m 462 1052 l 440 725 l 349 725 l 326 1052 l 462 1052 z "},"#":{ha:886,x_min:24,x_max:852,o:"m 852 760 l 836 675 l 650 675 l 606 460 l 802 460 l 785 376 l 587 376 l 526 90 l 428 90 l 489 376 l 309 376 l 248 90 l 149 90 l 210 376 l 24 376 l 41 460 l 229 460 l 273 675 l 75 675 l 92 760 l 290 760 l 350 1050 l 448 1050 l 388 760 l 568 760 l 629 1050 l 727 1050 l 667 760 l 852 760 m 551 675 l 371 675 l 327 460 l 507 460 l 551 675 z "},$:{ha:814,x_min:115,x_max:724,o:"m 456 -153 l 376 -153 l 376 0 q 120 64 222 0 l 120 200 q 376 111 222 117 l 376 473 q 164 616 213 550 q 115 774 115 683 q 188 958 115 880 q 376 1052 261 1036 l 376 1184 l 456 1184 l 456 1055 q 658 1013 604 1049 l 658 880 q 456 944 580 939 l 456 570 q 667 430 609 500 q 724 274 724 361 q 652 95 724 165 q 456 6 579 24 l 456 -153 m 376 940 q 246 789 246 911 q 274 691 246 730 q 376 611 302 652 l 376 940 m 456 116 q 593 263 593 146 q 456 435 593 361 l 456 116 z "},"%":{ha:1236,x_min:59,x_max:1179,o:"m 59 785 q 128 990 59 914 q 313 1066 197 1066 q 488 996 425 1066 q 551 802 551 926 q 481 600 551 677 q 298 523 412 523 q 124 595 189 523 q 59 785 59 667 m 163 792 q 201 657 163 705 q 305 610 239 610 q 410 659 373 610 q 447 798 447 708 q 411 933 447 885 q 309 981 374 981 q 202 931 241 981 q 163 792 163 881 m 1008 1050 l 334 -7 l 220 -7 l 895 1050 l 1008 1050 m 688 246 q 757 452 688 375 q 942 529 826 529 q 1116 459 1053 529 q 1179 261 1179 389 q 1109 61 1179 138 q 927 -16 1040 -16 q 753 57 818 -16 q 688 246 688 130 m 792 252 q 830 119 792 167 q 934 71 868 71 q 1039 121 1002 71 q 1076 259 1076 170 q 1039 394 1076 347 q 937 441 1002 441 q 830 391 868 441 q 792 252 792 341 z "},"&":{ha:1208,x_min:84,x_max:1179,o:"m 822 142 q 444 -17 667 -17 q 181 64 279 -17 q 84 288 84 145 q 328 607 84 502 q 206 827 206 700 q 283 1003 206 937 q 484 1068 359 1068 q 674 1006 602 1068 q 747 844 747 944 q 548 600 747 682 q 835 335 699 542 q 954 720 954 498 q 940 821 954 773 l 1066 821 q 1076 724 1076 781 q 1030 475 1076 605 q 901 235 983 345 q 995 130 957 158 q 1083 102 1034 102 q 1179 123 1124 102 l 1179 5 q 1061 -17 1122 -17 q 946 13 998 -17 q 822 142 895 43 m 448 656 q 623 833 623 716 q 583 929 623 894 q 484 965 543 965 q 372 927 414 965 q 331 827 331 888 q 448 656 331 720 m 760 237 q 604 436 675 369 q 424 544 533 503 q 266 440 313 499 q 218 292 218 380 q 281 148 218 201 q 446 96 345 96 q 760 237 631 96 z "},"(":{ha:464,x_min:104,x_max:450,o:"m 332 -239 q 104 401 104 22 q 332 1050 104 780 l 450 1050 q 220 402 220 769 q 448 -239 220 36 l 332 -239 z "},")":{ha:464,x_min:16,x_max:363,o:"m 17 -239 q 245 402 245 35 q 16 1050 245 770 l 134 1050 q 363 401 363 782 q 134 -239 363 20 l 17 -239 z "},"*":{ha:632,x_min:55,x_max:578,o:"m 578 804 l 377 765 l 517 589 l 431 530 l 318 724 l 204 530 l 117 589 l 257 765 l 55 804 l 90 902 l 281 829 l 263 1050 l 372 1050 l 353 829 l 545 902 l 578 804 z "},"+":{ha:1030,x_min:171,x_max:862,o:"m 862 385 l 567 385 l 567 91 l 465 91 l 465 385 l 171 385 l 171 488 l 465 488 l 465 782 l 567 782 l 567 488 l 862 488 l 862 385 z "},"-":{ha:601,x_min:106,x_max:505,o:"m 505 365 l 106 365 l 106 467 l 505 467 l 505 365 z "},".":{ha:334,x_min:81,x_max:256,o:"m 81 70 q 106 132 81 106 q 168 157 131 157 q 231 131 206 157 q 256 70 256 106 q 231 9 256 35 q 168 -16 206 -16 q 105 9 130 -16 q 81 70 81 35 z "},"/":{ha:593,x_min:-22,x_max:606,o:"m 606 1050 l 102 -174 l -22 -174 l 481 1050 l 606 1050 z "},":":{ha:334,x_min:81,x_max:256,o:"m 81 680 q 106 741 81 717 q 168 766 132 766 q 231 741 205 766 q 256 680 256 716 q 231 619 256 644 q 168 594 206 594 q 106 619 131 594 q 81 680 81 644 m 81 70 q 106 132 81 106 q 168 157 131 157 q 231 131 206 157 q 256 70 256 106 q 231 9 256 35 q 168 -16 206 -16 q 105 9 130 -16 q 81 70 81 35 z "},"<":{ha:1030,x_min:198,x_max:834,o:"m 834 87 l 198 404 l 198 455 l 834 806 l 834 688 l 361 434 l 361 431 l 834 204 l 834 87 z "},"=":{ha:1030,x_min:171,x_max:862,o:"m 862 542 l 171 542 l 171 644 l 862 644 l 862 542 m 862 229 l 171 229 l 171 331 l 862 331 l 862 229 z "},">":{ha:1030,x_min:198,x_max:834,o:"m 834 405 l 198 89 l 198 205 l 671 430 l 671 435 l 198 689 l 198 806 l 834 456 l 834 405 z "},"?":{ha:671,x_min:90,x_max:602,o:"m 239 293 q 222 400 222 343 q 243 491 222 445 q 347 617 263 536 q 451 739 432 698 q 471 816 471 779 q 425 919 471 881 q 307 956 378 956 q 90 859 183 956 l 90 998 q 326 1068 203 1068 q 526 1005 450 1068 q 602 833 602 942 q 579 727 602 781 q 463 583 557 673 q 367 478 391 516 q 342 396 342 440 q 366 293 342 347 l 239 293 m 222 71 q 248 132 222 106 q 310 157 274 157 q 372 132 346 157 q 397 71 397 106 q 372 12 397 37 q 313 -14 347 -14 q 248 12 273 -14 q 222 71 222 38 z "},"@":{ha:1432,x_min:123,x_max:1312,o:"m 976 779 q 942 368 942 383 q 1025 222 942 222 q 1153 307 1103 222 q 1204 527 1204 391 q 1078 850 1204 725 q 731 976 953 976 q 373 825 515 976 q 231 446 231 673 q 364 88 231 224 q 726 -47 497 -47 q 1034 13 904 -47 l 1034 -83 q 717 -138 907 -138 q 287 23 450 -138 q 123 442 123 183 q 295 887 123 710 q 735 1065 467 1065 q 1149 917 986 1065 q 1312 533 1312 770 q 1225 245 1312 357 q 1011 134 1137 134 q 849 304 850 134 l 846 304 q 638 134 791 134 q 476 207 538 134 q 414 406 414 280 q 500 681 414 572 q 720 790 585 790 q 814 763 773 790 q 866 696 855 736 l 869 696 q 876 779 869 699 l 976 779 m 525 406 q 560 274 525 323 q 659 224 595 224 q 799 313 748 224 q 850 547 850 401 q 722 701 850 701 q 579 615 634 701 q 525 406 525 530 z "},A:{ha:977,x_min:16,x_max:961,o:"m 961 0 l 811 0 l 704 288 l 267 288 l 165 0 l 16 0 l 416 1050 l 561 1050 l 961 0 m 662 406 l 503 843 q 487 916 496 864 l 484 916 q 467 843 476 869 l 309 406 l 662 406 z "},B:{ha:871,x_min:136,x_max:799,o:"m 136 0 l 136 1050 l 444 1050 q 665 984 583 1050 q 748 809 748 918 q 699 656 748 722 q 564 562 650 589 l 564 559 q 735 478 671 547 q 799 303 799 409 q 702 84 799 168 q 452 0 604 0 l 136 0 m 271 932 l 271 603 l 395 603 q 549 651 493 603 q 605 783 605 699 q 407 932 605 932 l 271 932 m 271 485 l 271 119 l 434 119 q 598 168 541 119 q 656 304 656 217 q 412 485 656 485 l 271 485 z "},C:{ha:929,x_min:68,x_max:854,o:"m 854 43 q 564 -18 739 -18 q 203 126 338 -18 q 68 505 68 269 q 220 913 68 759 q 606 1068 372 1068 q 854 1025 756 1068 l 854 884 q 607 946 742 946 q 321 829 431 946 q 210 513 210 712 q 313 214 210 325 q 583 103 416 103 q 854 174 739 103 l 854 43 z "},D:{ha:1058,x_min:136,x_max:991,o:"m 136 0 l 136 1050 l 435 1050 q 832 911 674 1050 q 991 538 991 772 q 832 147 991 294 q 425 0 674 0 l 136 0 m 271 930 l 271 120 l 424 120 q 736 229 624 120 q 848 535 848 338 q 733 831 848 732 q 430 930 618 930 l 271 930 z "},E:{ha:764,x_min:136,x_max:701,o:"m 701 0 l 136 0 l 136 1050 l 677 1050 l 677 930 l 271 930 l 271 593 l 647 593 l 647 473 l 271 473 l 271 120 l 701 120 l 701 0 z "},F:{ha:738,x_min:136,x_max:677,o:"m 677 930 l 271 930 l 271 578 l 647 578 l 647 459 l 271 459 l 271 0 l 136 0 l 136 1050 l 677 1050 l 677 930 z "},G:{ha:1033,x_min:68,x_max:930,o:"m 930 72 q 574 -18 772 -18 q 207 126 347 -18 q 68 511 68 271 q 222 911 68 755 q 616 1068 376 1068 q 905 1014 787 1068 l 905 867 q 604 947 779 947 q 321 829 433 947 q 210 520 210 712 q 313 213 210 323 q 589 103 415 103 q 793 149 709 103 l 793 433 l 566 433 l 566 553 l 930 553 l 930 72 z "},H:{ha:1074,x_min:136,x_max:939,o:"m 939 0 l 803 0 l 803 473 l 271 473 l 271 0 l 136 0 l 136 1050 l 271 1050 l 271 594 l 803 594 l 803 1050 l 939 1050 l 939 0 z "},I:{ha:408,x_min:35,x_max:372,o:"m 372 936 l 271 936 l 271 115 l 372 115 l 372 0 l 35 0 l 35 115 l 136 115 l 136 936 l 35 936 l 35 1050 l 372 1050 l 372 936 z "},J:{ha:550,x_min:16,x_max:423,o:"m 423 381 q 342 86 423 191 q 123 -18 262 -18 q 16 1 58 -18 l 16 134 q 122 103 58 103 q 288 381 288 103 l 288 1050 l 423 1050 l 423 381 z "},K:{ha:882,x_min:136,x_max:883,o:"m 883 0 l 697 0 l 302 477 q 275 517 282 503 l 271 517 l 271 0 l 136 0 l 136 1050 l 271 1050 l 271 556 l 275 556 q 302 595 286 574 l 684 1050 l 851 1050 l 410 547 l 883 0 z "},L:{ha:713,x_min:136,x_max:690,o:"m 690 0 l 136 0 l 136 1050 l 271 1050 l 271 120 l 690 120 l 690 0 z "},M:{ha:1357,x_min:136,x_max:1221,o:"m 1086 0 l 1086 696 q 1096 903 1086 782 l 1093 903 q 1061 797 1075 827 l 715 0 l 640 0 l 294 791 q 262 903 281 818 l 258 903 q 265 690 265 829 l 265 0 l 136 0 l 136 1050 l 319 1050 l 629 330 q 676 201 665 248 l 681 201 q 730 333 716 298 l 1046 1050 l 1221 1050 l 1221 0 l 1086 0 z "},N:{ha:1129,x_min:136,x_max:994,o:"m 994 0 l 833 0 l 304 817 q 269 886 282 852 l 264 886 q 270 739 270 850 l 270 0 l 136 0 l 136 1050 l 306 1050 l 820 248 q 863 175 857 191 l 866 175 q 859 328 859 220 l 859 1050 l 994 1050 l 994 0 z "},O:{ha:1132,x_min:68,x_max:1065,o:"m 68 513 q 205 918 68 767 q 578 1068 343 1068 q 931 921 798 1068 q 1065 538 1065 774 q 928 132 1065 282 q 562 -18 791 -18 q 203 130 338 -18 q 68 513 68 277 m 210 524 q 308 218 210 333 q 562 103 405 103 q 826 213 730 103 q 922 522 922 323 q 828 836 922 725 q 570 946 734 946 q 310 829 410 946 q 210 524 210 713 z "},P:{ha:850,x_min:136,x_max:792,o:"m 271 393 l 271 0 l 136 0 l 136 1050 l 434 1050 q 698 968 604 1050 q 792 734 792 886 q 682 483 792 579 q 408 393 572 387 l 271 393 m 271 931 l 271 512 l 397 512 q 585 568 521 512 q 650 728 650 624 q 410 931 650 931 l 271 931 z "},Q:{ha:1132,x_min:68,x_max:1095,o:"m 1095 -273 q 977 -288 1046 -288 q 792 -241 879 -288 q 551 -18 705 -193 q 204 132 340 -19 q 68 513 68 283 q 205 918 68 768 q 582 1068 343 1068 q 931 921 797 1068 q 1065 538 1065 774 q 970 186 1065 328 q 703 2 876 43 q 852 -128 790 -93 q 989 -163 913 -163 q 1095 -144 1052 -163 l 1095 -273 m 210 524 q 308 218 210 333 q 562 103 405 103 q 826 213 730 103 q 922 522 922 323 q 828 836 922 725 q 570 946 734 946 q 310 829 410 946 q 210 524 210 713 z "},R:{ha:907,x_min:136,x_max:903,o:"m 903 0 l 743 0 l 568 292 q 473 411 516 379 q 369 442 429 442 l 271 442 l 271 0 l 136 0 l 136 1050 l 456 1050 q 696 977 609 1050 q 783 770 783 903 q 549 486 783 551 l 549 483 q 624 431 593 465 q 706 315 656 397 l 903 0 m 271 932 l 271 561 l 431 561 q 582 615 524 561 q 640 758 640 669 q 587 886 640 840 q 433 932 534 932 l 271 932 z "},S:{ha:802,x_min:87,x_max:732,o:"m 87 197 q 216 128 135 155 q 369 101 296 101 q 590 258 590 101 q 566 338 590 302 q 501 400 543 373 q 346 484 460 427 q 138 630 188 562 q 87 784 87 697 q 193 991 87 915 q 458 1068 298 1068 q 688 1030 614 1068 l 688 882 q 448 948 593 948 q 291 908 351 948 q 230 795 230 867 q 272 692 230 732 q 454 583 314 652 q 671 435 609 509 q 732 269 732 361 q 632 56 732 130 q 353 -18 532 -18 q 208 0 291 -18 q 87 43 125 17 l 87 197 z "},T:{ha:796,x_min:29,x_max:770,o:"m 770 930 l 467 930 l 467 0 l 331 0 l 331 930 l 29 930 l 29 1050 l 770 1050 l 770 930 z "},U:{ha:1037,x_min:123,x_max:914,o:"m 914 428 q 510 -18 914 -18 q 123 412 123 -18 l 123 1050 l 258 1050 l 258 418 q 523 103 258 103 q 779 408 779 103 l 779 1050 l 914 1050 l 914 428 z "},V:{ha:939,x_min:12,x_max:927,o:"m 927 1050 l 541 0 l 391 0 l 12 1050 l 163 1050 l 446 229 q 467 135 460 189 l 470 135 q 494 231 475 182 l 782 1050 l 927 1050 z "},W:{ha:1413,x_min:18,x_max:1396,o:"m 1396 1050 l 1101 0 l 943 0 l 732 757 q 715 865 718 808 l 712 865 q 693 758 708 809 l 479 0 l 323 0 l 18 1050 l 168 1050 l 382 257 q 399 149 397 203 l 404 149 q 426 257 407 190 l 653 1050 l 787 1050 l 1004 251 q 1021 151 1015 212 l 1024 151 q 1044 254 1027 195 l 1250 1050 l 1396 1050 z "},X:{ha:896,x_min:18,x_max:876,o:"m 876 0 l 711 0 l 476 395 q 452 450 468 409 l 449 450 q 425 395 448 444 l 183 0 l 18 0 l 367 528 l 45 1050 l 212 1050 l 419 687 q 456 612 437 655 l 458 612 q 498 690 475 649 l 715 1050 l 871 1050 l 543 530 l 876 0 z "},Y:{ha:838,x_min:12,x_max:831,o:"m 831 1050 l 485 387 l 485 0 l 349 0 l 349 383 l 12 1050 l 167 1050 l 394 585 q 419 518 395 585 l 421 518 q 449 585 429 547 l 686 1050 l 831 1050 z "},Z:{ha:861,x_min:25,x_max:829,o:"m 829 1010 l 224 120 l 816 120 l 816 0 l 25 0 l 25 46 l 627 930 l 73 930 l 73 1050 l 829 1050 l 829 1010 z "},"[":{ha:464,x_min:148,x_max:425,o:"m 425 -239 l 148 -239 l 148 1050 l 425 1050 l 425 956 l 264 956 l 264 -145 l 425 -145 l 425 -239 z "},"\\":{ha:578,x_min:-17,x_max:598,o:"m 598 -176 l 477 -176 l -17 1050 l 107 1050 l 598 -176 z "},"]":{ha:464,x_min:40,x_max:318,o:"m 318 -239 l 40 -239 l 40 -145 l 201 -145 l 201 956 l 40 956 l 40 1050 l 318 1050 l 318 -239 z "},"^":{ha:1030,x_min:166,x_max:866,o:"m 866 456 l 749 456 l 509 906 l 505 906 l 281 456 l 166 456 l 476 1068 l 532 1068 l 866 456 z "},_:{ha:623,x_min:0,x_max:623,o:"m 623 -218 l 0 -218 l 0 -130 l 623 -130 l 623 -218 z "},"`":{ha:410,x_min:58,x_max:355,o:"m 355 889 l 254 889 l 58 1129 l 191 1129 l 355 889 z "},a:{ha:768,x_min:63,x_max:666,o:"m 136 698 q 395 768 248 768 q 666 483 666 768 l 666 0 l 534 0 l 534 116 l 531 116 q 301 -18 453 -18 q 127 41 192 -18 q 63 201 63 100 q 312 446 63 411 l 534 477 q 382 661 534 661 q 136 570 248 661 l 136 698 m 359 353 q 232 307 267 340 q 197 212 197 273 q 235 124 197 158 q 335 90 273 90 q 478 151 422 90 q 534 304 534 212 l 534 376 l 359 353 z "},b:{ha:887,x_min:119,x_max:819,o:"m 252 106 l 252 0 l 119 0 l 119 1110 l 252 1110 l 252 621 l 254 621 q 512 768 342 768 q 736 668 653 768 q 819 397 819 569 q 726 95 819 207 q 477 -18 633 -18 q 254 106 331 -18 l 252 106 m 251 309 q 310 155 251 218 q 458 92 369 92 q 623 174 564 92 q 683 399 683 255 q 627 588 683 517 q 475 658 572 658 q 314 588 378 658 q 251 410 251 518 l 251 309 z "},c:{ha:696,x_min:68,x_max:637,o:"m 637 34 q 429 -18 551 -18 q 168 87 267 -18 q 68 357 68 191 q 175 655 68 542 q 461 768 282 768 q 637 731 564 768 l 637 600 q 461 658 558 658 q 276 579 347 658 q 204 368 204 500 q 272 165 204 239 q 454 92 339 92 q 637 156 551 92 l 637 34 z "},d:{ha:888,x_min:68,x_max:770,o:"m 770 0 l 637 0 l 637 125 l 634 125 q 379 -18 552 -18 q 153 84 237 -18 q 68 357 68 185 q 163 655 68 543 q 412 768 258 768 q 634 648 565 768 l 637 648 l 637 1110 l 770 1110 l 770 0 m 637 446 q 578 597 637 536 q 432 658 519 658 q 265 579 326 658 q 204 363 204 500 q 263 165 204 238 q 419 92 321 92 q 576 164 515 92 q 637 342 637 235 l 637 446 z "},e:{ha:788,x_min:68,x_max:730,o:"m 730 341 l 205 341 q 271 156 208 221 q 445 90 333 90 q 676 171 571 90 l 676 52 q 414 -18 577 -18 q 160 85 251 -18 q 68 372 68 189 q 169 656 68 544 q 417 768 269 768 q 647 673 564 768 q 730 408 730 578 l 730 341 m 597 448 q 549 605 596 549 q 415 661 501 661 q 278 602 336 661 q 205 448 220 543 l 597 448 z "},f:{ha:481,x_min:38,x_max:503,o:"m 503 997 q 422 1017 466 1017 q 298 862 298 1017 l 298 750 l 473 750 l 473 640 l 298 640 l 298 0 l 166 0 l 166 640 l 38 640 l 38 750 l 166 750 l 166 868 q 236 1058 166 989 q 412 1126 305 1126 q 503 1114 469 1126 l 503 997 z "},g:{ha:888,x_min:68,x_max:770,o:"m 770 63 q 366 -353 770 -353 q 123 -301 226 -353 l 123 -173 q 363 -243 248 -243 q 637 45 637 -243 l 637 124 l 634 124 q 379 -18 549 -18 q 153 83 238 -18 q 68 351 68 184 q 162 655 68 543 q 412 768 256 768 q 634 648 562 768 l 637 648 l 637 750 l 770 750 l 770 63 m 637 446 q 578 595 637 533 q 433 658 519 658 q 264 578 325 658 q 204 359 204 498 q 262 166 204 240 q 417 92 321 92 q 576 163 514 92 q 637 342 637 233 l 637 446 z "},h:{ha:855,x_min:119,x_max:752,o:"m 752 0 l 620 0 l 620 431 q 452 658 620 658 q 309 592 366 658 q 252 425 252 526 l 252 0 l 119 0 l 119 1110 l 252 1110 l 252 627 l 254 627 q 499 768 340 768 q 752 462 752 768 l 752 0 z "},i:{ha:370,x_min:102,x_max:271,o:"m 102 1015 q 126 1074 102 1050 q 186 1098 151 1098 q 247 1074 222 1098 q 271 1015 271 1050 q 247 956 271 979 q 186 932 222 932 q 126 956 150 932 q 102 1015 102 979 m 118 0 l 118 750 l 251 750 l 251 0 l 118 0 z "},j:{ha:371,x_min:-140,x_max:272,o:"m 103 1015 q 127 1074 103 1050 q 186 1098 151 1098 q 248 1074 223 1098 q 272 1015 272 1050 q 247 956 272 980 q 186 932 222 932 q 127 957 151 932 q 103 1015 103 981 m 252 29 q 176 -253 252 -153 q -39 -353 100 -353 q -140 -330 -90 -353 l -140 -210 q -39 -242 -87 -242 q 119 9 119 -242 l 119 750 l 252 750 l 252 29 z "},k:{ha:756,x_min:119,x_max:756,o:"m 756 0 l 575 0 l 254 361 l 252 361 l 252 0 l 119 0 l 119 1110 l 252 1110 l 252 406 l 254 406 l 559 750 l 730 750 l 391 389 l 756 0 z "},l:{ha:370,x_min:118,x_max:251,o:"m 118 0 l 118 1110 l 251 1110 l 251 0 l 118 0 z "},m:{ha:1301,x_min:119,x_max:1198,o:"m 1198 0 l 1065 0 l 1065 431 q 1027 605 1065 553 q 903 658 989 658 q 777 589 829 658 q 725 427 725 521 l 725 0 l 592 0 l 592 444 q 427 658 592 658 q 301 593 351 658 q 252 427 252 528 l 252 0 l 119 0 l 119 750 l 252 750 l 252 631 l 254 631 q 488 768 334 768 q 621 726 564 768 q 701 614 679 685 q 951 768 785 768 q 1198 463 1198 768 l 1198 0 z "},n:{ha:856,x_min:119,x_max:753,o:"m 753 0 l 621 0 l 621 427 q 452 658 621 658 q 308 593 364 658 q 252 428 252 528 l 252 0 l 119 0 l 119 750 l 252 750 l 252 626 l 254 626 q 500 768 339 768 q 688 689 624 768 q 753 458 753 610 l 753 0 z "},o:{ha:883,x_min:68,x_max:814,o:"m 68 367 q 172 660 68 553 q 454 768 276 768 q 719 664 623 768 q 814 378 814 561 q 712 92 814 201 q 437 -18 610 -18 q 169 88 269 -18 q 68 367 68 194 m 204 371 q 270 167 204 241 q 446 92 335 92 q 619 165 559 92 q 679 374 679 238 q 619 585 679 511 q 446 658 559 658 q 269 581 334 658 q 204 371 204 505 z "},p:{ha:887,x_min:119,x_max:819,
o:"m 252 106 l 252 -345 l 119 -345 l 119 750 l 252 750 l 252 621 l 254 621 q 512 768 342 768 q 738 667 656 768 q 819 397 819 566 q 727 96 819 210 q 477 -18 634 -18 q 254 106 333 -18 l 252 106 m 251 309 q 310 155 251 218 q 458 92 369 92 q 623 174 564 92 q 683 399 683 255 q 627 589 683 520 q 475 658 572 658 q 314 588 377 658 q 251 409 251 518 l 251 309 z "},q:{ha:888,x_min:68,x_max:770,o:"m 770 -345 l 637 -345 l 637 126 l 634 126 q 380 -18 555 -18 q 154 82 239 -18 q 68 357 68 182 q 162 656 68 544 q 413 768 256 768 q 634 648 565 768 l 637 648 l 637 750 l 770 750 l 770 -345 m 637 444 q 580 595 637 532 q 431 658 523 658 q 264 579 325 658 q 204 361 204 500 q 262 163 204 235 q 414 92 320 92 q 577 163 517 92 q 637 340 637 234 l 637 444 z "},r:{ha:530,x_min:119,x_max:521,o:"m 521 618 q 429 642 488 642 q 302 570 352 642 q 252 380 252 498 l 252 0 l 119 0 l 119 750 l 252 750 l 252 597 l 254 597 q 451 763 311 763 q 521 753 496 763 l 521 618 z "},s:{ha:643,x_min:77,x_max:583,o:"m 77 162 q 293 90 177 90 q 448 191 448 90 q 414 263 448 235 q 277 330 380 291 q 115 429 152 380 q 77 548 77 478 q 162 708 77 648 q 370 768 246 768 q 547 734 465 768 l 547 606 q 357 661 463 661 q 253 633 293 661 q 213 559 213 605 q 242 490 213 515 q 370 425 271 465 q 539 328 495 378 q 583 204 583 278 q 499 42 583 101 q 280 -18 414 -18 q 77 26 163 -18 l 77 162 z "},t:{ha:517,x_min:31,x_max:479,o:"m 479 7 q 361 -16 435 -16 q 160 207 160 -16 l 160 640 l 31 640 l 31 750 l 160 750 l 160 930 l 292 972 l 292 750 l 479 750 l 479 640 l 292 640 l 292 231 q 317 125 292 157 q 401 93 342 93 q 479 118 446 93 l 479 7 z "},u:{ha:856,x_min:104,x_max:738,o:"m 738 0 l 604 0 l 604 118 l 602 118 q 370 -18 526 -18 q 104 301 104 -18 l 104 750 l 235 750 l 235 321 q 410 92 235 92 q 551 156 497 92 q 604 318 604 220 l 604 750 l 738 750 l 738 0 z "},v:{ha:729,x_min:9,x_max:723,o:"m 723 750 l 426 0 l 292 0 l 9 750 l 155 750 l 338 214 q 364 106 360 150 l 368 106 q 391 212 374 163 l 583 750 l 723 750 z "},w:{ha:1097,x_min:17,x_max:1080,o:"m 1080 750 l 856 0 l 718 0 l 568 526 q 556 598 559 560 l 553 598 q 538 528 551 570 l 376 0 l 242 0 l 17 750 l 155 750 l 305 194 q 315 125 312 169 l 321 125 q 334 196 323 163 l 495 750 l 618 750 l 775 193 q 786 124 782 169 l 792 124 q 804 193 793 154 l 951 750 l 1080 750 z "},x:{ha:704,x_min:18,x_max:686,o:"m 686 750 l 435 372 l 683 0 l 528 0 l 385 239 q 353 297 374 258 l 350 297 q 316 239 349 293 l 170 0 l 18 0 l 273 368 l 29 750 l 184 750 l 324 499 q 355 439 337 476 l 358 439 l 541 750 l 686 750 z "},y:{ha:735,x_min:9,x_max:729,o:"m 729 750 l 389 -113 q 121 -353 294 -353 q 36 -342 71 -353 l 36 -226 q 111 -241 75 -241 q 245 -135 201 -241 l 303 1 l 9 750 l 156 750 l 352 186 l 368 125 l 372 125 q 388 185 376 146 l 593 750 l 729 750 z "},z:{ha:683,x_min:24,x_max:649,o:"m 646 0 l 24 0 l 24 44 l 460 640 l 64 640 l 64 750 l 649 750 l 649 707 l 216 110 l 646 110 l 646 0 z "},"{":{ha:464,x_min:68,x_max:416,o:"m 416 -239 q 182 -7 182 -237 l 182 208 q 68 361 182 355 l 68 451 q 182 607 182 458 l 182 816 q 416 1050 182 1048 l 416 951 q 300 809 300 949 l 300 601 q 190 408 300 444 l 190 405 q 300 214 300 372 l 300 9 q 327 -108 300 -75 q 416 -142 355 -141 l 416 -239 z "},"|":{ha:374,x_min:130,x_max:246,o:"m 246 -353 l 130 -353 l 130 1147 l 246 1147 l 246 -353 z "},"}":{ha:464,x_min:50,x_max:397,o:"m 397 361 q 283 208 283 355 l 283 -7 q 50 -239 283 -237 l 50 -142 q 139 -107 111 -141 q 167 9 167 -73 l 167 214 q 277 405 167 372 l 277 408 q 167 601 167 444 l 167 809 q 50 951 167 948 l 50 1050 q 283 816 283 1048 l 283 607 q 397 451 283 458 l 397 361 z "},"~":{ha:1030,x_min:152,x_max:880,o:"m 880 551 q 819 380 873 440 q 671 319 764 319 q 478 398 591 319 q 362 446 406 446 q 257 319 261 446 l 152 319 q 213 490 157 430 q 361 551 269 551 q 533 487 437 551 q 676 422 629 422 q 747 458 721 422 q 775 551 774 493 l 880 551 z "},"\u6807":{ha:1389,x_min:16,x_max:1382,o:"m 16 306 q 222 791 167 538 l 26 791 l 26 884 l 232 884 l 232 1149 l 327 1149 l 327 884 l 511 884 l 511 791 l 327 791 l 327 551 l 385 612 q 538 469 472 538 l 467 394 q 327 543 401 468 l 327 -173 l 232 -173 l 232 562 q 61 186 160 328 q 16 306 42 245 m 510 672 l 1356 672 l 1356 577 l 982 577 l 982 10 q 826 -159 982 -159 q 646 -158 753 -161 q 627 -45 639 -109 q 798 -56 720 -56 q 879 44 879 -56 l 879 577 l 510 577 l 510 672 m 572 1069 l 1294 1069 l 1294 975 l 572 975 l 572 1069 m 1072 402 l 1168 448 q 1382 16 1297 201 l 1274 -32 q 1072 402 1185 178 m 636 448 l 738 408 q 517 -33 627 159 q 418 14 475 -9 q 636 448 526 189 z "},"\u79bb":{ha:1389,x_min:43,x_max:1345,o:"m 517 100 q 842 113 674 105 q 770 191 806 152 l 838 243 q 1038 32 944 138 l 966 -31 q 914 31 940 0 q 532 9 741 22 q 404 -6 472 5 l 366 90 q 463 178 423 125 q 526 277 494 222 l 229 277 l 229 -178 l 127 -178 l 127 367 l 575 367 q 633 489 604 423 l 179 489 l 179 882 l 278 882 l 278 576 l 1109 576 l 1109 884 l 1208 884 l 1208 440 l 1109 440 l 1109 489 l 753 489 q 688 367 721 426 l 1259 367 l 1259 -26 q 1123 -172 1259 -172 q 981 -169 1058 -172 q 962 -64 975 -121 q 1099 -73 1042 -73 q 1157 -12 1157 -73 l 1157 277 l 635 277 q 517 100 577 182 m 43 1027 l 633 1027 q 579 1118 605 1078 l 684 1166 q 768 1027 718 1116 l 1345 1027 l 1345 935 l 43 935 l 43 1027 m 350 843 l 387 915 q 715 803 543 865 q 977 922 854 859 l 1017 852 q 828 762 926 805 q 1036 684 929 725 l 1000 607 q 722 717 854 667 q 376 596 557 651 q 327 673 351 640 q 602 760 471 713 q 350 843 469 807 z "},"\u7f51":{ha:1389,x_min:115,x_max:1271,o:"m 233 790 l 313 832 q 474 570 394 704 q 587 852 540 712 l 680 819 q 532 472 612 636 q 686 200 610 339 l 594 151 q 478 367 538 258 q 298 71 395 210 l 217 118 l 217 -165 l 115 -165 l 115 1075 l 1271 1075 l 1271 -13 q 1115 -158 1271 -158 q 907 -155 1028 -158 q 888 -50 901 -112 q 1082 -59 1002 -59 q 1169 16 1169 -59 l 1169 977 l 217 977 l 217 124 q 422 467 334 296 q 233 790 332 627 m 685 725 l 764 771 q 904 538 831 661 q 1036 844 982 694 l 1128 809 q 961 440 1052 616 q 1138 130 1046 294 l 1047 78 q 906 338 979 207 q 727 52 822 188 l 644 105 q 850 437 761 274 q 685 725 771 580 z "},"\u8ddd":{ha:1389,x_min:15,x_max:1367,o:"m 648 1075 l 1351 1075 l 1351 977 l 751 977 l 751 722 l 1283 722 l 1283 215 l 1183 215 l 1183 267 l 751 267 l 751 -28 l 1367 -28 l 1367 -125 l 648 -125 l 648 1075 m 15 -7 l 92 5 l 92 538 l 180 538 l 180 20 q 312 44 246 31 l 312 677 l 203 677 l 203 633 l 114 633 l 114 1082 l 530 1082 l 530 677 l 403 677 l 403 439 l 562 439 l 562 353 l 403 353 l 403 62 q 571 97 486 79 q 576 -2 572 39 q 47 -112 264 -59 l 15 -7 m 1183 627 l 751 627 l 751 361 l 1183 361 l 1183 627 m 439 756 l 439 1003 l 203 1003 l 203 756 l 439 756 z "},"\u8f74":{ha:1389,x_min:18,x_max:1302,o:"m 602 885 l 903 885 l 903 1140 l 1001 1140 l 1001 885 l 1302 885 l 1302 -170 l 1202 -170 l 1202 -83 l 703 -83 l 703 -170 l 602 -170 l 602 885 m 153 546 l 297 546 l 297 786 l 395 786 l 395 546 l 521 546 l 521 454 l 395 454 l 395 217 q 540 237 465 227 q 530 140 533 184 q 395 123 465 133 l 395 -182 l 297 -182 l 297 111 q 28 73 170 94 l 18 174 q 297 205 150 187 l 297 454 l 53 454 l 53 546 q 167 855 117 711 l 34 855 l 34 947 l 198 947 q 263 1160 235 1061 l 366 1139 q 302 947 336 1044 l 540 947 l 540 855 l 270 855 q 153 546 215 702 m 1001 12 l 1202 12 l 1202 359 l 1001 359 l 1001 12 m 703 12 l 903 12 l 903 359 l 703 359 l 703 12 m 1202 790 l 1001 790 l 1001 451 l 1202 451 l 1202 790 m 703 451 l 903 451 l 903 790 l 703 790 l 703 451 z "},"\u9ad8":{ha:1389,x_min:27,x_max:1362,o:"m 259 851 l 1139 851 l 1139 520 l 1036 520 l 1036 564 l 362 564 l 362 522 l 259 522 l 259 851 m 210 -170 l 107 -170 l 107 466 l 1293 466 l 1293 5 q 1135 -162 1293 -162 q 937 -159 1047 -162 q 916 -52 929 -113 q 1107 -62 1040 -62 q 1190 21 1190 -62 l 1190 379 l 210 379 l 210 -170 m 393 290 l 1006 290 l 1006 6 l 491 6 l 491 -52 l 393 -52 l 393 290 m 27 1030 l 648 1030 q 591 1132 618 1088 l 693 1173 q 768 1030 732 1105 l 1362 1030 l 1362 941 l 27 941 l 27 1030 m 1036 767 l 362 767 l 362 648 l 1036 648 l 1036 767 m 909 90 l 909 205 l 491 205 l 491 90 l 909 90 z "}},familyName:"Microsoft YaHei",ascender:1470,descender:-363,underlinePosition:-121,underlineThickness:81,boundingBox:{yMin:-355,xMin:-220,yMax:1439,xMax:1763},resolution:1e3,original_font_information:{format:0,copyright:"\xa9 2006 Microsoft Corporation. All rights reserved.",fontFamily:"Microsoft YaHei",fontSubfamily:"Regular",uniqueID:"Microsoft YaHei-Regular",fullName:"Microsoft YaHei",version:"Version 5.00",postScriptName:"MicrosoftYaHei",trademark:"Microsoft YaHei is either a registered trademark or a trademark of Microsoft Corporation in the United States and/or other countries.",manufacturer:"Microsoft Corporation",designer:"Founder",description:"Microsoft YaHei is a Simplified Chinese font developed by taking advantage of ClearType technology, and it provides excellent reading experience particularly onscreen. The font is very legible at small sizes.",manufacturerURL:"http://www.microsoft.com/typography",designerURL:"http://www.founder.com.cn/cn",licence:"\r\nNOTIFICATION OF LICENSE AGREEMENT \r\n\r\nYou may use this font to display and print content as permitted by the license terms for the product in which this font is included. You may only (i) embed this font in content as permitted by the embedding restrictions included in this font; and (ii) temporarily download this font to a printer or other output device to help print content.",licenceURL:"http://www.microsoft.com/typography/fonts"},cssFontWeight:"normal",cssFontStyle:"normal"};e.getMicroYaHeiFont=function(){function o(){}function r(t){e.logger.error("FontLoad error!",t),s=!0}function n(){(new THREE.FontLoader).loadFromVar(t,function(t){i=t,e.logger.log("font load over!")},o,r)}var i=null,a=!1,s=!1;return function(){return null!=i||a||(n(),a=!0),!1===s&&i}}()}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function e(e){this.bytes4node=36,this.length=e.length,this.capacity=e.capacity,this.raw=e.raw,this.stride=e.stride,this.sstride=e.sstride,this.Fn=e.Fn,this.In=e.In,this.Sn=e.Sn,e=null}return e.prototype.setLeftLeaf=function(e,t){this.In[e*this.stride+6]=t},e.prototype.getLeftLeaf=function(e){return this.In[e*this.stride+6]},e.prototype.setFragStart=function(e,t){this.In[e*this.stride+8]=t},e.prototype.getFragStart=function(e){return this.In[e*this.stride+8]},e.prototype.setFragCount=function(e,t){this.Sn[e*this.sstride+14]=t},e.prototype.getFragCount=function(e){return this.Sn[e*this.sstride+14]},e.prototype.setFlags=function(e,t,o,r){this.Sn[e*this.sstride+15]=r<<3|o<<2|3&t},e.prototype.getFlags=function(e){return this.Sn[e*this.sstride+15]},e.prototype.setBox=function(e,t){var o=e*this.stride,r=this.Fn;t instanceof Float32Array?(r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3],r[o+4]=t[4],r[o+5]=t[5]):(r[o]=t.min.x,r[o+1]=t.min.y,r[o+2]=t.min.z,r[o+3]=t.max.x,r[o+4]=t.max.y,r[o+5]=t.max.z)},e.prototype.getBox=function(e,t){var o=e*this.stride,r=this.Fn;t.min.x=r[o],t.min.y=r[o+1],t.min.z=r[o+2],t.max.x=r[o+3],t.max.y=r[o+4],t.max.z=r[o+5]},e.prototype.makeEmpty=function(e){var t=e*this.stride,o=this.In;o[t+6]=-1,o[t+7]=0,o[t+8]=-1},e.prototype.realloc=function(e){if(this.length+e>this.capacity){var t=0|3*this.capacity/2;t<this.length+e&&(t=this.length+e);var o=new ArrayBuffer(t*this.bytes4node),r=new Int32Array(o);r.set(this.In),this.capacity=t,this.raw=o,this.Fn=new Float32Array(o),this.In=r,this.Sn=new Uint16Array(o)}},e.prototype.nextNodes=function(e){this.realloc(e);var t=this.length;this.length+=e;for(var o=0;o<e;++o)this.makeEmpty(t+o);return t},e.prototype.getRaw=function(){return this.raw.slice(0,this.length*this.bytes4node)},e}();e.BVHNode=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function t(t,o,r,n){this.overMaterial=new THREE.MeshPhongMaterial({color:8292240,wireframe:!0}),this.LIMIT=.00125,this.getProjectArea=function(){function t(e,t){n=e.max,i=e.min,a.copy(n).project(t),h.copy(i).project(t),s.set(n.x,i.y,n.z).project(t),l.set(i.x,i.y,n.z).project(t),c.set(i.x,n.y,n.z).project(t),u.set(n.x,n.y,i.z).project(t),d.set(n.x,i.y,i.z).project(t),p.set(i.x,n.y,i.z).project(t)}function o(e,t,o,r){return Math.abs(v.set(e.x-t.x,e.y-t.y).dot(g.set(e.x-r.x,e.y-r.y)))}function r(){for(var e=0,t=0;t<f.length;++t){var r=f[t];e+=o(m[r[0]],m[r[1]],m[r[2]],m[r[3]])}return e}var n,i,a=new e.Vector3,s=new e.Vector3,l=new e.Vector3,c=new e.Vector3,u=new e.Vector3,d=new e.Vector3,h=new e.Vector3,p=new e.Vector3,m=[a,s,l,c,u,d,h,p],f=[[0,1,2,3],[2,3,6,7],[1,2,5,6],[0,1,4,5],[0,2,7,3],[2,5,6,7]],v=new e.Vector2,g=new e.Vector2;return function(e,o){return t(e,o),r()}}(),this.frags=t,this.orders=o,this.begin=r,this.end=n,this.count=n-r,this.classType=8455969,this.sortObjects=!1,this.sortDone=!1,this.renderImmediate=!0,this.isRenderScene=!0,this.autoUpdate=!1,this.overrideMaterial=null}return t.prototype.raycast=function(e,t,o){},t.prototype.foreach=function(t,o,r,n){for(var i,a,s,l=this.orders,c=this.frags,u=e.clipBox,d=this.begin,h=this.end;d<h;++d)i=l[d],0!==(s=c.getState(i))&&1!==s&&4!==s&&(this.frags.getBoundingBox(i),o.intersectsBox(c.getBoundingBox(i))&&u.intersectsBox(c.getBoundingBox(i))&&(a=c.getMesh(i),void 0!==a.geometry&&t(a,i)))},t}();e.RenderBatch=t;var o=function(){function o(o,r,n){function i(t){var o=new e.Box3,r=9*t,n=s.Fn;return o.min.x=n[r],o.min.y=n[r+1],o.min.z=n[r+2],o.max.x=n[r+3],o.max.y=n[r+4],o.max.z=n[r+5],o}for(var a=n,s=(a.getCount(),o),l=r,c=0,u=s.length,d=new Array(u),h=0;h<u;++h){var p=function(e){return s.In[9*e+8]}(h),m=p+function(e){return s.Sn[18*e+14]}(h);i(h);d[h]=new t(a,l,p,m)}this.reset=function(){c=0},this.next=function(e){if(a.hasLoadedComplete()||c!==d.length||(c=0),c===d.length)return null;for(;;){if(++c===d.length)return null;if(e.intersectsBox(i(c)))return d[c]}},this.done=function(){return c===d.length},this.getCount=function(){return d.length},this.needClear=function(){return 0===c}}return o}();e.BVHIterator=o;var r=function(){function o(o){function r(e,t){var o=i.getBoundingBox(e),r=i.getBoundingBox(t);return n(o)-n(r)}function n(e){return(e.max.x-e.min.x)*(e.max.y-e.min.y)*(e.max.z-e.min.z)}this.frags=null,this.orders=null,this.geomScenes=[],this.bbox=new THREE.Box3;var i=o,a=i.getCount(),s=0,l=new Int32Array(a);this.orders=l,this.frags=i;for(var c=0;c<a;++c)l[c]=c;l.sort(r);for(var u=l.length-1,c=0,d=l.length;c<d;++c){var h=l[c];if(1==i.getMaterial(h).transparent){for(;i.getMaterial(l[u])&&!0===i.getMaterial(l[u]).transparent&&u-- >c;);u>c&&(l[c]=l[u],l[u]=h)}}var p=200;e.isMobile()&&(p=111),this.fragsPerScene=p;for(var m=0|(a+p-1)/p,c=0;c<m;++c){var f=c*p,v=f+p;v>a&&(v=a),this.geomScenes.push(new t(i,l,f,v))}e.inCallBack.add("setVertexCount",{fn:this.setGeomScenes,target:this,arguments:[]}),this.reset=function(){s=0},this.next=function(e){return i.hasLoadedComplete()||s!==this.geomScenes.length||(s=0),s===this.geomScenes.length?null:this.geomScenes[s++]},this.raycast=function(e,t,o){for(var r=0,n=this.geomScenes;r<n.length;r++){n[r].raycast(e,t,o)}},this.done=function(){return i.hasLoadedComplete()&&s===this.geomScenes.length},this.getCount=function(){return this.geomScenes.length},this.needClear=function(){return 0===s}}return o.prototype.getRenderBach=function(o,r,n){for(var i=o,a=0,s=null,l=o;l<r&&(i++,!(2===this.frags.getState(this.orders[l])&&(s=this.frags.getMesh(this.orders[l]),s&&s.geometry&&(a+=s.geometry.index.count,this.bbox.union(this.frags.getBoundingBox(this.orders[l]))),a>=512*n&&i-o>20)));++l);return e.logger.log(o,i,a,r,n),{renderBatch:new t(this.frags,this.orders,o,i),lastIndex:i}},o.prototype.setGeomScenes=function(){this.geomScenes.length=0;for(var e=0,t=this.frags.getCount();e<t;){var o=this.getRenderBach(e,t,this.fragsPerScene);this.geomScenes.push(o.renderBatch),e=o.lastIndex}this.reset()},o.prototype.getBox=function(){return this.bbox},o.prototype.setVertexsPerScene=function(e){this.fragsPerScene=e},o.prototype.getVertexsPerScene=function(){return this.fragsPerScene},o}();e.LinearIterator=r;var n;!function(e){e[e.RED=1]="RED",e[e.BLUE=2]="BLUE",e[e.GREEN=3]="GREEN",e[e.YELLOW=4]="YELLOW",e[e.OPICATY=5]="OPICATY",e[e.CUSTOM=6]="CUSTOM"}(n=e.HMATERIAL||(e.HMATERIAL={})),e.materialFactory=function(){function t(t,r){var i=null,a=0;if(t>6)return e.logger.error("Color Error! The colorType's value must be 0 ~ 6."),i;switch(t){case n.RED:a=16711680;break;case n.BLUE:a=255;break;case n.GREEN:a=65280;break;case n.YELLOW:a=16776960;break;case n.CUSTOM:e.isNumber(r)?a=r:e.logger.error("\u81ea\u5b9a\u4e49\u989c\u8272\u6a21\u5f0f\u9700\u8f93\u5165\u989c\u8272\u6570\u503c\uff0c\u989c\u8272\u6570\u503c\u4e3aRGB\u4e09\u901a\u9053\u503c\uff0c\u6bd4\u5982\u8bf4\u7ea2\u8272\u4e3a0xff0000")}return i=o.get(a),i||(i=new THREE.MeshBasicMaterial({color:a,transparent:!0,opacity:.5}),o.set(a,i)),i}var o=new Map;return{getMaterial:t}}();var i=function(){function t(t,o){this.highLightArray=[],this.highLightRevseArray=[],this.highSet=new Set,this.highRevseSet=new Set,this.currentHLIndex=0,this.currentHRLIndex=0,this.fragSet=null,this.camera=null,this.renderHighLightMesh=function(){var t=null,o=null,r=null;return function(n,i){r=this.highLightArray[n],t=this.fragSet.getMesh(r.fid),t.modelViewMatrix.multiplyMatrices(this.camera.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.neonUpdata(t),o=e.materialFactory.getMaterial(r.color,r.colorValue),i.renderBufferDirect(this.camera,null,t.geometry,o,t,null)}}(),this.fragSet=t,this.camera=o;var r=function(){function e(e){return(e.max.x-e.min.x)*(e.max.y-e.min.y)*(e.max.z-e.min.z)}var o=new THREE.Box3,r=new THREE.Box3;return function(n,i){return o=t.getBoundingBox(n.fid),r=t.getBoundingBox(i.fid),e(o)-e(r)}}();this.sort=r}return t.prototype.push=function(t,o,r){if(!this.highSet.has(t)){if(e.taskApis.isEnable()&&e.taskApis.taskUuids.has(this.fragSet.uuids[this.fragSet.frag2idx[t]]))return;o=void 0===o?n.BLUE:o,this.highLightArray.push({fid:t,color:o,colorValue:r}),this.fragSet.setState(t,4),this.highSet.add(t),o!==n.OPICATY&&e._selector.add(this.fragSet.uuids[this.fragSet.frag2idx[t]])}},t.prototype.filterHighLight=function(){var e=this;e.highLightRevseArray.length=0,e.currentHRLIndex=0,e.highSet.forEach(function(t){e.highRevseSet.delete(t)}),e.highRevseSet.forEach(function(t){e.highLightRevseArray.push(t)})},t.prototype.reset=function(){this.currentHLIndex=0,this.highLightArray.sort(this.sort)},t.prototype.clear=function(){this.highLightArray.length=0,this.currentHLIndex=0,this.highSet.clear()},t.prototype.reverse=function(){this.highLightRevseArray.length=0,this.currentHRLIndex=0,this.highRevseSet.clear();for(var e=0;e<this.highLightArray.length;++e)this.highRevseSet.has(this.highLightArray[e].fid)||this.highLightArray[e].color===n.OPICATY||(this.highLightRevseArray.push(this.highLightArray[e].fid),this.fragSet.setState(this.highLightArray[e].fid,2),this.highRevseSet.add(this.highLightArray[e].fid));this.clear()},t.prototype.render=function(e,t){for(var o=performance.now(),r=0,n=e;;){if(this.currentHRLIndex>=this.highLightRevseArray.length)break;if(this.renderHighLightRevese(this.currentHRLIndex++,t),r=performance.now(),(n-=r-o)<0)break;o=r}for(;;){if(this.currentHLIndex>=this.highLightArray.length)break;if(this.renderHighLightMesh(this.currentHLIndex++,t),r=performance.now(),(e-=r-o)<0)break;o=r}},t.prototype.dispose=function(){this.highLightArray.length=0,this.highLightRevseArray.length=0},t.prototype.pop=function(){return this.highLightArray.pop().fid},t.prototype.index=function(e){if(e<this.highLightArray.length)return this.highLightArray[e].fid},t.prototype.getFragIds=function(){var e=[];return this.highLightArray.map(function(t){e.push(t.fid)}),e},t.prototype.splice=function(e){for(var t=0,o=this.length();t<o;++t)if(this.highLightArray[t].fid===e){this.highLightArray.splice(t,1);break}},t.prototype.length=function(){return this.highLightArray.length},t.prototype.renderHighLightRevese=function(e,t){var o=this.fragSet.getMesh(this.highLightRevseArray[e]);o.modelViewMatrix.multiplyMatrices(this.camera.matrixWorldInverse,o.matrixWorld),o.normalMatrix.getNormalMatrix(o.modelViewMatrix),t.neonUpdata(o),t.renderBufferDirect(this.camera,null,o.geometry,o.material,o,null)},t}();e.HighLightIterator=i}(Neon||(Neon={}));var Neon;!function(e){var t;!function(e){e[e.MOVEFORWARD=0]="MOVEFORWARD",e[e.MOVEBACK=1]="MOVEBACK",e[e.MOVELEFT=2]="MOVELEFT",e[e.MOVERIGHT=3]="MOVERIGHT",e[e.UP=4]="UP",e[e.DOWN=5]="DOWN"}(t=e.MOVESTATE||(e.MOVESTATE={}));var o=function(){function t(t,o,r,n){this._flag=!0;var i=this;void 0!=t&&(i._startPoint=(new e.Vector3).copy(t),i._currentPos=(new e.Vector3).copy(t)),void 0!=o&&(i._endPoint=(new e.Vector3).copy(o)),void 0!=r&&e.isNumber(r)&&(i._velocity=r),void 0!=n&&e.isNumber(n)?i._accelerated=n:n=0}return t.prototype.setStartPoint=function(t){this._startPoint=(new e.Vector3).copy(t),this._currentPos=(new e.Vector3).copy(t),e.logger.debug(this._startPoint,this._currentPos)},t.prototype.setEndPoint=function(t){this._endPoint=(new e.Vector3).copy(t),e.logger.debug(this._endPoint)},t.prototype.setVelocity=function(e){this._velocity=e},t.prototype.setAccelerated=function(e){this._accelerated=e},t.prototype.swapPint=function(t,o){var r=(new e.Vector3).copy(t);t.copy(o),o.copy(r)},t.prototype.run=function(t){var o=new e.Vector3;return void 0==this._direction?(o.copy(this._endPoint).sub(this._startPoint).normalize(),this._direction=(new e.Vector3).copy(o)):o.copy(this._direction),this._currentPos.add(o.multiplyScalar(this._velocity*t)),this._currentPos.distanceTo(this._startPoint)>=this._endPoint.distanceTo(this._startPoint)&&(this.swapPint(this._startPoint,this._endPoint),this._currentPos.copy(this._startPoint),this._direction=(new e.Vector3).copy(this._endPoint).sub(this._startPoint).normalize(),1==this._flag?this._flag=!1:this._flag=!0),1==this._flag?this._currentPos.z-this._startPoint.z:this._currentPos.z-this._endPoint.z},t.prototype.getPos=function(){return this._currentPos},t.prototype.getHeightDifferce=function(){},t.prototype.setFlag=function(t){this._flag=t,this._direction=(new e.Vector3).copy(this._endPoint).sub(this._startPoint).normalize()},t}();e.Formula=o;var r=function(){function t(e){this._object=void 0,this._heigth=0;var t=this;void 0!=e&&(t._object=e)}return t.prototype.run=function(t){void 0!=this._transform_formula&&(this._object.position.z=this._heigth+this._transform_formula.run(t),e.enableUp=!0)},t.prototype.setTransformFormula=function(e){this._transform_formula=e},t.prototype.setRotationFormula=function(e){},t.prototype.setScaleFormula=function(e){},t.prototype.setHeight=function(e){this._heigth=e},t}();e.ObjectAnimate=r;var n=function(){function e(){function e(e,t,o,h,p){if(c){r=t.zoom;var m=!1,f=!1,v=!1;if(1==i&&u.phi<d.phi||0==i&&u.phi>d.phi?m=!0:0==a&&u.theta>d.theta||1==a&&u.theta<d.theta?f=!0:(1==s&&r<n||0==s&&r>n)&&(v=!0),!m&&!f&&!v)return c=!1,void p.reset();l&&(1==i&&m?(u.phi+=e,u.phi>d.phi&&(u.phi=d.phi)):0==i&&m&&(u.phi-=e,u.phi<d.phi&&(u.phi=d.phi))),l&&(1==a&&f?(u.theta+=e,u.theta>d.theta&&(u.theta=d.theta)):0==a&&f&&(u.theta-=e,u.theta<d.theta&&(u.theta=d.theta))),void 0!==s&&(1==s&&v?(r+=2)>n&&(r=n):0==s&&v&&(r-=2)<n&&(r=n)),h.update(u.phi,u.theta),t.zoom=r,t.updateMatrixWorld(),t.updateProjectionMatrix(),o.reset()}}function t(e,t,o,h){c=!0,d.phi=e,d.theta=t,n=o,r=h.zoom,d.phi>u.phi?i=!0:d.phi<u.phi&&(i=!1),d.theta>u.theta?a=!0:d.theta<u.theta&&(a=!1),n>r?s=!0:n<r&&(s=!1),l=!0,d==u&&r==n&&(c=!1),d==u&&(l=!1)}function o(e){c=e}var r,n,i,a,s,l,c=!1,u=new THREE.Spherical,d=new THREE.Spherical;this.setAnimateFlag=o,this.setAnimateParas=t,this.animateRotate=e,this.getSpherical=function(){return u}}return e}();e.Animate=n;var i=function(){function o(){var o,r=0,n=!1,i=0,a=0,s=Math.sin,l=Math.cos;this.getMove=function(){var t=e.cons.getControls().WanderControl;o=t.getMoveState(),r=t.getYaw(),n=t.getKeyDown()},this.animate=function(c,u,d){var h=c.position,p=e.blendMesh.position,m=performance.now(),f=(m-i)/1e3;this.getMove(),a-=10*a*f,e.logger.debug("speed",a);for(var v=0,g=e._objectAnimate.length;v<g;++v)e._objectAnimate[v].run(f);if(1==n&&(a+=e.params.speed*f*f),!(a>=.01))return 1==e.params.blendLoad&&e.blendMesh.play("idle",1),void(i=m);u.reset(),1==e.params.blendLoad&&(e.blendMesh.update(.03),e.blendMesh.play("run",a),e.blendMesh.play("idle",1-a)),0==e.params.persion?(o==t.MOVEFORWARD?h.add(new e.Vector3(-a*s(r),a*l(r))):o==t.MOVEBACK?h.add(new e.Vector3(a*s(r),-a*l(r))):o==t.MOVELEFT?h.add(new e.Vector3(-a*l(r),-a*s(r))):o==t.MOVERIGHT?h.add(new e.Vector3(a*l(r),a*s(r))):o==t.UP?e.params.initHeight+=a:o==t.DOWN&&(e.params.initHeight-=a),h.z=e.params.initHeight+e.params.height*e.meter2foot):(o==t.MOVEFORWARD?p.add(new e.Vector3(-a*s(r),a*l(r))):o==t.MOVEBACK?p.add(new e.Vector3(a*s(r),-a*l(r))):o==t.MOVELEFT?p.add(new e.Vector3(-a*l(r),-a*s(r))):o==t.MOVERIGHT?p.add(new e.Vector3(a*l(r),a*s(r))):o==t.UP?e.params.initHeight+=a:o==t.DOWN&&(e.params.initHeight-=a),p.z=e.params.initHeight,h.copy(p).add(new e.Vector3(2*Math.sin(r),-2*Math.cos(r),e.params.height*e.meter2foot))),i=m,c.updateMatrix(),c.updateMatrixWorld()}}return o}();e.MoveAnimate=i,e._moveAnimate=new i,e._objectAnimate=[];var a=function(t){function o(o,r,n,i,a){var s=t.call(this,o,r)||this;return s.maxScale=0,s.minScale=0,s.__s=new e.Vector3,s.__e=new e.Vector3,s.p1=new e.Vector2,s.p2=new e.Vector2,s.p3=new e.Vector2,s.p4=new e.Vector2,s.adaptionMethod=n||s.adaptionFromCamera,s.maxScale=i||100,s.minScale=a||0,s.maxVec=new e.Vector3,s.minVec=new e.Vector3,s}return __extends(o,t),o.prototype.adaptionFromCamera=function(t){var o=4/t.zoom;this.prep||(this.prep=this.position.clone()),o>3&&(o=3),this.scale.set(o,o,o),this.__s.copy(this.axis.startPoint).project(t),this.__e.copy(this.axis.endPoint).project(t);var r=(this.__s.y-this.__e.y)/(this.__s.x-this.__e.x);if(r!==1/0&&r!==-1/0){var n=this.__s.y-r*this.__s.x;this.p1.set(-1,-r+n),this.p2.set(1,r+n),this.p3.set((-1-n)/r,-1),this.p4.set((1-n)/r,1)}else{var i=this.__s.x;this.p1.set(-1,-r+i),this.p2.set(1,r+i),this.p3.set(i,-1),this.p4.set(i,1)}var a,s,l=0;this.pointInLine(this.p1)&&(a=this.p1,l++),this.pointInLine(this.p2)&&(a?s=this.p2:a=this.p2,l++),this.pointInLine(this.p3)&&(a?s=this.p3:a=this.p3,l++),this.pointInLine(this.p4)&&(a?s=this.p4:a=this.p4,l++),a&&s?(this.__s.set(a.x,a.y,this.prep.z).add(this.__e.set(s.x,s.y,this.prep.z)).multiplyScalar(.5).unproject(t),this.position.copy(this.__s),e.enableUp=!0):this.position.copy(this.prep)},o.prototype.pointInLine=function(e){return(e.x>=this.__s.x&&e.x<=this.__e.x&&e.y>=this.__s.y&&e.y<=this.__e.y||e.x>=this.__e.x&&e.x<=this.__s.x&&e.y>=this.__e.y&&e.y<=this.__s.y||e.x>=this.__s.x&&e.x<=this.__e.x&&e.y>=this.__e.y&&e.y<=this.__s.y||e.x>=this.__e.x&&e.x<=this.__s.x&&e.y>=this.__s.y&&e.y<=this.__e.y)&&e.x>=-1&&e.x<=1&&e.y>=-1&&e.y<=1},o}(THREE.Mesh);e.SelfAdaptionObject=a}(Neon||(Neon={}));var Neon;!function(e){function t(e,t){return e.max.x>=t.max.x&&e.max.y>=t.max.y&&e.max.z>=t.max.z&&e.min.x<=t.min.x&&e.min.y<=t.min.y&&e.min.z<=t.min.z}function o(e,t){for(var o=0,r=t.length;o<r;++o)if(e==t[o])return!0;return!1}function r(e,t,o){for(var n=0;n<t.length;++n){var i=o.slice(),a=t[n];1==a.isChecked&&(i+=a.title,void 0==a.children||0==a.children.length?e.add(i):r(e,a.children,i))}}function n(e){var t=[];return e.map(function(e){if(0!=e.length){for(var o="",r=0;r<e.length;++r)" "!=e[r]&&(o+=e[r]);t.push(o)}}),t}function i(e,t){Math.abs;return t.max.x<=e.max.x&&t.min.x>=e.min.x&&t.max.y<=e.max.y&&t.min.y>=e.min.y}e.insectBox=t,e.isInArray=o,e.getNames=r,e.filterSpace=n,e.inBoxLinking=i;var a=function(){function e(e){return this.instance=null,this.instance||(this.instance=new e)}return e}();e.Single=a;var s={calcVolume:function(){var t=new Map,o=0;return function(r){return t.has(r)?t.get(r):(o=e.coreModel[0].getFragmentSet().calcVolume(r),t.set(r,o),o)}}(),calcLength:function(){function t(t){var o=e.coreModel[0].getFragmentSet(),r=o.getBoundingBoxFromUuid(t),n=r.max.x-r.min.x,i=r.max.y-r.min.y,a=r.max.z-r.min.z;return n>i?n>a?n:a:i>a?i:a}var o=new Map,r=0;return function(e){return o.has(e)?o.get(e):(r=t(e),o.set(e,r),r)}}(),calcArea:function(){function t(t){var i=e.coreModel[0].getFragmentSet(),a=i.uuid2fragid.get(t),d=0;return a&&a.map(function(t){var a=i.getMesh(t);if(a&&a.geometry&&a.matrix){var h=a.geometry,p=a.matrix;if(h.attributes&&h.attributes.position)for(var m=h.attributes.position.array,f=h.index,v=(new e.Vector3,0),g=f.count;v<g;v+=3)o=f.getX(v),r=f.getX(v+1),n=f.getX(v+2),s.set(m[8*o]/e.meter2foot,m[8*o+1]/e.meter2foot,m[8*o+2]/e.meter2foot).applyMatrix4(p),l.set(m[8*r]/e.meter2foot,m[8*r+1]/e.meter2foot,m[8*r+2]/e.meter2foot).applyMatrix4(p),c.set(m[8*n]/e.meter2foot,m[8*n+1]/e.meter2foot,m[8*n+2]/e.meter2foot).applyMatrix4(p),d+=u(s.sub(l).dot(c.sub(l)))}}),d}var o,r,n,i=new Map,a=0,s=new e.Vector3,l=new e.Vector3,c=new e.Vector3,u=Math.abs;return function(e){return i.has(e)?i.get(e):(a=t(e),i.set(e,a),a)}}(),calcSurfaceArea:function(){function t(t){var o=e.coreModel[0].getFragmentSet(),r=o.getBoundingBoxFromUuid(t);return r?(r.max.x-r.min.x)*(r.max.y-r.min.y):null}var o=new Map,r=0;return function(e){return o.has(e)?o.get(e):(r=t(e),o.set(e,r),r)}}(),calcWallArea:function(){function t(t){var o=e.coreModel[0].getFragmentSet(),r=o.getBoundingBoxFromUuid(t);if(!r)return 0;var n=o.getAttributeUUID(t);return parseFloat(n.length)/1e3*(r.max.z-r.min.z)}var o=new Map,r=0;return function(e){return o.has(e)?o.get(e):(r=t(e),o.set(e,r),r)}}(),calcFloorsArea:function(){function t(e){var t=new THREE.Mesh(new THREE.PlaneGeometry(e.max.x-e.min.x,e.max.y-e.min.y),new THREE.MeshBasicMaterial({color:255}));return t.position.set(e.getCenter().x,e.getCenter().y,-100),t}function r(r){if(0===i.size)for(var n=0;n<r.getCount();++n){var l=r.getAttribute(n),c=l.workSet.split("-")[0];if(o(c,a)){var u=i.get(c),d=r.getBoundingBox(n);u||(u=[]),s(u,new e.Box2(new e.Vector2(d.min.x,d.min.y),new e.Vector2(d.max.x,d.max.y))),i.set(c,u)}}var h=0;return i.forEach(function(o,r){for(var n=0;n<o.length;++n)h+=(o[n].max.x-o[n].min.x)*(o[n].max.y-o[n].min.y),"\u9601\u697c"===r&&e.coreModel[0].getOverlayScene().add(t(o[n]))}),console.log(i),h}function n(e,t){return e.x<t.max.x&&e.x>t.min.x&&e.y>t.min.y&&e.y<t.max.y}var i=new Map,a=["\u5730\u4e0b\u5ba4","\u4e00\u5c42","\u4e8c\u5c42"],s=function(){function t(c,u,d,h){if(o.set(u.min.x,u.min.y),r.set(u.max.x,u.min.y),i.set(u.max.x,u.max.y),a.set(u.min.x,u.max.y),l.length=0,n(o,c)&&l.push(o),n(r,c)&&l.push(r),n(i,c)&&l.push(i),n(a,c)&&l.push(a),1===l.length){var p=l[0];return s.set(c.min.x,c.min.y),n(s,c)||d.push((new e.Box2).setFromPoints([s,p])),s.set(c.max.x,c.min.y),n(s,c)||d.push((new e.Box2).setFromPoints([s,p])),s.set(c.max.x,c.max.y),n(s,c)||d.push((new e.Box2).setFromPoints([s,p])),s.set(c.min.x,c.max.y),n(s,c)||d.push((new e.Box2).setFromPoints([s,p])),u}if(2===l.length){var m=l[0],f=l[1];if(m.x===f.x)return c.max.x>c.max.x?(new e.Box2).setFromPoints([m.set(c.max.x,m.y),r,i]):(new e.Box2).setFromPoints([m.set(c.min.x,m.y),o,a]);if(m.y===f.y)return c.max.y>c.max.y?(new e.Box2).setFromPoints([m.set(m.x,c.max.y),i,a]):(new e.Box2).setFromPoints([m.set(m.x,c.min.y),o,r])}else{if(4===l.length)return h?(d.push(c),null):c;if(0===l.length)return h?t(u,c,d,!1):(d.push(u),c)}}var o=new e.Vector2,r=new e.Vector2,i=new e.Vector2,a=new e.Vector2,s=new e.Vector2,l=[];return function(e,n){var s=e.slice();e.length=0,o.set(n.min.x,n.min.y),r.set(n.max.x,n.min.y),i.set(n.max.x,n.max.y),a.set(n.min.x,n.max.y);for(var l=0,c=s.length;l<c;++l)if(null===(n=t(s[l],n,e,!0)))return;e.push(n)}}();return function(){return r(e.coreModel[0].getFragmentSet())}}()};e.assemblyRateStrategis={majorStructure:{vertical:function(){function t(t,i){var a=i.getAttributeUUID(t);if(""!==a.comments){var l=a.comments.split("-");3===l.length&&"\u4e3b\u4f53\u7ed3\u6784"===l[0]&&l[1].indexOf("\u7ad6\u5411")>=0&&l[1].indexOf("\u975e\u7ad6\u5411")<0&&("\u9884\u5236"===l[2]?o+=s.calcVolume(t)/(e.meter2foot*e.meter2foot*e.meter2foot):"\u9ad8\u7cbe\u5ea6\u6a21\u677f\u65bd\u5de5\u5de5\u827a"===l[2]&&(n+=s.calcVolume(t)/(e.meter2foot*e.meter2foot*e.meter2foot)),
r+=s.calcVolume(t)/(e.meter2foot*e.meter2foot*e.meter2foot))}}var o=0,r=0,n=0;return function(){var i=e.coreModel[0].getFragmentSet(),a=i.uuids;o=0,n=0,r=0;for(var s=0,l=a.length;s<l;++s){t(a[s],i)}return 0===r?(e.logger.warn("\u4e3b\u4f53\u7ed3\u6784-\u7ad6\u5411\u6784\u4ef6\u7684\u603b\u4f53\u79ef\u4e3a0"),0):(console.log(o/r,n/r,o,r),o/r+n/r)}}(),nonVertical:function(){function t(t,r){var n=r.getAttributeUUID(t);if(""!==n.comments){var i=n.comments.split("-");3===i.length&&"\u4e3b\u4f53\u7ed3\u6784"===i[0]&&i[1].indexOf("\u975e\u7ad6\u5411")>=0&&"\u9884\u5236"===i[2]&&(o+=s.calcSurfaceArea(t)/(e.meter2foot*e.meter2foot))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===(r=3107.16)?(e.logger.warn("\u4e3b\u4f53\u7ed3\u6784-\u975e\u7ad6\u5411\u6784\u4ef6\u7684\u603b\u4f53\u6295\u5f71\u9762\u79ef\u4e3a0"),0):(console.log("areas",r,o,o/r),o/r)}}()},wall:{retainingWall:{preRate:function(){function t(t,n){var i=n.getAttributeUUID(t),a=i.comments;if(""!=a){var l=a.split("-");"\u56f4\u62a4\u5899"===l[0]&&("\u9884\u5236"===l[1]&&(o+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot)),r+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===r?(e.logger.warn("\u56f4\u62a4\u5899\u7684\u603b\u4f53\u5916\u8868\u9762\u79ef\u4e3a0"),0):o/r}}(),integration:function(){function t(t,n){var i=n.getAttributeUUID(t),a=i.comments;if(""!=a){var l=a.split("-");"\u56f4\u62a4\u5899"===l[0]&&("\u9884\u5236"===l[1]&&"\u4fdd\u6e29\u3001\u9694\u70ed\u3001\u88c5\u9970"===l[2]&&(o+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot)),r+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===r?(e.logger.warn("\u56f4\u62a4\u5899\u7684\u603b\u4f53\u5916\u8868\u9762\u79ef\u4e3a0"),0):o/r}}()},brickWall:{preRate:function(){function t(t,n){var i=n.getAttributeUUID(t),a=i.comments;if(""!=a){var l=a.split("-");"\u5185\u9694\u5899"===l[0]&&("\u9884\u5236"===l[1]&&(o+=2*s.calcWallArea(t)/(e.meter2foot*e.meter2foot)),r+=2*s.calcWallArea(t)/(e.meter2foot*e.meter2foot))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===r?(e.logger.warn("\u56f4\u62a4\u5899\u7684\u603b\u4f53\u5899\u9762\u9762\u79ef\u4e3a0"),0):o/r}}(),integration:function(){function t(t,n){var i=n.getAttributeUUID(t),a=i.comments;if(""!=a){var l=a.split("-");"\u5185\u9694\u5899"===l[0]&&("\u9884\u5236"===l[1]&&"\u7ba1\u7ebf\u3001\u88c5\u4fee"===l[2]&&(o+=2*s.calcWallArea(t)/(e.meter2foot*e.meter2foot)),r+=2*s.calcWallArea(t)/(e.meter2foot*e.meter2foot))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===r?(e.logger.warn("\u56f4\u62a4\u5899\u7684\u603b\u4f53\u5899\u9762\u9762\u79ef\u4e3a0"),0):o/r}}()}},fitUp:{board:function(){function t(t,r){var n=r.getAttributeUUID(t),i=n.comments;if(""!=i){var a=i.split("-");"\u697c\u9762"!==a[0]&&"\u5730\u9762"!==a[0]||"\u5e72\u5f0f"===a[1]&&(o+=s.calcSurfaceArea(t)/(e.meter2foot*e.meter2foot))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===(r=3107.16)?(e.logger.warn("\u5899\u9762\u548c\u5730\u9762\u7684\u603b\u4f53\u6295\u5f71\u9762\u79ef\u4e3a0"),0):(console.log("areas",r,o,o/r),o/r)}}(),bathroom:function(){function t(t,n){var i=n.getAttributeUUID(t),a=i.comments;if(""!=a){var l=a.split("-");"\u536b\u751f\u95f4"===l[0]&&("\u697c\u9762"===l[1]||"\u5730\u9762"===l[1]?("\u5e72\u5f0f"===l[2]&&(o+=s.calcSurfaceArea(t)/(e.meter2foot*e.meter2foot)),r+=s.calcSurfaceArea(t)/(e.meter2foot*e.meter2foot)):"\u5899\u9762"===l[1]&&("\u5e72\u5f0f"===l[2]&&(o+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot)),r+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot)))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===r?(e.logger.warn("\u536b\u751f\u95f4\u7684\u603b\u4f53\u5899\u9762\u3001\u5730\u9762\u3001\u697c\u9762\u9762\u79ef\u4e3a0"),0):o/r}}(),kitchen:function(){function t(t,n){var i=n.getAttributeUUID(t),a=i.comments;if(""!=a){var l=a.split("-");"\u53a8\u623f"===l[0]&&("\u697c\u9762"===l[1]||"\u5730\u9762"===l[1]?("\u5e72\u5f0f"===l[2]&&(o+=s.calcSurfaceArea(t)/(e.meter2foot*e.meter2foot)),r+=s.calcSurfaceArea(t)/(e.meter2foot*e.meter2foot)):"\u5899\u9762"===l[1]&&("\u5e72\u5f0f"===l[2]&&(o+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot)),r+=s.calcWallArea(t)/(e.meter2foot*e.meter2foot)))}}var o=0,r=0;return function(){var n=e.coreModel[0].getFragmentSet(),i=n.uuids;o=0,r=0;for(var a=0,s=i.length;a<s;++a){t(i[a],n)}return 0===r?(e.logger.warn("\u53a8\u623f\u7684\u603b\u4f53\u5899\u9762\u3001\u5730\u9762\u3001\u697c\u9762\u9762\u79ef\u4e3a0"),0):o/r}}()}},e.getProjectArea=function(){function t(e,t){n=e.max,i=e.min,a.copy(n).project(t),h.copy(i).project(t),s.set(n.x,i.y,n.z).project(t),l.set(i.x,i.y,n.z).project(t),c.set(i.x,n.y,n.z).project(t),u.set(n.x,n.y,i.z).project(t),d.set(n.x,i.y,i.z).project(t),p.set(i.x,n.y,i.z).project(t)}function o(e,t,o,r){return Math.abs(v.set(e.x-t.x,e.y-t.y).dot(g.set(e.x-r.x,e.y-r.y)))}function r(){for(var e=0,t=0;t<f.length;++t){var r=f[t];e+=o(m[r[0]],m[r[1]],m[r[2]],m[r[3]])}return e}var n,i,a=new e.Vector3,s=new e.Vector3,l=new e.Vector3,c=new e.Vector3,u=new e.Vector3,d=new e.Vector3,h=new e.Vector3,p=new e.Vector3,m=[a,s,l,c,u,d,h,p],f=[[0,1,2,3],[2,3,6,7],[1,2,5,6],[0,1,4,5],[0,2,7,3],[2,5,6,7]],v=new e.Vector2,g=new e.Vector2;return function(e,o){return t(e,o),r()}}()}(Neon||(Neon={}));var Neon;!function(e){function t(t){e.controlArray.push({name:t.name,control:t})}var o=function(){function t(){var t,o,r,n,i,a,s,l,c,u,d,h;this.setNavModels=function(){function p(e,o){var r=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAN4SURBVHhe7ZuhTitBFIbPvQqHIMEgEBUEA1g0CkGw7QOUpAgUFoWluqEvAAIEAQuy1JCABAeCBBICPAF3/8kZaHPbS+92/9kd9nzJZGcm3W3y9fR098z010eCGDR+69EgYYLJmGAyJpiMCSZjgsmYYDImmIwJJmOCyZhgMiaYjAkmY4LJmGAyJpiMCSZjgsmYYDImmExQwc/Pz9orD8EEQ+7GxoaOykMQwV7uycmJzpQHuuAyywVUwWWXC6iCp6enZWFhQUclBVun2Ozs7GB7lmtpub29/Xh6etJRPAQRDLzktKyvr7sWm+Rgm/8eHh5kdnYWhnVmdJrNpmxvb7t+o9GQSqXi+qPy/v4uu7u7Ouqn3W5LvV7XEQEIDsH9/X2qCL68vHTnMdvb25u+W/YEe9BIy/z8vCTpRUccrq6utJc9UaQIcHZ2Jmtra5J8E3QmHY+Pj7K8vNx3nYmJCXfHwyAaweOe78nqOqNS+BQROyaYjAkmY4LJmGAyJpiMCSZjgsmYYDImmEymgm9ubrRneDITfHFxIUtLS+5ofJGZ4KOjI3dcWVmRzc1N6Xa7blx6UE0bl+vra5SmBraDgwNXbE9bcPeMe74nq+uMSiYRfHx8rL2/qdVqrjy4tbXlxqXL0yp6bLDsgpXf09PTvlXkYc1H9qjEGsHUd4JwiGw0Gn1yexs+DKSY7zDB3+Dz9DDZWJI/Pz8fugAZq+BclozQ73Q6Lj8PIol6WV1dlcnJSZ0Rubu7k7m5OUk+BJ1JB7Zz4X39daampmRxcdH1KUBwCIZFDqJ2WFQjvSCi0RDhg16TRWMu2+cu2IMUMkz0v3J4Fg0fMovCrSrjNm5/f19arZbOfLG3t6e9bJmZmZFqtaqjjIHgEPzvj8ugiE4EU7/ODAor2IOvb2/+RR/XioXCC/a02+1PyWjYsxYD0QgGeHDpjWbcZRSdqAR7eqMZT4JFJkrBoHdba5ElRysYYLe7TxlFlRy1YI+v3hVR8o8QDPCDV0TJP0YwQC26aJKDC8aRiS+L4qmvCATfF/H6+qo9Dig9JpLdv5IODw91Nj+CC355edEeDy8Zdd/c1wA1kukgNYTOjT5d5PnnxWCC86qC+apcXgSrB5eV4Dm4bJhgMiaYjAkmY4LJmGAyJpiMCSZjgsmYYDImmIwJJmOCyZhgMiaYjAmmIvIHamDOJ4L5oOIAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANwSURBVHhe7ZoxT/pAGMaP/8hiiImDAw4Mjn4RElc2NhN246YxuPIJ9APoaiRszDq6OiKJCUy6uWGf5i458xcU7p6Wts8vedP2aI/ez5e3V9vaIsEIGv/sUpCQYDISTEaCyUgwGQkmI8FkJJiMBJORYDISTEaCyUgwGQkmQxE8HA7N3d2d3ao2FMHtdjtd3tzcpMsqQysRnU7HTKdTc3FxYT4+PmxrPuT5/dQa3O/302W32zWvr6/petbk/gfGIyM25+fneCy1eHx8tC3ZMB6P0++dTCa2JXsyEQyc5MFgYFv4PD8/V0cwuL29TQd8fHy8eHl5sa08ILZSgoH72SKur68X7+/v9hMOpROMn+VvA0L2IotdNjNrc6kEr1PzkLmuLiN6vR5FRKkEb3LV9ksGAhfBmEJKJRgD2WRAs9nsWzbHFF0qwRAVMiDUYlebfdEoPZtSKsEgxoDcdM4P1GiUk3VnHTHOJ4StFAwgEtM4X7ILlJO/ZjX2l+AVoC+UCV+wH/gMpWVZZmMfCV4BygX6g8CHh4f/arQfKCPYx79LRLsEL2HZvBrty8qHHy7zIT0vydFfwK7VaiYZjGk2m7Zlc/AvzoODg5X9PT09mdFoZK6urmzLapIsN61WyxweHpp6vW52d3dNo9Gwn5oo5/2NVHNE0GXMbFmnP5fZq8rIqkDGx6ZUgn1wjLtL/KvwmOftKK1gh3+8k44sxwXRiUUwshdUSvBPuFv0mOfsU/n3IvDcMJllxL+4WSovGLjXDBhIMBnKPDi5dTX7+/u2JYzf5sG/EXNevgkUwbEpsmCVCDKUDE6mPmZnZ8e2hHF6eqoS4RN7QKH9qUSUHAkmI8FkJJiMBJMphODPz0+7VjwKIfjs7MzM53O7VSwKIfj+/t6cnJwUUnJhajAkX15e2q31eHt7s2s5gDu5mKDLmG+voz8Enqvh3bd1cceHvN8WAkXwpjJ+IrQ/JzgvyRTBoVJ8QvvxBSOylkwTjIghOfR4/3wQWQve+ovc3t6eXQsnkWuOjo7sVkZY0dFAl4iYdTgEdz66yJHIUy6ILnib5II85YLoTzRwtxWzbhad6ILFdwpzq1xUJJiMBJORYDISTEaCyUgwGQkmI8FkJJiMBJORYDISTEaCyUgwGQkmI8FkJJiMBJORYDISTEaCyUgwFWO+AIAxxqgCcXoBAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQaSURBVHhe7ZyxLzRPGMef+/0BNEKCkCA6QSMi0dAR0foDkNBSaChoFNQS9CdRCdHRKCip5BISJCSECAU6734ns7KRu/fuvdvv7P12nk+ymWeHO3xudnZmnlmZ7wBRaPxnS4WECiajgsmoYDIqmIwKJqOCyahgMiqYjAomo4LJqGAyKpiMCiajgsmoYDIqmIwKLsD6+rqNKkMF52FpaUlqamrsWWWkTvDb25vs7OzI2dmZrfk3IPf5+VmmpqZsTYUg6emax8fH72w2a8o42dzcRALXHEdHR7a2dPA74bW3t7e2pnKcC15cXPyREOcfAsL3Lee98YHgdeV8MH9D++CAu7s7GR4elpmZGRkaGrK18eBccG1trY2qh9XVVVMuLCyYMk4SbcGtra2SyWRiO8rh4OBANjY2ZG1tTVpaWmxtfDjf2YPx5fz8vIlPT0+lsbHRxHGADywk6IOLCnt6epKGhgYTl/L9ZWF6YocELaXsG1Exwvct9b3D3wUli9Te5Iq1RtzYwitpbGzMlAy8HUXs7u6aEiOHzs5OEzPwUjBme2HrHRkZMSULLwWfnJzYSKitF3gp+PDw0EYqOHbQPWDcC4JpuymZeCf45ubGRiJ9fX024uGd4MvLSxuJ1NXV2YhHagWjK8jH/f29jSTWWWQhvBMcDs8AZWr8C++6CNc4FYzpaXQM6hr8/BDM4FzgTDAuWax27e3t2Zpklyvb29ttxMXpcuXFxYX09PTYM5FsNisDAwP2rDK+vr5kf3//p4/Nt/x4fHxsMhcA679zc3MmpmLW1Bxyfn5ulgiRYGSQy+W+g8s/73JlmHfDgQSpCxLJKse9DlwqUcFxJzcLkcgowsXwqFrwaph2fX1tI3d4Jfj9/d1G7vBKcBKoYDIqmI0dTcROON6t1sPVMI06k/s9cwPIIkxOTtozt2xvb8vKyoqJA8Gx70PLi9FMJNqSsbMySaKbXlIz0eju7jZrDmi5y8vLttYfnNzkJiYmvJQLdBRBRgWTUcFkVDAZFUwmlYKxcx0JThyY7CBVhCOJ5cr/1T8HReIUx+vrq7y8vMjHx4fkcjnzNWSrownVYriayVWd4DC1fnV1ZVoiduKg5YUb9vIxPj4ug4OD5vHXMFvc0dFhSjzVFD7ZhA8H02UkRlMlOLofATw8PJjWF22B0R03hUAmuKmpSerr638ElpN+Qrfx+fkp/f39toaHE8FbW1syPT1tz0oDMnt7e6W5udk8CVSNz9eVgrMuYnZ2tuBljkt8dHRUurq6pK2tzbTQtOBMMLqJ6HNs2LqE5yOwRzdNQn/j9CaHoRJuXLi5pFlqFKeCfURncmRUMBkVTEYFk1HBZFQwGRVMRgWTUcFkVDAZFUxGBZNRwWRUMBkVTEYFk1HBZFQwGRVMReQPYnL6M8+mhQAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQpSURBVHhe7Zy/LzRBGMefeysURKOk00pUFCoSkUgoqVQktBQa/4CcRlRqCa0QKhqJE4mgFc1dRyRIFLp79zvvM7Hu3bN7a5+dubvnk0xuZvZ++ZibfWbvmStUA0gR4w/fKkKoYGFUsDAqWBgVLIwKFkYFC6OChVHBwqhgYVSwMCpYGBUsjAoWRgULo4KFUcHCOBd8dXXFtWzA852fn3PLPc4Fv7y80OzsbGaiT05OaHx8nLa2tuj9/Z17HYLv5FyzvLyM7wWrxWKx+vb2xr2NUy6XzfPYMjMzUy2VSnzUDV7Mwevr6+Z2bW2NFhYW6OHhwbQb5fLykmtfdHZ2cs0RLNo5+/v730bf3d0dH0kGRn748RsbG3zELd4IrhWE8vT0xEfjCf+DUPcFbwSD2lF8dnbGR34m/M/xSS7wKg4eHh7mWmOcnp6a20Auzc3NmXpS7u/vuSYEi/YGnPnxtlCSRBQ2ckgzcu0nRnLUeycY0wL+6KQnOYR2aU5oVq4tUpIzzU17fn6mz89PbqXn9fWVent7uVWfx8dH2t7eps3NTero6ODeeBDOzc/Pc+uLQHLDU0wsRnNG4Kwf/og3Y8l6JGeeXYlRfH19TYODg2ZU9ff385H2RNNXhWmby5X4ZLm4yua1YEjJCpx8cZUtyyt3SchF8MrKSqoLODs7O0ZIlqIPDw9pdHTUvCfxRUZALnNwoVAwt7u7uzQ5OWnqcdSGUkFcTENDQ9z6zvHxMY2NjVFPTw/3/E+lUqGBgQFuEQXRjnk/fX193CMEBEuDl/lt+Sl8svcJhJmVXRTha8W4/pwXuQjGasv+cUmxKzqUo6Mj7o2mNvaOkhwWjPeTF00RRXR1dXEtGkwPFkwlPsXeLRem1ZunXdE2cbArVLAwKliY3AUjHk1SslxcuCR3wQj2k5So67XNSO6Cg9AwUQniYH5Ec6NzsDAqWBgVLIwKFkYFC6OChcldcNSiIqroQiMlUYuKqKILjZRELSqiii40PMW3qaXlBGeRG5clLSfYN1pC8MXFBdf8oyUEI5kEFIvFH3MjXNASgpFAUi6XaXV1VQVLsLi4GPtVvauv8tvmJJd2c+Nv8Vbw7e0t1+ITTxD7HhwcmPRUW5BBaZfdSPLb29vjexN1d3dzTZ5ckv+QIWlPRLUvhw3bNzc33PoHhIWXyphf4z7ikIjM+qWlJe6pT6lUopGREW4JA8HS4GVsiQI7ipC4F75fuDS6QRx5bfX2iqA/T7wQbIFIbMkK3z/tppSo50JpdA/0b8lVcNK0UfvzBlls6A6P5LzlglzmYPw4xsTEROLEPJyg8EMd09PT3JMeJGd/fHzQ1NSUkxhZdxkJ0zZxsCtUsDAqWBgVLIwKFkYFC6OChVHBwqhgYVSwMCpYGBUsjAoWRgULo4KFUcHCqGBhVLAoRH8BltYTArFMfvYAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAACkUlEQVR4nO3bMY8pURjG8bM3t9LoFAoKhY5ohF5PyReQSHS0FLTzCfgAo9CptbRaOgoJUUgk2rneuXFjl917s/c8zpzx/JLZjbUxJ/89Tuwc3rwLRTA/TA8g7BgYjIHBGBiMgcEYGIyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBXjLwcDhU+/3+OSfzXozruvI2Ba9cLnu73Q5+vpcKPJlM/LjXo9FowM/5Jl90PBM2m42Oh4HZbreqWCze/bzT6aher4c7sa6/1GKxeDc7bDoukXVluKN1iZDI0+nUW6/XWtY3x3H+RJDHtdFPnc+GbDar8+FC4SVfpj0TA4MxMBgDgzEwGAODMTAYA4MxMJjW/+SQxuOxOp/PKpPJqEQiYXo4/8yaGZzL5dRyuVTJZFJVKhU1Go3UarUyPay/siZwKpVSrVbLjxyPx1WtVlPpdDr4sU1fbfrKV1fT5LbsSqiby45yWy6qH49HQyO+Z21gISFvf+f2GAwG/mVT06xZIh6JRqP+sjGfz9Vl9r67r16v++u1bHCaZHXgq0KhoC4z1t/++UhCd7tdA6P6LRSBRSwW8/fWXNe9u6/f7xubyaEJfFWtVh9GlplsYmM2dIHFZ5Fns9nTxxLKwEIif1yTT6fT08cR2sBC1uTbyPl8/uljsOZaxHc1m03/++FwMLLrHfrA11cXpoR6iQgCBgZjYDAGBmNgMAYGY2AwBgZjYDAGBgt04Ha7bXoI/y3QgcOAgcEYGIyBwRgYzIrA8qaSSCRiehjfEugdDcdxVKlUsvoDjto+DE6PWbFE2IyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBGBjsFx3Py0BYdS8rAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIKSURBVHhe7du/riFRAIDxYx9CSalUU6olaoXWA2nEE5CovIAH0Gl1FBI6jejudeTIvbvZ7M2a+WRO8v2SiTkj8eczYTJz1D7ugjC/0q0gBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmBc9k8vl8liOx2O4Xq+h1+ulewqKgct0Op0+BoNB/NCyXubzeXpHxSB78Pl8DuPxOKxWq7Tly/2Fh263m0avi3tap9NJoxD2+31aK0+j0UhrBTwyA/62J5e1V0T3oL89dlWhr+x75DLjRrkExn/k4tfFZrMJ/X4/bSnH4XAIzWYzjR6F01q1ZHsUkUtgj4NhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZg2NsCLxaLUKvVSlu+X/CssrdeVY6Rh8NhGn15ZbbPnzN7KntxPAZ+pzgBJT7tc3l1Qooze/7hGbnIbB9n9vxgu92GdrudRv/PiSc/KBI3Jx6mwQwMMzDMwDADwwwMMzDMwDADw7INfLvd0lq1ZRl4vV6HVquVRtWWXeDdbhcmk0kaVV+2f+OKZ+Nms1mYTqePcVXfRraBn+Jpy+VyGUajUajX62lrdWQfuOo8TIMZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgVAif0gGFG+Cm370AAAAASUVORK5CYII="],n=o.width/2*.75,i=(new THREE.CubeTextureLoader).load(r);i.format=THREE.RGBFormat,i.minFilter=THREE.LinearFilter;for(var a,s,l,c=4*n/10,u=new THREE.CubeGeometry(n/5,n/5,n/5),d=(new THREE.MeshLambertMaterial({color:11974326,emissive:11974326}),0);d<8;++d){var h=new THREE.Mesh(u,new THREE.MeshLambertMaterial({color:11974326,emissive:11974326}));h.name="cube"+String(d),a=d>=4?-1:1,s=d>=4?d>=6?-1:1:d>=2?-1:1,l=d%2==1?-1:1,h.position.set(a*c,s*c,l*c),e.add(h)}for(var d=0;d<12;++d){var p=new THREE.Mesh(u,new THREE.MeshLambertMaterial({color:11974326,emissive:11974326}));p.name="cuboid"+String(d);d<4?(p.scale.set(3,1,1),a=0,s=d>=2?-1:1,l=d%2==1?-1:1):d>=4&&d<8?(p.scale.set(1,3,1),s=0,a=d>=6?-1:1,l=d%2==1?-1:1):d>=8&&(p.scale.set(1,1,3),l=0,a=d>=10?-1:1,s=d%2==1?-1:1),p.position.set(a*c,s*c,l*c),e.add(p)}for(var d=0;d<6;++d){var m=new THREE.MeshLambertMaterial({color:11974326,emissive:11974326});m.envMap=i;var f=new THREE.Mesh(u,m);f.name="block"+String(d);d<2?(f.scale.set(3,1,3),a=0,l=0,s=d%2==1?-1:1):d>=2&&d<4?(f.scale.set(3,3,1),s=0,a=0,l=d%2==1?-1:1):d>=4&&(f.scale.set(1,3,3),s=0,l=0,a=d%2==1?-1:1),f.position.set(a*c,s*c,l*c),f.material,e.add(f)}var v=new THREE.Geometry,g=new THREE.LineDashedMaterial({color:7368816}),x=n/2;v.vertices.push(new THREE.Vector3(-x,x,x),new THREE.Vector3(x,x,x),new THREE.Vector3(x,-x,x),new THREE.Vector3(-x,-x,x),new THREE.Vector3(-x,x,x),new THREE.Vector3(-x,x,-x),new THREE.Vector3(x,x,-x),new THREE.Vector3(x,x,x),new THREE.Vector3(x,x,-x),new THREE.Vector3(x,-x,-x),new THREE.Vector3(x,-x,x),new THREE.Vector3(x,-x,-x),new THREE.Vector3(-x,-x,-x),new THREE.Vector3(-x,x,-x),new THREE.Vector3(-x,-x,-x),new THREE.Vector3(-x,-x,x)),t=new THREE.Line(v,g),t.name="line",e.add(t)}function m(e,t){var u=Math.PI,d=t.width/2,h=[new THREE.Vector3(-d/8,-d,0),new THREE.Vector3(d/8,-d,0),new THREE.Vector3(0,7*-d/8,0)],p=[new THREE.Face3(0,1,2)],m=new THREE.Geometry;m.vertices=h,m.faces=p;var f=new THREE.MeshBasicMaterial({color:14869218});o=new THREE.Mesh(m,f);var v=new THREE.Geometry,g=new THREE.LineBasicMaterial({color:7368816});v.vertices.push(h[0],h[1],h[2],h[0]),a=new THREE.Line(v,g);var x=7*d/4;r=o.clone(),r.rotateZ(u),r.translateOnAxis(new THREE.Vector3(0,0,1),x),s=a.clone(),s.rotateZ(u),s.translateOnAxis(new THREE.Vector3(0,0,1),x),n=o.clone(),n.rotateZ(-u/2),n.translateOnAxis(new THREE.Vector3(0,0,1),x),l=a.clone(),l.rotateZ(-u/2),l.translateOnAxis(new THREE.Vector3(0,0,1),x),i=o.clone(),i.rotateZ(u/2),i.translateOnAxis(new THREE.Vector3(0,0,1),x),c=a.clone(),c.rotateZ(u/2),c.translateOnAxis(new THREE.Vector3(0,0,1),x)}function f(t,o){var r=o.width/2,n=2*o.width/3/2,i=new THREE.CircleGeometry(r,256),a=new THREE.MeshBasicMaterial({color:13487565});u=new THREE.Mesh(i,a),u.position.set(0,0,-1001);var s=new THREE.CircleGeometry(n,256),l=new THREE.MeshBasicMaterial({color:e.defaultClearColor.getHex()});d=new THREE.Mesh(s,l),d.position.set(0,0,-1e3);new THREE.ConeGeometry(10,20);h=new THREE.ArrowHelper(new e.Vector3(0,1,0),new e.Vector3(0,0,0),o.width/2,10,o.width/6,o.width/6),h.position.set(0,0,-1000.5)}return function(e,t,o){p(e,o),m(e,o),f(e,o)}}(),this.getLineNav=function(){return t},this.getLines=function(){return[s,l,c,a]},this.getMeshs=function(){return[o,r,n,i]},this.getCircles=function(){return[u,d]},this.getArror=function(){return h}}return t}();e.SetMolde=o;var r=function(){function t(t){function r(){var e=x.getLines(),t=x.getMeshs(),o=x.getCircles(),r=x.getArror();s.remove(t[0]),s.remove(t[1]),s.remove(t[2]),s.remove(t[3]),s.remove(e[0]),s.remove(e[1]),s.remove(e[2]),s.remove(e[3]),l.remove(o[0]),l.remove(o[1]),l.remove(r)}function n(){var e=x.getLines(),t=x.getMeshs(),o=x.getCircles(),r=x.getArror();s.add(t[0]),s.add(t[1]),s.add(t[2]),s.add(t[3]),s.add(e[0]),s.add(e[1]),s.add(e[2]),s.add(e[3]),l.add(o[0]),l.add(o[1]),l.add(r)}var i,a,s,l,c,u,d,h,p,m,f,v,g=new THREE.Raycaster,x=new o,y=new e.Animate,A=y.getSpherical();this.handNavMouseDownEvent=function(){return function(e){v=t.getControlor()}}(),this.handNavMouseUpEvent=function(){return function(e){v=t.getControlor()}}(),this.handNavMouseMoveEvent=function(){return function(o){a=t.getNavScene(),c=t.getNavDom(),u=t.getNavCamera(),m=x.getLineNav(),v=t.getControlor();var r=new THREE.Vector2;r.x=o.offsetX/c.offsetWidth*2-1,r.y=-o.offsetY/c.offsetHeight*2+1,g.setFromCamera(r,u),g.ray.origin.set(r.x,r.y,-1e3).unproject(u),a.remove(m);var n=g.intersectObjects(a.children);a.add(m),n.length>0?d!=n[0].object&&(d&&h.emissive.setHex(p),d=n[0].object,h=d.material,p=h.emissive.getHex(),h.emissive.setHex(11192824)):(d&&h.emissive.setHex(p),d=null),e.enableNav=!0}}(),this.handNavMouseClickEvent=function(){function o(){function e(e){e=e>u?e-2*u:e,e=e<-u?e+2*u:e,e>=3*u/4&&e<=u||e>=-u&&e<-3*u/4?p=u:e>=-3*u/4&&e<-u/4?p=-u/2:e>=-u/4&&e<u/4?p=0:e>=u/4&&e<3*u/4&&(p=u/2)}if(A.copy(v.getSpherical()),d){if("block0"===d.name)h=u/2,p=A.theta>0?u:-u;else if("block1"===d.name)h=u/2,p=0;else if("block2"===d.name)h=0,e(v.getSpherical().theta);else if("block3"===d.name)h=u,e(v.getSpherical().theta);else if("block4"===d.name)h=u/2,p=u/2;else if("block5"===d.name)h=u/2,p=-u/2;else if("cube0"===d.name)h=u/4,p=3*u/4,A.theta<0&&(A.theta+=2*u);else if("cube1"===d.name)h=3*u/4,p=3*u/4,A.theta<0&&(A.theta+=2*u);else if("cube2"===d.name)h=u/4,p=u/4;else if("cube3"===d.name)h=3*u/4,p=u/4;else if("cube4"===d.name)h=u/4,p=-3*u/4,A.theta>0&&(A.theta-=2*u);else if("cube5"===d.name)h=3*u/4,p=-3*u/4,A.theta>0&&(A.theta-=2*u);else if("cube6"===d.name)h=u/4,p=-u/4;else if("cube7"===d.name)h=3*u/4,p=-u/4;else if("cuboid0"===d.name)h=u/4,p=A.theta>0?u:-u;else if("cuboid1"===d.name)h=3*u/4,p=A.theta>0?u:-u;else if("cuboid2"===d.name)h=u/4,p=0;else if("cuboid3"===d.name)h=3*u/4,p=0;else if("cuboid4"===d.name)h=u/4,p=u/2;else if("cuboid5"===d.name)h=3*u/4,p=u/2;else if("cuboid6"===d.name)h=u/4,p=-u/2;else if("cuboid7"===d.name)h=3*u/4,p=-u/2;else if("cuboid8"===d.name)A.theta<0&&(A.theta+=2*u),h=u/2,p=3*u/4;else if("cuboid9"===d.name)h=u/2,p=u/4;else if("cuboid10"===d.name)A.theta>0&&(A.theta-=2*u),h=u/2,p=-3*u/4;else{if("cuboid11"!==d.name)return!0;h=u/2,p=-u/4}return y.setAnimateParas(h,p,f.zoom,f),x.getArror().rotation.set(0,0,Math.PI-p),!0}return!1}function r(){if(e.isTriPlan){A.copy(v.getSpherical()),e.logger.debug("spherical",A);var t=c.width/2;if(s>=.75*t/m&&s<=1.25*t/m&&l>=s+.75*t/m&&l>=2.75*t/m-s)h+=u/2,h>u&&(h=u/2,p+=u,p=p>=u?p-2*u:p),e.logger.debug("down");else if(s>=.75*t/m&&s<=1.25*t/m&&l<=s-.75*t/m&&l<=1.25*t/m-s)h-=u/2,h<0&&(h=u/2,p+=u,p=p>u?p-2*u:p),e.logger.debug("up");else if(s>=0&&s<=.25*t/m&&l>=s+.75*t/m&&l<=1.25*t/m-s)Math.abs(A.theta+u)<.001?A.theta=+u:Math.abs(A.theta+3*u/4)<.001&&(A.theta=5*u/4),h=u/2,p-=u/2,p=p<-u?p+2*u:p,e.logger.debug("left");else{if(!(s>=1.75*t/m&&s<=2*t/m&&l>2.75*t/m-s&&l<=s-.75*t/m))return!1;Math.abs(A.theta-u)<.001?A.theta=-u:Math.abs(A.theta-3*u/4)<.001&&(A.theta=-5*u/4),h=u/2,p+=u/2,p=p>u?p-2*u:p,e.logger.debug("right")}return y.setAnimateParas(h,p,f.zoom,f),!0}return!1}function n(){return Math.sqrt((s-c.width/2/m)*(s-c.width/2/m)+(l-c.width/2/m)*(l-c.width/2/m))}function a(){if(e.isCircle){var t=c.width/2,o=c.width/3,r=x.getArror();if(n()>t/m||n()<o/m)return!1;var i=Math.atan(Math.abs(l-65)/Math.abs(s-65)),a=void 0;a=s>=t/m&&l<=t/m?0:s>=t/m&&l>=t/m?1:s<=t/m&&l>=t/m?2:3,h=v.getSpherical().phi;var u=v.getSpherical().theta;return p=Math.abs(h-Math.PI)<.001?g[a]+-1*b[a]*i:g[a]+b[a]*i,Math.abs(u-p)>Math.PI&&(p>=0?p-=2*Math.PI:p+=2*Math.PI),r.rotation.set(0,0,Math.PI-p),e.logger.debug(i),y.setAnimateParas(h,p,f.zoom,f),!0}return!1}var s=0,l=0,u=Math.PI,h=u/2,p=u,m=e.getpixeRatio(),g=[-Math.PI/2,-Math.PI/2,Math.PI/2,Math.PI/2],b=[-1,1,-1,1];return function(n){f=t.getCamera(),v=t.getControlor(),c=t.getNavDom(),i=t.getIterator(),v=t.getControlor(),DEBUG&&console.log(c.width),s=n.offsetX,l=n.offsetY,e.logger.debug(s,l),o()||r()||a()}}(),this.handNavMouseOver=function(){return function(o){s=t.getNavtriScene(),l=t.getNavCircleScene(),e.enableNav=!0,n()}}(),this.handNavMouseOut=function(){return function(o){s=t.getNavtriScene(),l=t.getNavCircleScene(),e.enableNav=!0,r()}}(),this.getAnimate=function(){return y},this.dispose=function(){y=null,x=null,t=null},this.setNavModels=x.setNavModels,this.animateRotate=y.animateRotate}return t}();e.Control=r;var n=function(){function e(){}return e}();e.RenderModelVariable=n;!function(e){e[e.ONETOONE=0]="ONETOONE",e[e.GEOTOGEO=1]="GEOTOGEO",e[e.ONETOMANY=2]="ONETOMANY",e[e.ANGLE=3]="ANGLE"}(e.MEASURE||(e.MEASURE={}));var i=function(t){function o(o){function r(e){var t;return 1==e.ctrlKey&&(t="ctr"),1==e.shiftKey?t+="+shift":1==e.altKey?t+="+alt":1==e.metaKey?t+="meta":t+="+"+e.key.toLowerCase(),t}var i=t.call(this)||this;i.rmVariable=new n,i.enableHotKey=!0,i.controls={},i.hotKeys={},i.hotKeysNeedLP={};var a=i;i.controls={};var s=i.controls;i.InitRenderModelVaiables(o),i.InitControls(s),i.handMouseDown=function(){var e;return function(t){if(0==t.button){1==s.ClickControl.isActive&&s.ClickControl.leftButtonDown(t);for(var o in s)e=s[o],1==e.isActive&&"ClickControl"!=o&&e.leftButtonDown(t)}else if(2==t.button){1==s.ClickControl.isActive&&s.ClickControl.rightButtonDown(t);for(var o in s)e=s[o],1==e.isActive&&"ClickControl"!=o&&e.rightButtonDown(t)}l.addEventListener("mouseup",a.handMouseUp,!1)}}(),i.handMouseMove=function(){var e;return function(t){if(0==t.button)for(var o in s)e=s[o],1==e.isActive&&e.mouseMove(t)}}(),i.handMouseUp=function(){var e;return function(t){if(0==t.button){1==s.ClickControl.isActive&&s.ClickControl.leftButtonUp(t);for(var o in s)e=s[o],1==e.isActive&&"ClickControl"!=o&&e.leftButtonUp(t)}else if(2==t.button){1==s.ClickControl.isActive&&s.ClickControl.rightButtonUp(t);for(var r in s)e=s[r],1==e.isActive&&"ClickControl"!=r&&e.rightButtonUp(t)}l.removeEventListener("mouseup",a.handMouseUp,!1)}}(),i.handMouseClick=function(){var e;return function(t){if(0==t.button){1==s.ClickControl.isActive&&s.ClickControl.leftButtonClick(t);for(var o in s)e=s[o],1==e.isActive&&"ClickControl"!=o&&e.leftButtonClick(t)}}}(),i.handKeyDown=function(){var t,o;return function(n){o=r(n);for(var i in a.hotKeys)o==i&&(1==a.hotKeys[i].isActive?a.hotKeys[i].deActive():a.hotKeys[i].active());for(var i in a.hotKeysNeedLP)o==i&&0==a.hotKeysNeedLP[i].isActive&&a.hotKeysNeedLP[i].active();"ctr+z"==o&&a.backUp();for(var l in s)t=s[l],1==t.isActive&&t.keyDown(n);if("Escape"==n.key){e.logger.debug("esc");for(var c in s)"ClickControl"!=c&&1==s[c].isActive&&"ConstructionSectionControl"!=c&&s[c].deActive();e._selector.pressKey(n)}}}(),i.handKeyUp=function(){var e;return function(t){for(var o in s)e=s[o],1==e.isActive&&e.keyUp(t)}}(),i.backUp=function(){for(var e in s)1==s[e].isActive&&s[e].backUp()},i.handMouseOut=function(e){for(var t in s){var o=s[t];1==o.isActive&&o.mouseOut(e)}a.rmVariable.dom.focus()},i.handMouseOver=function(e){for(var t in s){var o=s[t];1==o.isActive&&o.mouseOver(e)}},i.handTouchStart=function(e){for(var t in s){var o=s[t];1==o.isActive&&o.onTouchStart(e)}},i.handTouchEnd=function(e){for(var t in s){var o=s[t];1==o.isActive&&o.onTouchEnd(e)}},i.handTouchMove=function(e){for(var t in s){var o=s[t];1==o.isActive&&o.onTouchMove(e)}};var l=i.rmVariable.dom;return l.addEventListener("mousedown",i.handMouseDown,!1),l.addEventListener("click",i.handMouseClick,!1),l.addEventListener("dblclick",i.handMouseClick,!1),l.addEventListener("mousemove",a.handMouseMove,!1),l.addEventListener("mouseout",a.handMouseOut,!1),l.addEventListener("mouseover",a.handMouseOver,!1),l.addEventListener("touchstart",a.handTouchStart,!1),l.addEventListener("touchend",a.handTouchEnd,!1),l.addEventListener("touchmove",a.handTouchMove,!1),i.enableHotKey&&(document.addEventListener("keydown",i.handKeyDown,!1),document.addEventListener("keyup",i.handKeyUp,!1)),i.getControls=function(){return s},i.dispose=function(){l.removeEventListener("mousedown",this.handMouseDown,!1),l.removeEventListener("click",this.handMouseClick,!1),l.removeEventListener("dblclick",this.handMouseClick,!1),l.removeEventListener("mousemove",a.handMouseMove,!1),l.removeEventListener("mouseout",a.handMouseOut,!1),l.removeEventListener("mouseover",a.handMouseOver,!1),l.removeEventListener("touchstart",a.handTouchStart,!1),l.removeEventListener("touchend",a.handTouchEnd,!1),l.removeEventListener("touchmove",a.handTouchMove,!1),this.enableHotKey&&(document.removeEventListener("keydown",this.handKeyDown,!1),document.removeEventListener("keyup",this.handKeyUp,!1)),o=null,this.rmVariable=null;for(var e in a.controls)a.controls[e]=null;a.controls={},a.controls=null},i.disableAllControls=function(){e.logger.debug("disableAllControls");for(var t in s)"ConstructionSectionControl"!=t&&1==s[t].isActive&&"ClickControl"!=t&&s[t].deActive()},i.setContrlFromName=function(e,t){1==t&&0==s[e].isActive?s[e].active():0==t&&1==s[e].isActive&&s[e].deActive()},i.setControlFromHotKey=function(e,t){1==t?(this.hotKeys[e].active(),this.hotKeysNeedLP[e].active()):(this.hotKeys[e].deActive(),this.hotKeysNeedLP[e].deActive())},i}return __extends(o,t),o.prototype.InitControls=function(t){for(var o=0;o<e.controlArray.length;++o){var r=new e.controlArray[o].control(this.rmVariable),n=r.getName();t[n]=r,"ClickControl"==n&&r.active(),"a"!=r.getHotKey().hotkey&&(0==r.getHotKey().needLongPress?this.hotKeys[r.getHotKey().hotkey]=r:this.hotKeysNeedLP[r.getHotKey().hotkey]=r)}},o.prototype.InitRenderModelVaiables=function(e){this.rmVariable.fragSet=e.getFragSet(),this.rmVariable.control=e.getControlor(),this.rmVariable.overlayScene=e.getOverlayScene(),this.rmVariable.camera=e.getCamera(),this.rmVariable.navCamera=e.getNavCamera(),this.rmVariable.navTriCamera=e.getNavTriCamera(),this.rmVariable.gl=e.getGL(),this.rmVariable.downGl=e.getDownGL(),this.rmVariable.iterator=e.getIterator(),this.rmVariable.highItertor=e.getHighIterator(),this.rmVariable.navCircleScene=e.getNavCircleScene(),this.rmVariable.homeScene=e.getHomeScene(),this.rmVariable.navScene=e.getNavScene(),this.rmVariable.dom=e.getDom(),this.rmVariable.navDom=e.getNavDom(),this.rmVariable.boundingBox=e.boundingBox,this.rmVariable.scene=e.getScene(),this.rmVariable.setHome=e.setHome,this.rmVariable.setPreCamera=e.setPerCamera,this.rmVariable.setOrthCamera=e.setOrthCamera,this.rmVariable.hubScene=e.getHubScene(),this.rmVariable.reset=e.reset},o}(THREE.EventDispatcher);e.Controls=i,e.controlArray=[],e.PushControl=t;var a=function(){function e(){this.isActive=!1}return e.prototype.active=function(){this.isActive=!0,this.regist()},e.prototype.deActive=function(){this.isActive=!1,this.unRegist()},e.prototype.leftButtonDown=function(e){},e.prototype.rightButtonDown=function(e){},e.prototype.reightButtonDown=function(e){},e.prototype.mouseMove=function(e){},e.prototype.onTouchStart=function(e){},e.prototype.onTouchEnd=function(e){},e.prototype.onTouchMove=function(e){},e.prototype.mouseOut=function(e){},e.prototype.mouseOver=function(e){},e.prototype.keyDown=function(e){},e.prototype.keyUp=function(e){},e.prototype.leftButtonUp=function(e){},e.prototype.rightButtonUp=function(e){},e.prototype.wheel=function(e){},e.prototype.leftButtonClick=function(e){},e.prototype.rightButtonClick=function(e){},e.prototype.getHotKey=function(){return{hotkey:"a",needLongPress:!1}},e.prototype.backUp=function(){},e}();e.BaseControl=a}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function t(){this.dom=document.createElement("div"),this.dom.style.opacity="0.5",this.dom.style.width="150px",this.dom.style.position="absolute",this.dom.style.background="#000000",this.dom.style.zIndex="5",this.top=0,this.dom.style.display="none",e.container.appendChild(this.dom);var t=this;e.container.addEventListener("click",function(){t.hidden()})}return t.prototype.createMenuValue=function(e,t,o){var r=document.createElement("div");r.innerText=e,r.style.top=String(this.top)+"px",r.style.height=t,r.style.textAlign="center",r.style.color="#ffffff",r.style.fontSize="14px",this.top+=parseFloat(t);return r.addEventListener("click",o,!1),r.addEventListener("mouseover",function(){r.style.background="#000078"}),r.addEventListener("mouseout",function(){r.style.background=""}),this.dom.appendChild(r),r},t.prototype.hidden=function(){this.dom.style.display="none"},t.prototype.display=function(e,t){this.dom.style.display="",this.dom.style.left=e+"px",this.dom.style.top=t+"px"},t.prototype.dispose=function(){e.container.removeChild(this.dom)},t}(),o=function(o){function r(r){var n,i,a,s,l,c=o.call(this)||this,u=null,d=new t,h=[];return d.createMenuValue("\u9009\u4e2d\u540c\u7c7b\u522b\u6784\u5efa","20px",function(t){var o=e._selector.get(),n=new Set;o.map(function(e){var t=r.fragSet.getAttributeUUID(e),o=t.categoryName?t.categoryName:t.category;n.add(o)});for(var i=0;i<r.fragSet.getCount();++i)if(2===r.fragSet.getState(i)){var a=r.fragSet.getAttribute(i),s=a.categoryName?a.categoryName:a.category;n.has(s)&&r.highItertor.push(i)}r.highItertor.reset()}),d.createMenuValue("\u51bb\u7ed3","20px",function(e){r.fragSet.setState(r.highItertor.getFragIds(),16),r.highItertor.getFragIds().map(function(e){h.push(e)}),r.highItertor.clear(),r.iterator.reset()}),d.createMenuValue("\u9690\u85cf","20px",function(e){r.fragSet.setState(r.highItertor.getFragIds(),1),r.highItertor.getFragIds().map(function(e){h.push(e)}),r.highItertor.clear(),r.iterator.reset()}),d.createMenuValue("\u8fd8\u539f","20px",function(e){r.fragSet.setState(h,2),h.length=0,r.iterator.reset()}),c.regist=function(){n=new e.Raycaster,i=new e.Vector2,a=new e.Vector2,s=new e.Vector2,l=new e.Vector2,e.logger.debug("click control active")},c.unRegist=function(){n=null,i=null,a=null,s=null,l=null,e.logger.debug("click control deActive")},c.leftButtonDown=function(e){0==e.button&&(i.x=e.offsetX/r.dom.offsetWidth*2-1,i.y=-e.offsetY/r.dom.offsetHeight*2+1)},c.leftButtonUp=function(e){0==e.button&&(a.x=e.offsetX/r.dom.offsetWidth*2-1,a.y=-e.offsetY/r.dom.offsetHeight*2+1)},c.rightButtonDown=function(e){s.x=e.offsetX/r.dom.offsetWidth*2-1,s.y=-e.offsetY/r.dom.offsetHeight*2+1},c.rightButtonUp=function(e){l.x=e.offsetX/r.dom.offsetWidth*2-1,l.y=-e.offsetY/r.dom.offsetHeight*2+1,s.equals(l)&&d.display(e.offsetX,e.offsetY)},c.leftButtonClick=function(){function t(t){if(d.length=0,n.setFromCamera(a,r.camera),1!=t.ctrlKey&&(r.highItertor.reverse(),
e._selector.clear(!0)),s.raycast(n,d),r.highItertor.reset(),d.map(function(t){r.highItertor.push(t,e.HMATERIAL.BLUE)}),d.length>0){var o=0,i=e.coreModel[0].getProperty(o=s.frag2idx[d[d.length-1]],s.uuids[o],!1);if(!i)return;i.isSelected=!0,e.taskApis.setPropers([i],!t.ctrlKey),e.taskApis.runCallBack(),e.tpTestApi.runCallBack()}else e.taskApis.setPropers([],!t.ctrlKey),e.taskApis.runCallBack()}function o(t){if(d.length=0,n.setFromCamera(a,r.camera),r.highItertor.reverse(),e._selector.clear(),s.raycast(n,d),d.map(function(t){r.highItertor.push(t,e.HMATERIAL.BLUE)}),d.length>0){var o=c.getSpherical();c.target.copy(s.getBoundingBox(d[0]).getCenter()),c.update(o.phi,o.theta)}if(d.length>0){var i=0,l=e.coreModel[0].getProperty(i=s.frag2idx[d[d.length-1]],s.uuids[i],!1);if(!l)return;l.isSelected=!0,e.taskApis.setPropers([l],!t.ctrlKey),e.taskApis.runCallBack(),e.tpTestApi.runCallBack()}else e.taskApis.setPropers([],!t.ctrlKey),e.taskApis.runCallBack()}var s=r.fragSet,l=r.camera,c=(r.boundingBox,r.control),d=(r.gl,r.iterator,[]);return function(e){if(l=r.camera,c=r.control,i.x==a.x&&i.y==a.y){switch(e.type){case"click":clearTimeout(u),u=setTimeout(function(){t(e)},250);break;case"dblclick":clearTimeout(u),o(e)}}}}(),c.getName=function(){return"ClickControl"},c}return __extends(r,o),r=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],r)}(e.BaseControl);e.ClickControl=o}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){function r(e,t){o.control.enabled=!1,c.x=e,c.y=t,A=s(c,u),o.overlayScene.add(w)}function n(){if(void 0!=A){d=s(h,u),p=s(new e.Vector2(c.x,h.y),u),m=s(new e.Vector2(h.x,c.y),u),f=l(A,u.ray.direction),v=l(d,u.ray.direction),x=l(m,u.ray.direction),g=l(p,u.ray.direction);var t=new e.Geometry;t.vertices.push(A,p,d,m,A),w.geometry=t,e.enableUp=!0}}function i(t){var r,n,i,a,s,l,u,y=new Set,b=o.fragSet,M=[],S=[],C=new Array;C.push(A,p,d,m,f,g,v,x);var R=c.y>h.y,B=b.getCount();if(!c.equals(h)){t&&1!=t.ctrlKey&&(o.highItertor.reverse(),e._selector.clear(!0));for(var T=0;T<B;++T){r=b.getBoundingBox(T),i=r.min,n=r.max,a=!0;for(var D=0;D<E.length;D+=2)if(s=C[E[D]-1].clone(),s.sub(C[E[D+1]-1]),l=C[E[D]-1].clone(),l.sub(i),u=C[E[D]-1].clone(),u.sub(n),!0===R?s.dot(l)<0&&s.dot(u)<0:s.dot(l)<0||s.dot(u)<0){a=!1;break}if(!0===a&&1!=b.getState(T))if(e.enableFloor&&null!=e.zmax&&null!=e.zmin){if(r.max.z>=e.zmax&&r.min.z<e.zmin||r.max.z>e.zmin&&r.min.z<=e.zmin||r.max.z<=e.zmax&&r.min.z>=e.zmin){y.add(b.frag2idx[T]);var k=b.idx2frag[b.frag2idx[T]];if(e.isNumber(k))o.highItertor.push(k,e.HMATERIAL.BLUE);else if(e.isArray(k))for(var q=0;q<k.length;++q)o.highItertor.push(k[q])}}else{y.add(b.frag2idx[T]);var k=b.idx2frag[b.frag2idx[T]];if(e.isNumber(k))o.highItertor.push(k);else if(e.isArray(k))for(var q=0;q<k.length;++q)o.highItertor.push(k[q])}}y.forEach(function(t){M.push(b.uuids[t]);var o=e.coreModel[0].getProperty(t,b.uuids[t],!1);o&&(o.isSelected=!0,S.push(o))}),o.highItertor.reset()}e._selector.add(M),o.control.enabled=!0,w.geometry=new e.Geometry,o.overlayScene.remove(w),A=void 0;var I=!t||!t.ctrlKey||1!=t.ctrlKey;e.logger.log("clear",I),e.taskApis.setPropers(S,I),e.taskApis.runCallBack(),o.highItertor.filterHighLight()}function a(e){i(e)}function s(e,t){return t.setFromCamera(e,o.camera),t.ray.origin.clone().add(t.ray.direction)}function l(t,r){var n=(new e.Vector3).copy(r).multiplyScalar(o.camera.far);return(new e.Vector3).copy(t).add(n)}var c,u,d,h,p,m,f,v,g,x,y=t.call(this)||this,A=void 0;c=new e.Vector2,h=new e.Vector2,u=new e.Raycaster;var b=new THREE.LineBasicMaterial({color:16711680}),w=new THREE.Line;w.material=b;var E=[1,2,2,3,3,4,4,1,5,6,6,7,7,8,8,5,1,5,2,6,3,7,4,8];return y.regist=function(){},y.unRegist=function(){o.control.enabled=!0,o.overlayScene.remove(w),w.geometry=new e.Geometry,void 0!=A&&a()},y.leftButtonDown=function(e){r(e.offsetX/o.dom.offsetWidth*2-1,-e.offsetY/o.dom.offsetHeight*2+1)},y.onTouchStart=function(e){var t=o.dom.getBoundingClientRect();r((e.touches[0].pageX-t.left)/t.width*2-1,-(e.touches[0].pageY-t.top)/t.height*2+1)},y.mouseMove=function(e){h.x=e.offsetX/o.dom.offsetWidth*2-1,h.y=-e.offsetY/o.dom.offsetHeight*2+1,n()},y.onTouchMove=function(e){var t=o.dom.getBoundingClientRect();h.x=(e.touches[0].pageX-t.left)/t.width*2-1,h.y=-(e.touches[0].pageY-t.top)/t.height*2+1,n()},y.mouseOut=function(e){},y.mouseOver=function(t){o.control.enabled=!0,o.overlayScene.remove(w),w.geometry=new e.Geometry,void 0!=A&&a(t)},y.onTouchEnd=function(e){i(e)},y.leftButtonUp=function(e){a(e)},y.leftButtonClick=function(e){if(c.equals(h)){DEBUG&&console.log("click"),u.setFromCamera(c,o.camera);var t=[];o.fragSet.raycast(u,t),t.length>0&&(o.highItertor.splice(t[0]),o.fragSet.setState(t,2))}},y.getHotKey=function(){return{hotkey:"ctr+r",needLongPress:!1}},y.getName=function(){return"RegionControl"},y.backUp=function(){o.highItertor.reverse(),o.iterator.reset(),o.highItertor.reset()},y}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.RegionControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(e){function t(t,o){var r=e.call(this,t)||this;return r.hasUvMatrix=!1,r.uvMatrix=[],void 0!=o&&(r.hasUvMatrix=!0,r.uvMatrix=o),r}return __extends(t,e),t.prototype.setUvMatrix=function(e){this.hasUvMatrix=!0,this.uvMatrix=e},t.prototype.getUvMatrix=function(){return this.uvMatrix},t}(THREE.MeshPhongMaterial);e.RadonPhongMaterial=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this,o)||this;return r.camera=new THREE.OrthographicCamera(-1e3,1e3,1e3,-1e3,0,1),r.scene=new THREE.Scene,r.length=0,r.dom=e.getRenderContext().domElement,r}return __extends(o,t),o.prototype.render=function(e){return this},o.prototype.setShader=function(){return this},o.prototype.resize=function(e,t){return this},o.prototype.setScene=function(){var t=new THREE.PlaneBufferGeometry(2e3,2e3,1e3,1e3),o=new THREE.Mesh(t,this);o.material;new e.AmbientLight(16777215);return this.scene.add(o),this},o}(THREE.ShaderMaterial);e.RadonShaderMaterial=t;var o=function(t){function o(o,r){var n=t.call(this,r)||this;return n.shader=new e.RadonShader(e.SHADERNAME.FXAASHADER),n.resolution=new THREE.Vector2(1/n.dom.width,1/n.dom.height),n.inRenderTarget=void 0!=o?o:void 0,n.setShader(),n.setScene(),n}return __extends(o,t),o.prototype.resize=function(e,t){return this.uniforms.resolution.value.set(1/e,1/t),this.setShader(),this},o.prototype.render=function(e){var t=new Uint8Array(4);return e.readRenderTargetPixels(this.inRenderTarget,1e3,500,1,1,t),e.render(this.scene,this.camera),this},o.prototype.setShader=function(){return this.uniforms=this.shader.getUniforms(),this.uniforms.tDiffuse.value=this.inRenderTarget.texture,this.uniforms.resolution.value=this.resolution,this.vertexShader=this.shader.getVertexShader(),this.fragmentShader=this.shader.getFragmentShader(),this},o.prototype.setInRenderTarget=function(e){return this.inRenderTarget=e,this.setShader(),this},o}(t);e.FXAAShaderMaterial=o;var r=function(t){function o(o,r){var n=t.call(this,r)||this;return n.shader=new e.RadonShader(e.SHADERNAME.BLENDSHADER),n.renderTartgets=[],n.outRenderTarget=new THREE.WebGLRenderTarget(4*n.dom.width,4*n.dom.height),n.outRenderTarget.texture.format=THREE.RGBAFormat,n.outRenderTarget.texture.type=THREE.FloatType,n.outRenderTarget.texture.anisotropy=1,n.outRenderTarget.texture.minFilter=THREE.LinearFilter,n.outRenderTarget.texture.magFilter=THREE.LinearFilter,n.outRenderTarget.texture.generateMipmaps=!1,n.outRenderTarget.stencilBuffer=!1,n.outRenderTarget.depthBuffer=!1,n.renderTartgets=void 0==o?[]:o,n.setShader(),n.setScene(),n}return __extends(o,t),o.prototype.resize=function(e,t){return this.outRenderTarget.setSize(e,t),this.setShader(),this},o.prototype.setRenderTargets=function(e){return this.renderTartgets=e.length>=2?e:[],this.setShader(),this},o.prototype.getRenderTargets=function(){return this.renderTartgets},o.prototype.setShader=function(){return 2==this.renderTartgets.length?(this.uniforms=this.shader.getUniforms(),this.uniforms.tDiffuseBaseModelAndAddModel.value=this.renderTartgets[0].texture,this.uniforms.tDiffuseAssistModel.value=this.renderTartgets[1].texture,this.uniforms.tDepthBaseModelAndAddModel.value=this.renderTartgets[0].depthTexture,this.uniforms.tDepthAssistModel.value=this.renderTartgets[1].depthTexture,this.uniforms.size.value=new e.Vector2(this.dom.width,this.dom.height),this.uniforms.resolution.value=new e.Vector2(1/this.dom.width,1/this.dom.height),this.vertexShader=this.shader.getVertexShader(),this.fragmentShader=this.shader.getFragmentShader()):console.log("renderTarget Error\uff01"),this},o.prototype.getRenderTarget=function(){return this.outRenderTarget},o.prototype.render=function(e){var t=new Uint8Array(4);return e.readRenderTargetPixels(this.renderTartgets[0],1e3,500,1,1,t),e.readRenderTargetPixels(this.renderTartgets[1],1e3,500,1,1,t),e.render(this.scene,this.camera,this.outRenderTarget),this},o}(t);e.BlendShaderMaterial=r;var n=function(t){function o(o,r){var n=t.call(this,r)||this;return n.shader=new e.RadonShader(e.SHADERNAME.SMAASHADER),n.resolution=new THREE.Vector2(1/n.dom.width,1/n.dom.height),n.inRenderTarget=void 0!=o?o:void 0,n.setShader(),n.setScene(),n}return __extends(o,t),o.prototype.resize=function(e,t){return this.uniforms.resolution.value.set(1/e,1/t),this.setShader(),this},o.prototype.render=function(e){return e.render(this.scene,this.camera),this},o.prototype.setShader=function(){return this.defines=this.shader.getDefins(),this.uniforms=this.shader.getUniforms(),this.uniforms.tDiffuse.value=this.inRenderTarget.texture,this.uniforms.resolution.value=this.resolution,this.vertexShader=this.shader.getVertexShader(),this.fragmentShader=this.shader.getFragmentShader(),this},o.prototype.setInRenderTarget=function(e){return this.inRenderTarget=e,this.setShader(),this},o}(t);e.SMAAShaderMaterial=n;var i=function(){function e(e,t){this.shaderArray=[];var i=new r(e,t),a=new o(i.getRenderTarget(),t);new n(i.getRenderTarget(),t);this.shaderArray.push(i),this.shaderArray.push(a)}return e.prototype.render=function(e){for(var t=0;t<this.shaderArray.length;++t){this.shaderArray[t].render(e)}},e.prototype.resize=function(e,t){for(var o=0;o<this.shaderArray.length;++o)this.shaderArray[o].resize(e,t);return this},e}();e.BlendRender=i}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){function r(){o.control.enabled=!1,y=a(l,c),o.overlayScene.add(w)}function n(){if(void 0!=y){u=a(d,c),h=a(new e.Vector2(l.x,d.y),c),p=a(new e.Vector2(d.x,l.y),c),m=s(y,c.ray.direction),f=s(u,c.ray.direction),g=s(p,c.ray.direction),v=s(h,c.ray.direction);var t=new e.Geometry;t.vertices.push(y,h,u,p,y),w.geometry=t,e.enableUp=!0}}function i(){var t=o.camera,r=o.control;if(Math.abs(l.x-d.x)>A&&Math.abs(l.y-d.y)>A){var n=(new e.Vector2).copy(l).add(d).divideScalar(2);c.setFromCamera(n,t);var i=r.getSpherical();r.target.copy((new e.Vector3).copy(c.ray.origin).add((new e.Vector3).copy(c.ray.direction).multiplyScalar(1e3)));var a=Math.abs(l.x-d.x),s=2/a;t.zoom*=s;var u=o.fragSet.raycast(c,void 0);null!=u&&r.target.copy(u.point),r.update(i.phi,i.theta),t.updateMatrixWorld(),t.updateProjectionMatrix()}w.geometry=new e.Geometry,y=void 0,r.enabled=!0,o.overlayScene.remove(w)}function a(e,t){return t.setFromCamera(e,o.camera),t.ray.origin.clone().add(t.ray.direction)}function s(t,r){var n=(new e.Vector3).copy(r).multiplyScalar(o.camera.far);return(new e.Vector3).copy(t).add(n)}var l,c,u,d,h,p,m,f,v,g,x=t.call(this)||this,y=void 0,A=.01,b=new THREE.LineBasicMaterial({color:16711680}),w=new THREE.Line;return w.material=b,x.regist=function(){l=new e.Vector2,d=new e.Vector2,c=new e.Raycaster},x.unRegist=function(){l=null,d=null,y=void 0,u=null,p=null,h=null,m=null,f=null,g=null,v=null,c=null},x.leftButtonDown=function(e){l.x=e.offsetX/o.dom.offsetWidth*2-1,l.y=-e.offsetY/o.dom.offsetHeight*2+1,r()},x.onTouchStart=function(e){var t=o.dom.getBoundingClientRect();l.x=(e.touches[0].pageX-t.left)/t.width*2-1,l.y=-(e.touches[0].pageY-t.top)/t.height*2+1,r()},x.mouseMove=function(e){d.x=e.offsetX/o.dom.offsetWidth*2-1,d.y=-e.offsetY/o.dom.offsetHeight*2+1,n()},x.onTouchMove=function(e){var t=o.dom.getBoundingClientRect();d.x=(e.touches[0].pageX-t.left)/t.width*2-1,d.y=-(e.touches[0].pageY-t.top)/t.height*2+1,n()},x.leftButtonUp=function(){new e.Raycaster,new e.Vector2;return function(e){i()}}(),x.onTouchEnd=function(e){i()},x.getHotKey=function(){return{hotkey:"ctr+a",needLongPress:!1}},x.getName=function(){return"AmplifierControl"},x}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.AmplifierControl=t}(Neon||(Neon={}));var Neon;!function(e){!function(){function t(t){this.rmVariable=new e.RenderModelVariable,this.InitRenderModelVaiables(t);new e.SetMolde,new e.Animate}t.prototype.InitRenderModelVaiables=function(e){this.rmVariable.fragSet=e.getFragSet(),this.rmVariable.control=e.getControlor(),this.rmVariable.overlayScene=e.getOverlayScene(),this.rmVariable.camera=e.getCamera(),this.rmVariable.navCamera=e.getNavCamera(),this.rmVariable.navTriCamera=e.getNavTriCamera(),this.rmVariable.gl=e.getGL(),this.rmVariable.downGl=e.getDownGL(),this.rmVariable.iterator=e.getIterator(),this.rmVariable.highItertor=e.getHighIterator(),this.rmVariable.navCircleScene=e.getNavCircleScene(),this.rmVariable.homeScene=e.getHomeScene(),this.rmVariable.navScene=e.getNavScene(),this.rmVariable.dom=e.getDom(),this.rmVariable.navDom=e.getNavDom(),this.rmVariable.boundingBox=e.boundingBox,this.rmVariable.scene=e.getScene()}}()}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){function r(e){p.setArrorsScale(s,l,p.getScale(h,o.camera)),p.setArrorsPosition(s,l,c,p.getScale(h,o.camera))}function n(){d.update(c),p.setArrorsPosition(s,l,c,p.getScale(h,o.camera)),p.changeClipingPlans(u,c),p.setCamera(o.camera,o.control,c),void 0!=a.getSelected()&&o.iterator.reset()}var i=t.call(this)||this,a=null,s=[],l=[],c=new THREE.Box3,u=o.downGl,d=new THREE.BoxHelper(c,new THREE.Color(255)),h=o.boundingBox,p=i,m=o.overlayScene;return i.createArrors(s,l,h),i.regist=function(){p.getBox(o.fragSet,c),d.update(c),m.add(d),p.setArrorsPosition(s,l,c,p.getScale(h,o.camera));for(var t=0,n=s.length;t<n;t++)m.add(s[t]),m.add(l[t]);o.dom.addEventListener("wheel",r,!1),a=new THREE.DragControls(s,o.camera,o.dom,!0,c),a.addEventListener("dragstart",function(e){o.control.enabled=!1}),a.addEventListener("dragend",function(e){o.control.enabled=!0}),this.setClipingPlans(u,c),e.cons.getControls().ClickControl.deActive(),o.highItertor.reverse(),p.setArrorsScale(s,l,p.getScale(h,o.camera)),p.setArrorsPosition(s,l,c,p.getScale(h,o.camera))},i.unRegist=function(){m.remove(d);for(var t=0,n=s.length;t<n;t++)m.remove(s[t]),m.remove(l[t]);o.dom.removeEventListener("wheel",r,!1),null!=a&&(a.dispose(),a=null),e.cons.getControls().ClickControl.active()},i.getHotKey=function(){return{hotkey:"ctr+b",needLongPress:!1}},i.leftButtonClick=function(){},i.mouseMove=function(){return function(e){n()}}(),i.onTouchMove=function(e){switch(e.touches.length){case 1:n();break;case 2:p.setArrorsScale(s,l,p.getScale(h,o.camera)),p.setArrorsPosition(s,l,c,p.getScale(h,o.camera))}},i.getName=function(){return"PartitionControl"},i}return __extends(o,t),o.prototype.createArrors=function(t,o,r){var n=Math.PI,i=[],a=new e.Vector3,s=new THREE.Euler,l=new THREE.Vector3,c=new THREE.ConeGeometry(5,30,6),u=new THREE.Geometry;u.merge(c,new e.Matrix4),a.set(r.max.x+15,(r.max.y+r.min.y)/2,(r.max.z+r.min.z)/2),s.set(0,0,-n/2),l.set(1,1,1),i=this.createArror(u,a,s,l,11006,65280,"xmax"),t.push(i[0]),o.push(i[1]),a.set(r.min.x-15,(r.max.y+r.min.y)/2,(r.max.z+r.min.z)/2),s.set(0,0,n/2),l.set(1,1,1),i=this.createArror(u,a,s,l,11006,65280,"xmin"),t.push(i[0]),o.push(i[1]),a.set((r.max.x+r.min.x)/2,r.max.y+15,(r.max.z+r.min.z)/2),s.set(0,0,0),l.set(1,1,1),i=this.createArror(u,a,s,l,11006,65280,"ymax"),t.push(i[0]),o.push(i[1]),a.set((r.max.x+r.min.x)/2,r.min.y-15,(r.max.z+r.min.z)/2),s.set(0,0,n),l.set(1,1,1),i=this.createArror(u,a,s,l,11006,65280,"ymin"),t.push(i[0]),o.push(i[1]),a.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2,r.max.z+15),s.set(n/2,0,0),l.set(1,1,1),i=this.createArror(u,a,s,l,11006,65280,"zmax"),t.push(i[0]),o.push(i[1]),a.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2,r.min.z-15),s.set(-n/2,0,0),l.set(1,1,1),i=this.createArror(u,a,s,l,11006,65280,"zmin"),t.push(i[0]),o.push(i[1])},o.prototype.createArror=function(t,o,r,n,i,a,s){var l=new e.Mesh(t,new THREE.MeshBasicMaterial({color:i})),c=new e.Mesh(t,new THREE.MeshBasicMaterial({color:a,wireframe:!0}));return l.position.copy(o),l.rotation.copy(r),l.scale.copy(n),l.updateMatrix(),c.position.copy(o),c.rotation.copy(r),c.scale.copy(n),c.updateMatrix(),l.name=s,l.geometry.computeBoundingSphere(),l.geometry.boundingSphere,[l,c]},o.prototype.setArrorsScale=function(e,t,o){for(var r=0,n=e.length;r<n;++r)e[r].scale.set(o,o,o),t[r].scale.set(o,o,o)},o.prototype.setArrorsPosition=function(e,t,o,r){for(var n=0,i=e.length;n<i;++n)switch(e[n].name){case"xmax":e[n].position.set(o.max.x+15*r,(o.max.y+o.min.y)/2,(o.max.z+o.min.z)/2),t[n].position.set(o.max.x+15*r,(o.max.y+o.min.y)/2,(o.max.z+o.min.z)/2);break;case"xmin":e[n].position.set(o.min.x-15*r,(o.max.y+o.min.y)/2,(o.max.z+o.min.z)/2),t[n].position.set(o.min.x-15*r,(o.max.y+o.min.y)/2,(o.max.z+o.min.z)/2);break;case"ymax":e[n].position.set((o.max.x+o.min.x)/2,o.max.y+15*r,(o.max.z+o.min.z)/2),t[n].position.set((o.max.x+o.min.x)/2,o.max.y+15*r,(o.max.z+o.min.z)/2);break;case"ymin":e[n].position.set((o.max.x+o.min.x)/2,o.min.y-15*r,(o.max.z+o.min.z)/2),t[n].position.set((o.max.x+o.min.x)/2,o.min.y-15*r,(o.max.z+o.min.z)/2);break;case"zmax":e[n].position.set((o.max.x+o.min.x)/2,(o.max.y+o.min.y)/2,o.max.z+15*r),t[n].position.set((o.max.x+o.min.x)/2,(o.max.y+o.min.y)/2,o.max.z+15*r);break;case"zmin":e[n].position.set((o.max.x+o.min.x)/2,(o.max.y+o.min.y)/2,o.min.z-15*r),t[n].position.set((o.max.x+o.min.x)/2,(o.max.y+o.min.y)/2,o.min.z-15*r)}},o.prototype.setClipingPlans=function(t,o){var r=new e.Plane(new e.Vector3(1,0,0),-o.min.x),n=new e.Plane(new e.Vector3(0,1,0),-o.min.y),i=new e.Plane(new e.Vector3(0,0,1),-o.min.z),a=new e.Plane(new e.Vector3(-1,0,0),o.max.x),s=new e.Plane(new e.Vector3(0,-1,0),o.max.y),l=new e.Plane(new e.Vector3(0,0,-1),o.max.z);t.clippingPlanes=[r,n,i,a,s,l]},o.prototype.changeClipingPlans=function(e,t){e.clippingPlanes[0].constant=-t.min.x,e.clippingPlanes[1].constant=-t.min.y,e.clippingPlanes[2].constant=-t.min.z,e.clippingPlanes[3].constant=t.max.x,e.clippingPlanes[4].constant=t.max.y,e.clippingPlanes[5].constant=t.max.z},o.prototype.setCamera=function(e,t,o){e.lookAt(o.getCenter());var r=t.getSpherical();t.target.copy(o.getCenter()),t.update(r.phi,r.theta),e.updateMatrixWorld(),e.updateProjectionMatrix()},o.prototype.getScale=function(e,t){return 1/(300*t.projectionMatrix.getMaxScaleOnAxis())},o.prototype.getBox=function(e,t){if(t.copy(new THREE.Box3),t)for(var o=0,r=e.getCount();o<r;++o)2===e.getState(o)&&t.union(e.getBoundingBox(o));return t},o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.PartitionControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){function r(e){u.setMeshPosition(l,n),u.setMeshRotation(l,n),u.setMeshScale(l,o)}var n,i=t.call(this)||this,a=new THREE.CircleGeometry(5,32),s=new THREE.MeshPhongMaterial({color:65280,opacity:.4,transparent:!0,side:THREE.DoubleSide}),l=new e.Mesh(a,s),c=o.overlayScene,u=i,d=[],h=[],p=[],m=[],f=new THREE.PlaneGeometry(.1,.1),v=new THREE.MeshBasicMaterial({color:1678729,side:THREE.DoubleSide}),g=new e.Vector2,x=new e.Vector2,y=0,A=new e.Mesh;A.material=new THREE.MeshBasicMaterial({color:1678729,transparent:!1,opacity:.3,side:THREE.DoubleSide});var b=new e.Mesh;b.material=new THREE.MeshBasicMaterial({color:22089,side:THREE.DoubleSide});var w=new e.Mesh,E=new e.Geometry,M=new THREE.SphereGeometry(2,32,32),S=new THREE.ConeGeometry(1,3,32,32);E.merge(M,new e.Matrix4),E.merge(S,(new e.Matrix4).makeTranslation(0,3,0)),w.geometry=E,w.rotation.set(-Math.PI/2,0,0);var C=[],R=new e.Mesh;R.material=new e.MeshPhongMaterial({color:16711680});var B=[];return i.regist=function(){c.add(l),e.container.style.cursor="move",this.setMeshPosition(l,n),this.setMeshRotation(l,n),this.setMeshScale(l,o),o.dom.addEventListener("wheel",r,!1);for(var t=0,i=h.length;t<i;++t)c.add(h[t]),c.add(d[2*t]),c.add(d[2*t+1]),c.add(C[t]),c.add(B[t]);o.hubScene.add(A),o.hubScene.add(b),e.cons.getControls().ClickControl.deActive()},i.unRegist=function(){c.remove(l),e.container.style.cursor="default",o.dom.removeEventListener("wheel",r,!1);for(var t=0,n=h.length;t<n;++t)c.remove(h[t]),c.remove(d[2*t]),c.remove(d[2*t+1]),c.remove(C[t]),c.remove(B[t]);o.hubScene.remove(A),o.hubScene.remove(b),e.cons.getControls().ClickControl.active()},i.getHotKey=function(){return{hotkey:"ctr+m",needLongPress:!1}},i.mouseMove=function(){var t=new e.Vector2,r=new e.Raycaster,i=o.fragSet;return function(a){t.x=a.offsetX/o.dom.offsetWidth*2-1,t.y=-a.offsetY/o.dom.offsetHeight*2+1,r.setFromCamera(t,o.camera),n=i.raycast(r,void 0),this.setMeshPosition(l,n),this.setMeshRotation(l,n),this.setMeshScale(l,o),e.enableUp=!0}}(),i.leftButtonDown=function(e){g.x=e.offsetX/o.dom.offsetWidth*2-1,g.y=-e.offsetY/o.dom.offsetHeight*2+1},i.leftButtonUp=function(e){x.x=e.offsetX/o.dom.offsetWidth*2-1,x.y=-e.offsetY/o.dom.offsetHeight*2+1},i.leftButtonClick=function(){var t,r=[],i=new e.Vector2,a=new e.Raycaster,s=null,l=null;return function(E){if(l=e.getMicroYaHeiFont(),g.x==x.x&&g.y==x.y){if(i.x=E.offsetX/o.dom.offsetWidth*2-1,i.y=-E.offsetY/o.dom.offsetHeight*2+1,a.setFromCamera(i,o.camera),t=a.intersectObjects(C),t.length>0){if(null!=s){s.material.color.setHex(16707173)}s=t[0].object;var M=s.material;M.color.setHex(16711680);var S=parseInt(s.name);return void(b.geometry=m[S])}if(null!=s){var M=s.material;M.color.setHex(16707173)}if(null!=n){var T=new THREE.Mesh(f,v);if(this.setMeshPosition(T,n),this.setMeshRotation(T,n),d.push(T),c.add(T),r.push(n.point),2==r.length){var D=new THREE.Geometry;D.vertices.push(r[0]),D.vertices.push(r[1]);var k=new THREE.LineBasicMaterial({color:1678729}),q=new THREE.Line(D,k);h.push(q),c.add(q);var I=w.clone();I.position.set((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2,(r[0].z+r[1].z)/2+5),c.add(I),I.name=String(y),I.material=new e.MeshPhongMaterial({color:16707173}),C.push(I);var U=R.clone(),N={size:1,height:.1,font:l,curveSegments:5},P=new THREE.TextGeometry("No. "+String(y),N);P.center(),U.geometry=P,U.position.set((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2,(r[0].z+r[1].z)/2+8),c.add(U),B.push(U),u.createDisplayCard(o.dom,A),p.push(A),m.push(u.createText(o.dom,r[0],r[1],y++,l,b)),r.length=0}}}}}(),i.getName=function(){return"MeasureControl"},i}return __extends(o,t),o.prototype.setMeshScale=function(e,t){var o=this.getScale(t.boundingBox,t.camera);e.scale.set(o,o,o)},o.prototype.getScale=function(e,t){return.01/t.projectionMatrix.getMaxScaleOnAxis()},o.prototype.setMeshPosition=function(e,t){null!=t&&e.position.copy(t.point)},o.prototype.setMeshRotation=function(t,o){if(null!=o){var r=new e.Vector3,n=new e.Vector3;r.x=o.vA.x-o.vB.x,r.y=o.vA.y-o.vB.y,r.z=o.vA.z-o.vB.z,n.x=o.vA.x-o.vC.x,n.y=o.vA.y-o.vC.y,n.z=o.vA.z-o.vC.z;var i=r.cross(n).normalize();t.rotation.set(Math.acos(i.z),Math.PI/2-Math.acos(i.x),0)}},o.prototype.createDisplayCard=function(e,t){var o=new THREE.PlaneGeometry(2.5,2.5,1,5);return t.geometry=o,t.scale.set(10,10,10),t.position.set(e.width/10-15,0,0),t},o.prototype.createText=function(e,t,o,r,n,i){var a=new THREE.Geometry,s={size:.25,height:.1,font:n,curveSegments:5},l=new THREE.TextGeometry("No."+String(r),s);l.center(),a.merge(l,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,1,0)));var c=new THREE.TextGeometry("\u8ddd\u79bb x = "+String(Math.abs((t.x-o.x)/3.2808399).toFixed(2))+"m",s);c.center(),a.merge(c,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,0,0)));var u=new THREE.TextGeometry("\u8ddd\u79bb y = "+String(Math.abs((t.y-o.y)/3.2808399).toFixed(2))+"m",s);u.center(),a.merge(u,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,-.5,0)));var d=new THREE.TextGeometry("\u8ddd\u79bb z = "+String(Math.abs((t.z-o.z)/3.2808399).toFixed(2))+"m",s);d.center(),a.merge(d,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,-1,0)));var h=new THREE.TextGeometry("\u8ddd\u79bb = "+String(Math.abs(t.distanceTo(o)/3.2808399).toFixed(2))+"m",s);return h.center(),a.merge(h,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,.5,0))),i.geometry=a,i.scale.set(10,10,10),i.position.set(e.width/10-15,0,0),a},o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.MeasureControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){function r(t,r){if(t.length>0){o.highItertor.clear(),l=o.control;for(var n=0;n<a.getCount();++n)a.setState(n,1);if(a.setState(t,2),o.iterator.reset(),o.highItertor.reset(),0==r){for(var i=[],n=0;n<t.length;++n)i.push(t[n]);u.push(i)}var s=l.getSpherical();l.target.copy(a.getBoundingBox(t.pop()).getCenter()),l.update(s.phi,s.theta),t.length=0,e.enablePeel=!0}}function n(){c=o.camera;for(var e=a.getCount(),t=0;t<e;++t)a.setState(t,2);o.iterator.reset(),o.highItertor.reset(),l.target.copy(o.boundingBox.getCenter()),c.zoom=2,c.updateMatrixWorld(),c.updateProjectionMatrix(),l.update(.95,-.78)}var i=t.call(this)||this,a=o.fragSet,s=o.highItertor,l=o.control,c=o.camera,u=[];return i.regist=function(){r(s.getFragIds(),!1),e.cons.getControls().HiddenControl.deActive()},i.unRegist=function(){},i.getHotKey=function(){return{hotkey:"ctr+q",needLongPress:!1}},i.leftButtonClick=function(e){r(s.getFragIds(),!1)},i.backUp=function(){u.pop(),u.length>0?r(u[u.length-1],!0):n()},i.getName=function(){return"PeelControl"},i}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.PeelControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this)||this,n=o.highItertor;return r.regist=function(){n.length()>0&&e._selector.focus(o.fragSet.getUUID(n.pop())),e.logger.log("focus regist")},r.leftButtonClick=function(){},r.unRegist=function(){e._selector.focusBack(),e.logger.log("focus unregist")},r.getHotKey=function(){return{hotkey:"ctr+f",needLongPress:!1}},r.getName=function(){return"FocusControl"},r.backUp=function(){e._selector.focusBack(),e.logger.log("focus backup")},r}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.FocusControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){function r(e){if(e.length>0){o.fragSet.setState(e,1),o.iterator.reset(),o.highItertor.reset();for(var t=[],r=0;r<e.length;++r)t.push(e[r]);i.push(t),o.highItertor.clear(),o.highItertor.reset(),o.iterator.reset()}}var n=t.call(this)||this,i=[];return n.getHotKey=function(){return{hotkey:"ctr+h",needLongPress:!1}},n.regist=function(){setTimeout(function(){r(o.highItertor.getFragIds())},10),e.cons.getControls().PeelControl.deActive()},n.unRegist=function(){},n.leftButtonClick=function(e){setTimeout(function(){r(o.highItertor.getFragIds())},10)},n.backUp=function(){i.length>0&&(o.fragSet.setState(i.pop(),2),o.iterator.reset())},n.getName=function(){return"HiddenControl"},n.backAll=function(){i.map(function(e){o.fragSet.setState(e,2)}),o.iterator.reset(),i.length=0},n}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.HiddenControl=t}(Neon||(Neon={}));var Neon;!function(e){e.blendMesh=new THREE.BlendCharacter,e.params={rotationSpeed:.001,speed:200,collide:!0,height:1.8,initHeight:0,blendLoad:!1,blendSpeed:.03,persion:!1,inWander:function(){}};var t=function(t){function o(o){function r(){x=new dat.GUI({autoPlace:!1}),x.domElement.id="gui",x.domElement.style.top="35px",x.domElement.style.left="0%",x.domElement.style.zIndex="3",x.domElement.style.position="absolute",x.add(e.params,"rotationSpeed",1e-4,.002),x.add(e.params,"speed",0,400),x.add(e.params,"collide",!0),x.add(e.params,"height",1,2.5).onChange(function(t){o.iterator.reset(),o.camera.position.z=e.params.initHeight+e.params.height*e.meter2foot}),x.add(e.params,"persion",!1).onChange(function(t){e.logger.log(t),1==t?(o.scene.add(e.blendMesh),e.blendMesh.position.copy(o.camera.position),e.blendMesh.position.z=e.params.initHeight,e.params.persion=!0,o.iterator.reset(),o.camera.position.add(new e.Vector3(2*Math.sin(u),-2*Math.cos(u)))):(o.scene.remove(e.blendMesh),e.params.persion=!1,o.iterator.reset())}),x.add(e.params,"inWander"),x.open(),e.container.appendChild(x.domElement)}function n(t){document.pointerLockElement===y?(c=!0,p.style.display="none",document.addEventListener("mousemove",A,!1),e.logger.log("lock off")):(c=!1,document.removeEventListener("mousemove",A,!1),e.logger.log("lock on"))}function i(e){y.requestPointerLock()}var a,s=t.call(this)||this,l=s,c=!1,u=0,d=0,h=!1,p=(new THREE.Vector3,new THREE.Raycaster(new THREE.Vector3,new THREE.Vector3(0,-1,0),0,10),document.createElement("div"));p.style.position="absolute",p.style.width="100%",p.style.height="100%",p.style.top="0%",p.style.left="0%",p.style.backgroundColor="rgba(0, 0, 0, 0.5)",p.style.zIndex="10000";var m=document.createElement("div");m.style.position="absolute",m.style.width="100%",m.style.height="100%",m.style.top="0%",m.style.left="0%",m.style.display="-webkit-box",m.style.webkitBoxOrient="horizontal",m.style.webkitBoxAlign="center",m.style.webkitBoxPack="center",m.style.textAlign="center",m.style.color="#ffffff",p.appendChild(m);var f=document.createElement("span");f.style.fontSize="40px",f.innerHTML="\u5355\u51fb\u5f00\u59cb\u6f2b\u6e38",m.appendChild(f);var v=e.CURRENT_MODEL_DIRECTORY+"/animate/marine_anims_core.json";e.blendMesh.load(v,function(){e.blendMesh.rotation.x=Math.PI/2,e.blendMesh.applyWeight("idle",1/3),e.blendMesh.applyWeight("walk",1/3),e.blendMesh.applyWeight("run",1/3),e.blendMesh.geometry.computeBoundingBox();var t=e.blendMesh.geometry.boundingBox,o=Math.max(t.max.x-t.min.x,Math.max(t.max.y-t.min.y,t.max.z-t.min.z))/2;e.blendMesh.scale.set(1/o,1/o,1/o),e.logger.log("......................blend load over................")}),m.appendChild(document.createElement("br"));var g=document.createElement("span");g.innerHTML="(W, A, S, D = Move, MOUSE = Look around)",m.appendChild(g);var x,y=document.body;e.params.inWander=function(){0==c&&(p.style.display="-webkit-box",o.fragSet.setState(o.highItertor.getFragIds(),2),o.highItertor.clear())},s.regist=function(){var t=o.setPreCamera();if(o.camera=t.camera,o.control.enabled=!1,document.addEventListener("pointerlockchange",n,!1),0!=o.highItertor.length()){var a=o.highItertor.index(0);o.fragSet.setState(o.highItertor.getFragIds(),2),o.camera.rotation.set(Math.PI/2,0,0);var s=o.fragSet.getBoundingBox(a);o.camera.position.set((s.max.x+s.min.x)/2,(s.max.y+s.min.y)/2,s.max.z+e.params.height*e.meter2foot),e.params.initHeight=s.max.z,void 0!=e.blendMesh&&(e.blendMesh.position.set((s.max.x+s.min.x)/2,(s.max.y+s.min.y)/2+.5*e.meter2foot,e.params.initHeight),e.blendMesh.play("idle",1),e.params.blendLoad=!0),o.highItertor.clear(),r(),e.container.appendChild(p),p.style.display="-webkit-box"}else l.deActive();m.addEventListener("click",i,!1),e.logger.debug("wander regist!")},s.unRegist=function(){var t=o.setOrthCamera();o.camera=t.camera,o.control.enabled=!0,m.removeEventListener("click",i,!1),document.removeEventListener("pointerlockchange",n,!1),document.removeEventListener("mousemove",A,!1),e.container.removeChild(p),x&&x.destroy(),e.params.blendLoad=!1,o.scene.remove(e.blendMesh),void 0!=x&&(e.container.removeChild(x.domElement),x.destroy()),e.logger.debug("wander unregist")},s.getHotKey=function(){return{hotkey:"ctr+.",needLongPress:!1}},s.getName=function(){
return"WanderControl"},s.keyDown=function(t){if(c)switch(t.key){case"w":case"W":a=e.MOVESTATE.MOVEFORWARD,h=!0;break;case"s":case"S":a=e.MOVESTATE.MOVEBACK,h=!0;break;case"a":case"A":case"ArrowLeft":a=e.MOVESTATE.MOVELEFT,h=!0;break;case"d":case"D":case"ArrowRight":a=e.MOVESTATE.MOVERIGHT,h=!0;break;case"ArrowUp":a=e.MOVESTATE.UP,h=!0;break;case"ArrowDown":a=e.MOVESTATE.DOWN,h=!0}"i"!=t.key&&"I"!=t.key||0==c&&(p.style.display="-webkit-box",o.fragSet.setState(o.highItertor.getFragIds(),2),o.highItertor.clear())},s.keyUp=function(t){if(c)switch(t.key){case"w":case"W":a=e.MOVESTATE.MOVEFORWARD,h=!1;break;case"s":case"S":a=e.MOVESTATE.MOVEBACK,h=!1;break;case"a":case"A":case"ArrowLeft":a=e.MOVESTATE.MOVELEFT,h=!1;break;case"d":case"D":case"ArrowRight":a=e.MOVESTATE.MOVERIGHT,h=!1;break;case"ArrowUp":a=e.MOVESTATE.UP,h=!1;break;case"ArrowDown":a=e.MOVESTATE.DOWN,h=!1}};var A=function(){var t=new e.Vector3,r=new e.Vector3,n=new e.Euler(Math.PI/2,0,0);return function(i){if(c){var a=o.camera;performance.now();t.y-=i.movementX*e.params.rotationSpeed,r.x-=i.movementY*e.params.rotationSpeed,r.x>Math.PI/2?r.x=Math.PI/2:r.x<-Math.PI/2&&(r.x=-Math.PI/2);var s=(new e.Matrix4).makeRotationFromEuler(n).multiply((new e.Matrix4).makeRotationY(t.y)).multiply((new e.Matrix4).makeRotationX(r.x));if(a.rotation.setFromRotationMatrix(s),1==e.params.persion){var l=(new e.Matrix4).makeRotationFromEuler(n).multiply((new e.Matrix4).makeRotationY(t.y));e.blendMesh.rotation.setFromRotationMatrix(l),o.camera.position.copy(e.blendMesh.position).add(new e.Vector3(2*Math.sin(u),-2*Math.cos(u),e.params.height*e.meter2foot))}u=t.y,d=r.x,o.reset()}}}();return s.getYaw=function(){return u},s.getPitch=function(){return d},s.getMoveState=function(){return a},s.getKeyDown=function(){return h},s}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.WanderControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this)||this,n=!1;return r.regist=function(){n=!1,e.container.style.cursor="pointer"},r.unRegist=function(){n=!1,e.container.style.cursor="default"},r.getName=function(){return"PanControl"},r.getHotKey=function(){return{hotkey:"ctr+1",needLongPress:!1}},r.leftButtonDown=function(e){n=!0,o.control.handleMouseDownPan(e),o.control.enabled=!1},r.onTouchStart=function(e){n=!0,o.control.handleTouchStartPan(e),o.control.enabled=!1},r.onTouchEnd=function(e){n=!1,o.control.enabled=!0,o.control.onTouchEnd(e)},r.leftButtonUp=function(e){n=!1,o.control.enabled=!0,o.control.onMouseUp(e)},r.onTouchMove=function(e){1==n&&o.control.handleTouchMovePan(e)},r.mouseMove=function(e){1==n&&o.control.handleMouseMovePan(e)},r}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.PanControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this)||this;return r.getHotKey=function(){return{hotkey:"ctr+2",needLongPress:!1}},r.getName=function(){return"MagnifyControl"},r.regist=function(){o.camera.zoom<300&&(o.camera.zoom*=2,o.camera.updateMatrixWorld(),o.camera.updateProjectionMatrix(),o.iterator.reset(),o.highItertor.reset(),e.enableUp=!0),this.deActive()},r.unRegist=function(){},r}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.MagnifyControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this)||this;return r.getHotKey=function(){return{hotkey:"ctr+3",needLongPress:!1}},r.getName=function(){return"ShrinkControl"},r.regist=function(){o.camera.zoom>2&&(o.camera.zoom/=2,o.camera.updateMatrixWorld(),o.camera.updateProjectionMatrix(),o.iterator.reset(),o.highItertor.reset(),e.enableUp=!0),this.deActive()},r.unRegist=function(){},r}return __extends(o,t),o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.ShrinkControl=t}(Neon||(Neon={}));var Neon;!function(e){var t;!function(e){e[e.zMode=0]="zMode",e[e.xMode=1]="xMode",e[e.yMode=2]="yMode"}(t||(t={}));var o;!function(e){e[e.INTACK=0]="INTACK",e[e.BROKEN=1]="BROKEN"}(o||(o={}));var r=function(r){function n(n){function i(e,t){return t.setFromCamera(e,n.camera),t.ray.origin.clone().add(t.ray.direction)}function a(o,r){var n=new e.Box3;return I==t.zMode?(o.x>r.x?(n.max.x=o.x,n.min.x=r.x):(n.max.x=r.x,n.min.x=o.x),o.y>r.y?(n.max.y=o.y,n.min.y=r.y):(n.max.y=r.y,n.min.y=o.y),n.max.z=1e5,n.min.z=-1e5):I==t.yMode&&(o.x>r.x?(n.max.x=o.x,n.min.x=r.x):(n.max.x=r.x,n.min.x=o.x),o.z>r.z?(n.max.z=o.z,n.min.z=r.z):(n.max.z=r.z,n.min.z=o.z),n.max.y=1e4,n.min.y=-1e4),n}function s(e,t){return t.max.x<=e.max.x&&t.min.x>=e.min.x&&t.max.y<=e.max.y&&t.min.y>=e.min.y&&t.max.z<=e.max.z&&t.min.z>=e.min.z}function l(e,t){var o=new THREE.Mesh;return o.material=new THREE.MeshBasicMaterial({transparent:!0,color:t,opacity:.5}),o.geometry=new THREE.BoxGeometry(e[3]-e[0],e[4]-e[1],e[5]-e[2]),o.position.set((e[3]+e[0])/2,(e[4]+e[1])/2,(e[5]+e[2])/2),o}function c(e){for(var t=[],o=0;o<e.length;++o)for(var r=e[o],n=0;n<r.length;++n)t.push(r[n]);return t}var u=r.call(this)||this;u.pointMap=(new THREE.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg=="),u.pointsArray=[];var d,h,p,m=u,f=new e.Vector2,v=new e.Vector2,g=n.dom,x=new e.Raycaster,y=n.fragSet,A=new THREE.Points,b=[],w=new Map,E=void 0,M=new THREE.LineBasicMaterial({color:16711680}),S=new THREE.Line;S.material=M;var C=new THREE.Points,R=new THREE.PointsMaterial({size:5,map:u.pointMap,color:65280,sizeAttenuation:!0});C.material=R,A.material=R;var B=new THREE.Line,T=new THREE.Line,D=new THREE.LineBasicMaterial({color:65280});B.material=D,T.material=D;var k=new THREE.Mesh;k.material=new e.MeshPhongMaterial({color:16711680,transparent:!0,opacity:.7});var q,I,U,N,P=new e.Vector3,H=!1,z=[],L=[],F=[],V=new Set,O=[],_=[],j=!0;return u.getName=function(){return"ConstructionSectionControl"},u.getHotKey=function(){return{hotkey:"ctr+4",needLongPress:!1}},u.regist=function(){for(var r=0,i=b.length;r<i;++r)n.overlayScene.add(b[r]);e.container.style.cursor="move",n.overlayScene.add(C),n.overlayScene.add(k),n.control.update(0,0),I=t.zMode,U=o.INTACK,N="\u672a\u547d\u540d",z=[]},u.unRegist=function(){for(var t=0,o=b.length;t<o;++t)n.overlayScene.remove(b[t]);b.length=0,w.forEach(function(e){for(var t=0;t<e.length;++t)n.overlayScene.remove(e[t])}),w.clear(),e.container.style.cursor="default",n.overlayScene.remove(B),n.overlayScene.remove(T),n.overlayScene.remove(C),n.overlayScene.remove(k),e.logger.debug("ConstructionSectionControl unregist!")},u.leftButtonDown=function(e){1==j&&(f.x=e.offsetX/g.offsetWidth*2-1,f.y=-e.offsetY/g.offsetHeight*2+1,E=i(f,x),null!=P&&H&&E.copy(P),n.overlayScene.add(S),n.control.enabled=!1)},u.mouseMove=function(o){if(1==j){if(v.x=o.offsetX/n.dom.offsetWidth*2-1,v.y=-o.offsetY/n.dom.offsetHeight*2+1,d=i(v,x),void 0!=E){I==t.zMode?(h=new e.Vector3(E.x,d.y,0),p=new e.Vector3(d.x,E.y,0)):I==t.yMode&&(h=new e.Vector3(E.x,0,d.z),p=new e.Vector3(d.x,0,E.z));var r=new e.Geometry;r.vertices.push(E,h,d,p,E),S.geometry=r}e.enableUp=!0}},u.leftButtonUp=function(t){var r=Math.abs;if(y=n.fragSet,n.control.enabled=!0,S.geometry=new e.Geometry,n.overlayScene.remove(S),r(E.x-d.y)>.1||r(E.y-d.y)>.1||r(E.z-d.z)&&j){if(U==o.BROKEN){var i=a(E,d);e.logger.debug("box",i,E,d);for(var c=0,u=y.uuids.length;c<u;c++){var h=y.uuids[c],p=y.uuid2fragid.get(h);if(1!=y.getState(p[0])){var m=y.getBoundingBoxFromUuid(h);if(s(i,m)){p.forEach(function(t){n.highItertor.push(t,e.HMATERIAL.BLUE)});var f=l([m.min.x,m.min.y,m.min.z,m.max.x,m.max.y,m.max.z],65280);n.overlayScene.add(f),b.push(f),_.push(h),e.logger.debug("intersectsBox")}else if(i.intersectsBox(m)){var v=[];v.push(i.min.x>m.min.x?i.min.x:m.min.x),v.push(i.min.y>m.min.y?i.min.y:m.min.y),v.push(i.min.z>m.min.z?i.min.z:m.min.z),v.push(i.max.x<m.max.x?i.max.x:m.max.x),v.push(i.max.y<m.max.y?i.max.y:m.max.y),v.push(i.max.z<m.max.z?i.max.z:m.max.z);var f=l(v,255);n.overlayScene.add(f),b.push(f),O.push({uuid:h,box:v})}}}}else if(U==o.INTACK)for(var i=a(E,d),c=0,u=y.uuids.length;c<u;c++){var h=y.uuids[c],p=y.uuid2fragid.get(h);1!=y.getState(p[0])&&i.intersectsBox(y.getBoundingBoxFromUuid(h))&&(p.forEach(function(t){n.highItertor.push(t,e.HMATERIAL.BLUE)}),_.push(h))}n.highItertor.reset()}E=void 0,e.enableUp=!0},u.leftButtonClick=function(e){},u.backUp=function(){var t=L.pop();if("peel"==t){var o=e.cons.getControls().PeelControl,r=F.pop();if(void 0!=o)for(var i=0,a=r.length;i<a;++i)n.fragSet.setState(n.fragSet.uuid2fragid.get(r[i]),2)}else if("broken"==t){if(e.logger.debug(t),b.length>0)for(var i=0,a=b.length;i<a;++i)n.overlayScene.remove(b[i]);var o=z.pop();if(e.logger.debug(o),void 0!=o)for(var i=0,a=o.length;i<a;++i)n.fragSet.setState(n.fragSet.uuid2fragid.get(o[i].uuid),2)}else if("intack"==t){e.logger.debug(t);var o=z.pop();if(void 0!=o)for(var i=0,a=o.length;i<a;++i)n.fragSet.setState(n.fragSet.uuid2fragid.get(o[i].uuid),2)}n.iterator.reset()},u.keyDown=function(e){"p"==e.key?H=!H:"m"==e.key?(I=t.zMode,n.control.update(0,0),k.rotation.set(0,0,0)):"y"==e.key&&(I=t.yMode,n.control.update(Math.PI/2,0),k.rotation.set(Math.PI/2,0,0))},u.setMode=function(r){"z"==r&&(I=t.zMode,n.control.update(0,0),k.rotation.set(0,0,0)),"y"==r&&(I=t.yMode,n.control.update(Math.PI/2,0),k.rotation.set(Math.PI/2,0,0)),"i"==r&&(U=o.INTACK),"b"==r&&(U=o.BROKEN,O.length=0,_.length=0),e.logger.debug("setmode")},u.createConstruction=function(t){m.active(),N=t,z.length=0,O.length=0,_.length=0;for(var o=n.fragSet,r=o.uuids,i=[],a=0,s=r.length;a<s;++a){var c=r[a],u=o.uuid2fragid.get(c);if(2==y.getState(u[0])){var d=y.getAttributeUUID(c);if(0==d.isSelected&&0==d.selectedBox.length)i.push(c);else if(1==d.isSelected)y.setState(u,1);else if(0==d.isSelected&&d.selectedBox.length>0){for(var h=d.selectedBox,p=[],f=0;f<h.length;++f){var v=l(h[f],255);n.overlayScene.add(v),p.push(v)}w.set(c,p)}}}q=i,e.logger.debug("createConstruction"),n.iterator.reset(),e.enableUp=!0,j=!0},u.submit=function(){var t={};t.constructionName=N;for(var o=c(z),r=0,i=o.length;r<i;++r){var a=o[r],s=n.fragSet.getBoundingBoxFromUuid(a.uuid);if(1==a.isAll)n.fragSet.getAttributeUUID(a.uuid).isSelected=!0;else if(0==a.isAll){var l=n.fragSet.getAttributeUUID(a.uuid).selectedBox;l.push(a.box);for(var u=new e.Box3,d=0;d<l.length;++d){var h=new e.Box3;h.setFromArray(l[d]),u.union(h)}u.max.x>=s.max.x&&u.max.y>=s.max.y&&u.max.z>=s.max.z&&u.min.x<=s.min.x&&u.min.y<=s.min.y&&u.min.z<=s.min.z&&(n.fragSet.getAttributeUUID(a.uuid).isSelected=!0)}}t.uuids=o;for(var r=0,i=b.length;r<i;++r)n.overlayScene.remove(b[r]);return b.length=0,w.forEach(function(e){for(var t=0;t<e.length;++t)n.overlayScene.remove(e[t])}),w.clear(),V.clear(),m.deActive(),e.logger.debug("submit"),t},u.input=function(){var t,r=n.highItertor.getFragIds(),i=n.fragSet;if(U==o.INTACK){var a=[];i.setState(r,1);for(var s=0;s<_.length;++s){var l=_[s];1!=i.getAttributeUUID(l).isSelected&&a.push({uuid:l,isAll:!0,box:[0,0,0,0,0,0]})}z.push(a),t="INTACK",L.push("intack")}else if(U==o.BROKEN){var a=[];i.setState(r,1);for(var s=0;s<_.length;++s){var l=_[s],c=i.getAttributeUUID(l);void 0==c&&e.logger.log("undefined"),void 0!=c&&1!=c.isSelected&&a.push({uuid:l,isAll:!0,box:[0,0,0,0,0,0]})}for(var s=0,u=O.length;s<u;++s)if(1!=i.getAttributeUUID(O[s].uuid).isSelected){var l=O[s].uuid,d=i.getBoundingBoxFromUuid(l);a.push({uuid:l,isAll:!1,box:O[s].box}),i.setState(n.fragSet.uuid2fragid.get(l),1);for(var h=n.fragSet.getAttributeUUID(l).selectedBox,p=new e.Box3,m=0;m<h.length;++m){var f=new e.Box3;f.setFromArray(h[m]),p.union(f)}var v=new e.Box3;if(v.setFromArray(O[s].box),p.union(v),p.max.x>=d.max.x&&p.max.y>=d.max.y&&p.max.z>=d.max.z&&p.min.x<=d.min.x&&p.min.y<=d.min.y&&p.min.z<=d.min.z)for(var g=w.get(l),x=0;x<g.length;++x)n.overlayScene.remove(g[x])}z.push(a);for(var s=0,u=b.length;s<u;++s)n.overlayScene.remove(b[s]);b.length=0,t="BROKEN",L.push("broken")}n.highItertor.clear(),n.highItertor.reset(),n.iterator.reset(),e.enableUp=!0,e.logger.debug("Input "+t)},u.peel=function(){for(var t=[],o=0,r=n.fragSet.uuids.length;o<r;++o){var i=n.fragSet.uuids[o];2==n.fragSet.getState(n.fragSet.uuid2fragid.get(i)[0])&&t.push(i)}F.push(t),e._selector.setMethod("peel",!0),e._selector.setMethod("peel",!1),L.push("peel")},u.preview=function(){var e=c(z);m.view({constructionName:N,uuids:e}),j=!1},u.view=function(){function t(e){var t,o=new THREE.Box3;1==e.isAll?(t=r.clone(),o=n.fragSet.getBoundingBoxFromUuid(e.uuid)):(t=i.clone(),o.setFromArray(e.box));var a=new THREE.BoxGeometry(o.max.x-o.min.x,o.max.y-o.min.y,o.max.z-o.min.z);return t.position.set((o.max.x+o.min.x)/2,(o.max.y+o.min.y)/2,(o.max.z+o.min.z)/2),t.geometry=a,t}var o,r=new THREE.Mesh,i=new THREE.Mesh;return function(a){o=a.uuids,r.material=new THREE.MeshBasicMaterial({color:65280,transparent:!0,opacity:.5}),i.material=new THREE.MeshBasicMaterial({color:255,transparent:!0,opacity:.5});for(var s=0,l=b.length;s<l;++s)n.overlayScene.remove(b[s]);b.length=0,w.forEach(function(e){for(var t=0;t<e.length;++t)n.overlayScene.remove(e[t])}),w.clear(),e.hideAll();for(var s=0,l=o.length;s<l;s++){var c=o[s],u=t(c);n.overlayScene.add(u),b.push(u),n.fragSet.setState(n.fragSet.uuid2fragid.get(c.uuid),2)}n.iterator.reset(),e.enableUp=!0}}(),u.cancle=function(){for(var e=0,t=q.length;e<t;++e)n.fragSet.setState(n.fragSet.uuid2fragid.get(q[e]),2);O.length=0,_.length=0,V.clear();for(var e=0;e<z.length;++e)for(var o=0;o<z[e].length;++o){var r=z[e][o].uuid;y.getAttributeUUID(r).isSelected=!1}z.length=0;for(var e=0,t=b.length;e<t;++e)n.overlayScene.remove(b[e]);b.length=0,w.forEach(function(e){for(var t=0;t<e.length;++t)n.overlayScene.remove(e[t])}),w.clear(),m.deActive(),n.iterator.reset()},u.getValue=function(t){for(var o=t.uuids,r=n.fragSet,i=new e.Box3,a={},s=0,l=o.length;s<l;++s){var c=n.fragSet.uuid2fragid.get(o[s].uuid),u=o[s].uuid,d=r.getAttributeUUID(u),h=d.material;void 0==h&&(h="\u6df7\u51dd\u571f");var p=a[h];void 0==p&&(p={},p.rownum=0);var m=d.specification,f=p[m];void 0==f&&(f={},f.rownum=0);var v=d.category,g=f[v];void 0==g&&(g={},g.rownum=0);var x=d.name;if(1==o[s].isAll)g[x+"-"+String(s)]=[r.getValue(u,"\u4f53\u79ef")];else{i.setFromArray(o[s].box);for(var y=0,A=0;A<c.length;++A)y+=r.getInsectValue(c[A],i,"\u4f53\u79ef");g[x+"-"+String(s)]=[y.toFixed(2)]}g.rownum++,p.rownum++,f.rownum++,f[v]=g,p[m]=f,a[h]=p}return a},u}return __extends(n,r),n.prototype.vector3InArray=function(e,t){for(var o=0,r=e.length;o<r;++o)if(1==e[o].equals(t))return!0;return!1},n.prototype.createPoints=function(t,o){for(var r=t.geometry.attributes.position.array,n=new THREE.Geometry,i=[],a=0,s=r.length;a<s;a+=8){var l=new e.Matrix4;o.fragSet.getMatrix(t.fragId,l);var c=new e.Vector3(r[a],r[a+1],r[a+2]).applyMatrix4(l);0==this.vector3InArray(i,c)&&(n.vertices.push(c),i.push(c))}return n},n.prototype.bindingVertex=function(o,r,n){for(var i=0,a=1e5,s=0,l=o.length;s<l;++s)if(n==t.zMode){var c=new e.Vector2(o[s].x,o[s].y).distanceTo(new e.Vector2(r.x,r.y));c<=a&&(a=c,i=s)}else if(n==t.yMode){var c=new e.Vector2(o[s].x,o[s].z).distanceTo(new e.Vector2(r.x,r.z));c<=a&&(a=c,i=s)}return o[i]},n.prototype.createText=function(t,o){var r=new THREE.Geometry,n={size:.5,height:.1,font:e.getMicroYaHeiFont(),curveSegments:10},i=new THREE.TextGeometry("( "+String((t.x/3.2808399).toFixed(2))+" "+String((t.y/3.2808399).toFixed(2))+" "+String((t.z/3.2808399).toFixed(2))+" )",n);i.center(),r.merge(i,(new e.Matrix4).makeTranslation(0,.25,0));var a=new THREE.TextGeometry("( "+String((o.x/3.2808399).toFixed(2))+" "+String((o.y/3.2808399).toFixed(2))+" "+String((t.z/3.2808399).toFixed(2))+" )",n);return a.center(),r.merge(a,(new e.Matrix4).makeTranslation(0,-.25,0)),r},n=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],n)}(e.BaseControl);e.ConstructionSectionControl=r}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){function r(e,t){return t.setFromCamera(e,o.camera),t.ray.origin.clone().add(t.ray.direction)}var n=t.call(this)||this,i=n,a=(new e.Vector2,new e.Vector2),s=(o.dom,new e.Raycaster),l=new THREE.Line,c=new THREE.Line,u=new THREE.LineBasicMaterial({color:65280});l.material=u,c.material=u;var d=new THREE.Mesh;return d.material=new e.MeshPhongMaterial({color:16711680,transparent:!0,opacity:.7}),n.getName=function(){return"VertexControl"},n.regist=function(){e.container.style.cursor="move",o.overlayScene.add(l),o.overlayScene.add(c),o.overlayScene.add(d)},n.unRegist=function(){e.container.style.cursor="default",o.overlayScene.remove(l),o.overlayScene.remove(c),o.overlayScene.remove(d)},n.mouseMove=function(){return function(t){a.x=t.offsetX/o.dom.offsetWidth*2-1,a.y=-t.offsetY/o.dom.offsetHeight*2+1;var n=r(a,s),u=new THREE.Geometry;u.vertices.push(new e.Vector3(-1e3,n.y,0),new e.Vector3(1e3,n.y,0)),l.geometry=u;var h=new THREE.Geometry;h.vertices.push(new e.Vector3(n.x,-1e3,0),new e.Vector3(n.x,1e3,0)),c.geometry=h;var p=i.bindingVertex(s,o,n);d.geometry=null!=p?i.createText(p,n):new THREE.Geometry,d.position.copy(n),e.enableUp=!0}}(),n}return __extends(o,t),o.prototype.vector3InArray=function(e,t){for(var o=0,r=e.length;o<r;++o)if(1==e[o].equals(t))return!0;return!1},o.prototype.bindingVertex=function(t,o,r){var n=[],i=o.fragSet,a=0,s=1e5;if(i.raycast(t,n),n.length>0){o.highItertor.reverse();for(var l=i.getMesh(n[0]),c=this.getVertexs(l),u=0,d=c.length;u<d;++u){var h=new e.Vector2(c[u].x,c[u].y).distanceTo(new e.Vector2(r.x,r.y));h<=s&&(s=h,a=u)}return c[a]}return null},o.prototype.createText=function(t,o){var r=new THREE.Geometry,n={size:.5,height:.1,font:e.getMicroYaHeiFont(),curveSegments:10},i=new THREE.TextGeometry("( "+String((t.x/3.2808399).toFixed(2))+" "+String((t.y/3.2808399).toFixed(2))+" )",n);i.center(),r.merge(i,(new e.Matrix4).makeTranslation(0,.25,0));var a=new THREE.TextGeometry("( "+String((o.x/3.2808399).toFixed(2))+" "+String((o.y/3.2808399).toFixed(2))+" )",n);return a.center(),r.merge(a,(new e.Matrix4).makeTranslation(0,-.25,0)),r},o.prototype.getVertexs=function(t){for(var o=t.geometry.attributes.position.array,r=[],n=0,i=o.length;n<i;n+=8){var a=new e.Vector3(o[n],o[n+1],o[n+2]);this.vector3InArray(r,a)||r.push(a)}return r},o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.VertexControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this)||this;r.objectsMap=new Map,r.objectName=0,r._placeNumber=4;var n=r,i=null,a=null,s=0,l=new e.Box3,c=new e.Box3,u=void 0,d=new e.Vector2,h=new e.Vector2,p=new e.Raycaster,m="single",f=n.createArror(),v=new e.ObjectAnimate(f),g=new e.Formula;v.setTransformFormula(g);var x=null,y=new THREE.Line(void 0,new THREE.LineBasicMaterial({color:16776960})),A=new THREE.Mesh(new THREE.TorusGeometry(10,.001,128,128),new THREE.MeshBasicMaterial({color:16776960,wireframe:!0})),b=new THREE.Mesh(new THREE.TorusGeometry(10,.001,128,128),new THREE.MeshBasicMaterial({color:16776960,wireframe:!0})),w=0,E=void 0;return g.setVelocity(5),n.regist=function(){e.cons.getControls().ClickControl.deActive(),o.overlayScene.add(f),null!=a&&(o.overlayScene.add(a),e._objectAnimate.length=0,e._objectAnimate.push(v)),void 0==u&&(u=e.cons.getControls().LoadControl)},n.unRegist=function(){e.enableUp=!0,o.iterator.reset(),e.cons.getControls().ClickControl.active(),e._objectAnimate.length=0,o.overlayScene.remove(f),o.overlayScene.remove(a),o.overlayScene.remove(A),o.overlayScene.remove(b)},n.getHotKey=function(){return{hotkey:"ctr+9",needLongPress:!1}},n.getName=function(){return"DragControl"},n.leftButtonDown=function(){function t(t){if(-1===t){for(var r=e.cons.getControls().OperateObject,a=0;a<v.length;++a){var l=new THREE.BoxHelper(v[a],new THREE.Color(65280));n.objectsMap.set(v[a].id,{boxHelper:l,object:v[a],point:n.getPoint(l),type:x,sceneName:"scene"}),o.overlayScene.remove(v[a]),o.scene.add(v[a])}return v.length=0,o.iterator.reset(),void r.upDate()}for(var a=0;a<v.length;++a)o.overlayScene.remove(v[a]);v.length=0,e.isNumber(t)||(t=4),c=A.position,h=b.position;for(var u=(new e.Vector3).copy(h).sub(c).divideScalar(t-1),a=0;a<t;++a)null!=i&&(p=(new THREE.Object3D).copy(i),p.position.copy(c).add((new e.Vector3).copy(u).multiplyScalar(a)),o.overlayScene.add(p),p.position.z+=s/2,v.push(p));e.enableUp=!0}function r(){o.overlayScene.remove(A),o.overlayScene.remove(b),o.overlayScene.remove(y),y.geometry=new e.Geometry}var l=new e.Vector2,c=null,h=null,p=null,v=[];return n.placeObject=t,n.removeOverlay=r,function(e){d.set(e.clientX,e.clientY),w++,l.x=e.offsetX/o.dom.offsetWidth*2-1,l.y=-e.offsetY/o.dom.offsetHeight*2+1,"continus"==m&&(o.control.enabled=!1,1===w?(o.overlayScene.remove(a),o.overlayScene.remove(f),E=b,o.overlayScene.add(b),o.overlayScene.add(y),y.geometry=new THREE.Geometry):w>=2&&(w=0,E=void 0,t(n._placeNumber),u.removeWind(u),u.addContinusDiv(u),o.control.enabled=!0,n.deActive()))}}(),n.leftButtonUp=function(e){h.set(e.clientX,e.clientY),"continus"==m&&(o.control.enabled=!0)},n.leftButtonClick=function(t){var r=e.cons.getControls().OperateObject;if(d.equals(h)&&null!=a&&null!=i&&(e.logger.debug(m),"single"==m)){o.overlayScene.remove(a),o.scene.add(i),a.material.color.setRGB(0,1,0),n.objectsMap.set(i.id,{boxHelper:a,object:i,point:n.getPoint(a),type:x,sceneName:"scene"}),r.upDate(),o.iterator.reset(),e.enableUp=!0;var s=(new THREE.Object3D).copy(i);n.setObject(s,l,x,!0),o.overlayScene.add(a)}},n.mouseMove=function(){function t(){var t=p.ray.origin,o=p.ray.direction,r=new e.Vector3;if(0!=o.z){var n=(l.z-t.z)/o.z;r.x=t.x+o.x*n,r.y=t.y+o.y*n,r.z=l.z}return r}var r=new e.Vector2,n=void 0,l=new e.Vector3;return function(u){if(null!=i&&null!=a){if(r.x=u.offsetX/o.dom.offsetWidth*2-1,r.y=-u.offsetY/o.dom.offsetHeight*2+1,p.setFromCamera(r,o.camera),null!=(n=o.fragSet.raycast(p,void 0))){a.position.copy(n.point).add(new e.Vector3(0,0,s/2)),c.setFromObject(a);var d=c.getCenter();if(d.sub(a.position),a.position.x-=d.x,a.position.y-=d.y,i.position.copy(a.position),f.position.x=n.point.x,f.position.y=n.point.y,v.setHeight((new e.Vector3).copy(i.position).add(new e.Vector3(0,0,s)).z),l.copy(n.point),void 0!=E){E.position.copy(n.point);var h=new THREE.Geometry;h.vertices.push(A.position,b.position),y.geometry=h}}else{var m=t();a.position.copy(m).add(new e.Vector3(0,0,s/2)),c.setFromObject(a);var d=c.getCenter();if(d.sub(a.position),a.position.x-=d.x,a.position.y-=d.y,i.position.copy(a.position),f.position.x=m.x,f.position.y=m.y,v.setHeight((new e.Vector3).copy(i.position).add(new e.Vector3(0,0,s)).z),void 0!=E){E.position.copy(m);var h=new THREE.Geometry;h.vertices.push(A.position,b.position),y.geometry=h}}e.enableUp=!0}}}(),n.keyDown=function(e){"z"==e.key?n.setModel("single"):"x"==e.key&&n.setModel("continus")},n.setObject=function(t,r,c,u){i=t,x=c,l.copy(r),o.overlayScene.remove(a);var d=a;if(a=new e.BoxHelper(r,new THREE.Color(16776960)),null!=d&&a.position.copy(d.position),void 0!=i){var h=r;s=h.max.z-h.min.z;var p=Math.min(h.max.x-h.min.x,h.max.y-h.min.y);f.scale.set(p/4,p/4,p/4),g.setStartPoint((new e.Vector3).copy(i.position).add(new e.Vector3(0,0,s))),g.setEndPoint((new e.Vector3).copy(i.position)),g.setVelocity(s),f.position.copy((new e.Vector3).copy(i.position).add(new e.Vector3(0,0,s))),g.setFlag(!0),i.name=String(n.objectName++)}u||(1==n.isActive&&o.overlayScene.add(a),a.position.set(0,0,0),e._objectAnimate.length=0,e._objectAnimate.push(v))},n.setModel=function(t){"single"===t?(o.overlayScene.remove(A),o.overlayScene.remove(b),o.overlayScene.remove(y)):"continus"===t&&(E=A,w=0,o.overlayScene.add(A),y.geometry=new THREE.Geometry,e.logger.log("continus")),m=t},n.backUp=function(){},n.delete=function(e){o.scene.remove(e),n.objectsMap.forEach(function(t,o){o==e.id&&n.objectsMap.delete(o)})},n.getObjects=function(){return n.objectsMap},r}return __extends(o,t),o.prototype.createArror=function(){var e=new THREE.Object3D,t=new THREE.CylinderGeometry(1,1,4,32,32),o=new THREE.ConeGeometry(2,1,32,32),r=new THREE.MeshBasicMaterial({color:16777215}),n=new THREE.Mesh(t,r);n.rotateX(Math.PI/2);var i=new THREE.Mesh(o,r);return i.rotateX(-Math.PI/2),i.position.z=-2.5,e.add(n),e.add(i),e},o.prototype.getPoint=function(t){var o=new e.Box3;o.setFromObject(t);var r=new THREE.SphereGeometry(1,32,32),n=new THREE.MeshBasicMaterial({color:255}),i=new e.Mesh(r,n);return i.position.copy(o.getCenter()),i.position.z=o.min.z,i},o.prototype.setPlaceNumber=function(e){this._placeNumber=e,this.placeObject(this._placeNumber)},o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.DragControl=t}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function e(){this.actions=[],this.params=[]}return e.prototype.push=function(e,t){this.actions.push(e),this.params.push(t)},e.prototype.pop=function(){return{action:this.actions.pop(),param:this.params.pop()}},e.prototype.length=function(){return this.actions.length},e}(),o=function(o){function r(r){var n=o.call(this)||this;n._model="move",n._downMose=new e.Vector2,n._upMouse=new e.Vector2,n._objectsMap=void 0,n._object=null,n._boxHelper=null,n._objectHeight=0,n._box=new e.Box3,n._mapObject=new Map,n._objects=[],n._rmVariable=void 0,n._selectObjects=new Map,n._selectObject=void 0,n._selectPoint=void 0,n._selectBoxHelper=void 0,n._selectObjectHeight=0,n._loadControl=void 0,n._selectorType=void 0,n._fliterTypes=new Set,n._fliterMode=null,n._line=new THREE.Line(void 0,new THREE.LineBasicMaterial({color:16711680})),n._geometry=new e.Geometry,n._pointPos=new Map,n._backUp=new t,n._param=void 0,n._spoint=void 0,n.setParam=function(){function t(){switch(r._model){case"move":case"fluctuation":r._param={objects:[],prePos:[],postPos:[]};break;case"rotation":r._param={objects:[],preRot:[],postRot:[]};break;case"scale":r._param={objects:[],preSca:[],postSca:[]};break;case"delete":r._param={objects:[],boxHelpers:[],points:[],type:""}}}function o(t){switch(r._model){case"move":case"fluctuation":r._selectObjects.has(r._spoint.id)?r._selectObjects.forEach(function(o,n){"pre"===t?(r._param.objects.push(o),r._param.prePos.push((new e.Vector3).copy(o.position))):"post"===t&&r._param.postPos.push((new e.Vector3).copy(o.position))}):"pre"===t?(r._param.objects.push(r._spoint),r._param.prePos.push((new e.Vector3).copy(r._spoint.position))):"post"===t&&r._param.postPos.push((new e.Vector3).copy(r._spoint.position));break;case"rotation":r._selectObjects.has(r._spoint.id)?r._selectObjects.forEach(function(o,n){"pre"===t?(r._param.objects.push(o),r._param.preRot.push((new e.Euler).copy(o.rotation))):"post"===t&&r._param.postRot.push((new e.Euler).copy(o.rotation))}):"pre"===t?(r._param.objects.push(r._spoint),r._param.preRot.push((new e.Euler).copy(r._spoint.rotation))):"post"===t&&r._param.postRot.push((new e.Euler).copy(r._spoint.rotation));break;case"scale":if(r._selectObjects.has(r._spoint.id))r._selectObjects.forEach(function(e,o){if("pre"===t){r._param.objects.push(e);var n=r._mapObject.get(e).object;r._param.preSca.push(n.scale.x)}else if("post"===t){var n=r._mapObject.get(e).object;r._param.preSca.push(n.scale.x)}});else if("pre"===t){r._param.objects.push(r._spoint);var o=r._mapObject.get(r._spoint).object;r._param.preSca.push(o.scale.x)}else if("post"===t){var o=r._mapObject.get(r._spoint).object;r._param.preSca.push(o.scale.x)}break;case"delete":if(r._selectObjects.has(r._spoint.id))r._selectObjects.forEach(function(e,t){var o=r._mapObject.get(e).object,n=r._mapObject.get(e).boxHelper;r._param.points.push(e),r._param.objects.push(o),r._param.boxHelpers.push(n),r._param.type=r._objectsMap.get(o.id).type});else{r._param.points.push(r._spoint);var o=r._mapObject.get(r._spoint).object,n=r._mapObject.get(r._spoint).boxHelper;r._param.objects.push(o),r._param.boxHelpers.push(n),r._param.type=r._objectsMap.get(o.id).type}}}var r=void 0;return function(e,n,i){switch(r=n,1==i&&(n._spoint=n._selectPoint),e){case"new":t();break;case"pre":case"post":o(e)}}}();var i=n;i._rmVariable=r,i._line.geometry=i._geometry;var a=null,s=new e.Vector2,l=new e.Vector2,c=void 0;return i.leftButtonDown=function(){var t,o=new THREE.Raycaster,n=new e.Vector2;return function(l){if(s.set(l.offsetX,l.offsetY),null!=a)if(i.setParam("new",i),i.setParam("pre",i),"delete"===i._model){if(n.x=l.offsetX/r.dom.offsetWidth*2-1,n.y=-l.offsetY/r.dom.offsetHeight*2+1,o.setFromCamera(n,r.camera),t=o.intersectObjects(i._objects),t.length>0){if(i._selectObjects.has(t[0].object.id))i._selectObjects.forEach(function(e,t){var o=i._mapObject.get(e).object,n=i._mapObject.get(e).boxHelper,a=o.id;i.deleteObject(a),r.scene.remove(o),r.overlayScene.remove(n),r.overlayScene.remove(e)}),i._selectObjects.clear(),void 0!=i._loadControl&&i._loadControl.removeCancle();else{var u=t[0].object,d=i._mapObject.get(u).boxHelper,h=i._mapObject.get(u).object;i.deleteObject(h.id),r.overlayScene.remove(u),r.overlayScene.remove(d),r.scene.remove(h)}r.iterator.reset(),i._object=null,i.upDate(i.isActive)}i.pushBackUp()}else i._object=i._mapObject.get(a).object,r.scene.remove(i._object),r.overlayScene.add(i._object),i.changeScene("overlayScene",i._object.id),i._boxHelper=i._mapObject.get(a).boxHelper,r.control.enabled=!1,i._box.setFromObject(i._boxHelper),i.computeObjectHeight(),e.enableUp=!0,r.iterator.reset(),i._selectObjects.forEach(function(e,t){var o=i._mapObject.get(e).object;r.scene.remove(o),r.overlayScene.add(o),i.changeScene("overlayScene",o.id)});else!0===l.ctrlKey&&(r.control.enabled=!1,r.hubScene.add(i._line),c=(new e.Vector2).copy(s))}}(),i.leftButtonUp=function(){var t,o=new THREE.Raycaster,n=new e.Vector2;return function(a){l.set(a.offsetX,a.offsetY),s.equals(l)&&"delete"!==i._model?(n.x=a.offsetX/r.dom.offsetWidth*2-1,n.y=-a.offsetY/r.dom.offsetHeight*2+1,o.setFromCamera(n,r.camera),t=o.intersectObjects(i._objects),t.length>0&&(i._selectObjects.has(t[0].object.id)?i.resignSelect(t[0].object.id,r.overlayScene):(i.select(t[0].object,r.overlayScene),i.computerSelectObjectHeight()),e.enableUp=!0,r.overlayScene.remove(i._object),r.scene.add(i._object),i.changeScene("scene",i._object.id),
r.iterator.reset()),i._object=null):(null!=i._object&&(i._selectObjects.has(i._objectsMap.get(i._object.id).point.id)?(i._boxHelper.material.color.setHex(255),i._selectObjects.forEach(function(e,t){var o=i._mapObject.get(e).object;r.overlayScene.remove(o),r.scene.add(o),i.changeScene("scene",o.id)})):(r.overlayScene.remove(i._boxHelper),r.overlayScene.remove(i._object),i.changeScene("scene",i._object.id),r.scene.add(i._object)),i.setParam("pro",i),i.pushBackUp()),i._object=null,e.enableUp=!0,r.iterator.reset()),r.control.enabled=!0,void 0!=c&&(r.hubScene.remove(i._line),i._line.geometry=new e.Geometry,c=void 0)}}(),i.mouseMove=function(){function t(t){var o=new e.Geometry;d.setFromCamera(u,e.model.hubCamera),v.x=(c.x/r.dom.offsetWidth*2-1)*r.dom.offsetWidth/10,v.y=(-c.y/r.dom.offsetHeight*2+1)*r.dom.offsetHeight/10,g.x=(t.offsetX/r.dom.offsetWidth*2-1)*r.dom.offsetWidth/10,g.y=(-t.offsetY/r.dom.offsetHeight*2+1)*r.dom.offsetHeight/10,x.x=v.x,x.y=g.y,y.x=g.x,y.y=v.y,o.vertices.push(v,x,g,y,v),i._line.geometry=o}function o(){var e=0,t=0,o=0,n=0;v.x>g.x?(e=v.x,t=g.x):(e=g.x,t=v.x),v.y>g.y?(o=v.y,n=g.y):(o=g.y,n=v.y),i._pointPos.forEach(function(a,s){a.x>=t&&a.x<=e&&a.y>=n&&a.y<=o&&(i.select(s,r.overlayScene),i._mapObject.get(s).boxHelper.material.color.setHex(255))})}function n(){r.camera;i._pointPos.forEach(function(e,t){i._pointPos.set(t,i.modelToScreenPos(t.position))})}function s(){var t=d.ray.origin,o=d.ray.direction,r=new e.Vector3;if(0!=o.z){var n=(f.z-t.z)/o.z;r.x=t.x+o.x*n,r.y=t.y+o.y*n,r.z=f.z}return r}var l,u=new e.Vector2,d=new e.Raycaster,h=new e.Vector3,p=[],m=null,f=new e.Vector3,v=new e.Vector3,g=new e.Vector3,x=new e.Vector3,y=new e.Vector3;return function(v){if(u.x=v.offsetX/r.dom.offsetWidth*2-1,u.y=-v.offsetY/r.dom.offsetHeight*2+1,void 0!=c&&(n(),t(v),o()),null!=i._object){if("scale"===i._model){i._object.scale.addScalar(-v.movementY/5),i._boxHelper.scale.addScalar(-v.movementY/5);var g=i._objectHeight;if(i._object.scale.x<.1&&i._object.scale.setScalar(.1),i._boxHelper.scale.x<.1&&i._boxHelper.scale.setScalar(.1),i.computeObjectHeight(),i._object.position.z+=(i._objectHeight-g)/2,i._boxHelper.position.z+=(i._objectHeight-g)/2,void 0!=this._loadControl&&void 0!=this._selectObject&&i._loadControl.setScale(i._selectObject.scale.x),i._selectObjects.has(a.id)){var x=new e.Box3;i._selectObjects.forEach(function(e,t){if(a.id!=t){var o=i._mapObject.get(e).object,r=i._mapObject.get(e).boxHelper;x.setFromObject(r);var n=(x.max.z-x.min.z)/2;r.scale.addScalar(-v.movementY/5),o.scale.addScalar(-v.movementY/5),o.scale.x<.1&&o.scale.setScalar(.1),r.scale.x<.1&&r.scale.setScalar(.1),x.setFromObject(r),r.position.z+=(x.max.z-x.min.z)/2-n,o.position.z+=(x.max.z-x.min.z)/2-n}})}}else if("fluctuation"==i._model)i._object.position.z+=-v.movementY/5,i._boxHelper.position.z+=-v.movementY/5,a.position.z+=-v.movementY/5,void 0!=this._loadControl&&void 0!=this._selectObject&&i._loadControl.setPosition(i._selectObject.position),i._selectObjects.has(a.id)&&i._selectObjects.forEach(function(e,t){a.id!=t&&(e.position.z+=-v.movementY/5,i._mapObject.get(e).boxHelper.position.z+=-v.movementY/5,i._mapObject.get(e).object.position.z+=-v.movementY/5)});else if(d.setFromCamera(u,r.camera),null!=(l=r.fragSet.raycast(d,void 0))){if(f.copy(l.point),"move"===i._model)h.copy(l.point).sub(i._object.position).add(new e.Vector3(0,0,i._objectHeight/2)),i._object.position.copy(l.point).add(new e.Vector3(0,0,i._objectHeight/2)),i._boxHelper.position.add(h),i._box.setFromObject(i._boxHelper),a.position.copy(i._box.getCenter()),a.position.z=i._box.min.z,void 0!=i._loadControl&&void 0!=i._selectObject&&i._loadControl.setPosition(i._selectObject.position),i._selectObjects.has(a.id)&&i._selectObjects.forEach(function(e,t){a.id!=t&&(e.position.add(h),i._mapObject.get(e).boxHelper.position.add(h),i._mapObject.get(e).object.position.add(h))});else if("rotation"===i._model){var y=(new e.Vector3).copy(l.point).sub(i._object.position);y.y>=0?y.x>0?i._object.rotation.z=Math.atan(y.y/y.x):y.x<0?i._object.rotation.z=Math.atan(y.y/y.x)+Math.PI:0==y.x&&(0==y.y?i._object.rotation.z=0:i._object.rotation.z=Math.PI/2):y.x>0?i._object.rotation.z=2*Math.PI+Math.atan(y.y/y.x):y.x<0?i._object.rotation.z=Math.PI+Math.atan(y.y/y.x):0==y.x&&(i._object.rotation.z=3*Math.PI/2),i._boxHelper.rotation.copy(i._object.rotation),a.rotation.copy(i._object.rotation),void 0!=this._loadControl&&void 0!=this._selectObject&&i._loadControl.setRotation(i._selectObject.rotation),i._selectObjects.has(a.id)&&i._selectObjects.forEach(function(e,t){a.id!=t&&(e.rotation.copy(i._object.rotation),i._mapObject.get(e).boxHelper.rotation.copy(i._object.rotation),i._mapObject.get(e).object.rotation.copy(i._object.rotation))})}}else if("move"===i._model){var y=s();h.copy(y).sub(i._object.position).add(new e.Vector3(0,0,i._objectHeight/2)),i._object.position.copy(y).add(new e.Vector3(0,0,i._objectHeight/2)),i._boxHelper.position.add(h),i._box.setFromObject(i._boxHelper),a.position.copy(i._box.getCenter()),a.position.z=i._box.min.z,void 0!=this._loadControl&&void 0!=this._selectObject&&i._loadControl.setPosition(i._selectObject.position),i._selectObjects.has(a.id)&&i._selectObjects.forEach(function(e,t){a.id!=t&&(e.position.add(h),i._mapObject.get(e).boxHelper.position.add(h),i._mapObject.get(e).object.position.add(h))})}}else if(d.setFromCamera(u,r.camera),p=d.intersectObjects(i._objects),p.length>0){a=p[0].object;var A=i._mapObject.get(a).boxHelper;a.material.color.setHex(16711680),i._selectObjects.has(a.id)?A.material.color.setHex(65280):r.overlayScene.add(A),m=A,i._spoint=a}else null!=m&&null!=a&&(i._selectObjects.has(a.id)?m.material.color.setHex(255):r.overlayScene.remove(m)),m=null,null!=a&&a.material.color.setHex(255),a=null;e.enableUp=!0}}(),i.regist=function(){r.overlayScene;void 0===i._loadControl&&(i._loadControl=e.cons.getControls().LoadControl),void 0==i._objectsMap&&(i._objectsMap=e.cons.getControls().DragControl.getObjects()),e.logger.debug(i._objectsMap),e.cons.getControls().ClickControl.deActive(),i.upDate(!0),e.enableUp=!0},i.unRegist=function(){var t=r.overlayScene;e.cons.getControls().ClickControl.active(),void 0!=i._objectsMap&&i._objectsMap.forEach(function(e,o){t.remove(e.point),t.remove(e.boxHelper)}),e.enableUp=!0},i.getHotKey=function(){return{hotkey:"ctr+0",needLongPress:!1}},i.getName=function(){return"OperateObject"},i.keyDown=function(e){"Delete"===e.key&&"delete"==i._model&&(i.setParam("new",i),i.setParam("pre",i),i._selectObjects.forEach(function(e,t){var o=i._mapObject.get(e).object,n=i._mapObject.get(e).boxHelper,a=o.id;i.deleteObject(a),r.scene.remove(o),r.overlayScene.remove(n),r.overlayScene.remove(e)}),i._selectObjects.clear(),void 0!=i._loadControl&&i._loadControl.removeCancle(),r.iterator.reset(),i._object=null,i.upDate(i.isActive),i.pushBackUp())},n}return __extends(r,o),r.prototype.computerSelectObjectHeight=function(){if(null!=this._selectObject&&null!=this._selectBoxHelper){this._selectBoxHelper.geometry.computeBoundingBox();var e=this._selectBoxHelper.geometry.boundingBox;this._selectObjectHeight=e.max.z-e.min.z}},r.prototype.computeObjectHeight=function(){if(null!=this._object&&null!=this._boxHelper){void 0==this._boxHelper.geometry.boundingBox&&this._boxHelper.geometry.computeBoundingBox();var e=this._boxHelper.geometry.boundingBox;this._objectHeight=(e.max.z-e.min.z)*this._boxHelper.scale.x}},r.prototype.addFilterTypes=function(e){this._fliterTypes.add(e),this.upDate(this.isActive)},r.prototype.deleteFilterTypes=function(e){this._fliterTypes.delete(e),this.upDate(this.isActive)},r.prototype.cancle=function(){var e=this;this._selectObjects.forEach(function(t,o){e.resignSelect(o,e._rmVariable.overlayScene)})},r.prototype.setPosition=function(t){var o=this;if(void 0!=this._selectObject){var r=this._selectObject.position,n=t.sub(r);this._selectObjects.forEach(function(e,t){var r=o._mapObject.get(e).object,i=o._mapObject.get(e).boxHelper;e.position.add(n),i.position.add(n),r.position.add(n)})}e.enableUp=!0,this._rmVariable.iterator.reset()},r.prototype.setRotation=function(t){var o=this;void 0!=this._selectObject&&this._selectObjects.forEach(function(e,r){var n=o._mapObject.get(e).object,i=o._mapObject.get(e).boxHelper;e.rotation.copy(t),n.rotation.copy(t),i.rotation.copy(t)}),e.enableUp=!0,this._rmVariable.iterator.reset()},r.prototype.setScale=function(t){var o=this;if(void 0!=this._selectObject){var r=new e.Box3;this._selectObjects.forEach(function(e,n){var i=o._mapObject.get(e).object,a=o._mapObject.get(e).boxHelper;r.setFromObject(a);var s=(r.max.z-r.min.z)/2;a.scale.setScalar(t),i.scale.setScalar(t),i.scale.x<.1&&i.scale.setScalar(.1),a.scale.x<.1&&a.scale.setScalar(.1),r.setFromObject(a),a.position.z+=(r.max.z-r.min.z)/2-s,i.position.z+=(r.max.z-r.min.z)/2-s})}e.enableUp=!0,this._rmVariable.iterator.reset()},r.prototype.setFilterMode=function(e){this._fliterMode=e,this.upDate(this.isActive)},r.prototype.setSelectType=function(e){this._selectorType=e,this.upDate(this.isActive)},r.prototype.modelToScreenPos=function(t){var o=(new e.Vector3).copy(t);return o.project(this._rmVariable.camera),o.x*=this._rmVariable.dom.offsetWidth/10,o.y*=this._rmVariable.dom.offsetHeight/10,o.z=0,o},r.prototype.upDate=function(t){this._mapObject.clear(),this._pointPos.clear(),this._objects.length=0;var o=this;void 0==this._objectsMap&&(this._objectsMap=e.cons.getControls().DragControl.getObjects()),this._objectsMap.forEach(function(e){o._mapObject.set(e.point,{boxHelper:e.boxHelper,object:e.object}),null==o._fliterMode?(o._objects.push(e.point),o._pointPos.set(e.point,o.modelToScreenPos(e.point.position)),!0===t&&o._rmVariable.overlayScene.add(e.point)):"select"==o._fliterMode?void 0!=o._selectorType?e.type==o._selectorType?(o._objects.push(e.point),o._pointPos.set(e.point,o.modelToScreenPos(e.point.position)),!0===t&&o._rmVariable.overlayScene.add(e.point)):!0===t&&o._rmVariable.overlayScene.remove(e.point):(o._objects.push(e.point),o._pointPos.set(e.point,o.modelToScreenPos(e.point.position)),!0===t&&o._rmVariable.overlayScene.add(e.point)):"filter"==o._fliterMode&&(o._fliterTypes.has(e.type)?!0===t&&o._rmVariable.overlayScene.remove(e.point):(o._objects.push(e.point),o._pointPos.set(e.point,o.modelToScreenPos(e.point.position)),!0===t&&o._rmVariable.overlayScene.add(e.point)))}),e.enableUp=!0},r.prototype.changeScene=function(e,t){this._objectsMap.get(t).sceneName=e},r.prototype.deleteObject=function(e){var t=this;t._mapObject.clear(),t._objects.length=0,t._objectsMap.forEach(function(o,r){r===e?(t._objectsMap.delete(r),void 0!=t._selectObject&&t._selectObject.id===o.object.id&&(t._selectObject=void 0,t._selectBoxHelper=void 0,t._selectPoint=void 0,t.setDiv("remove"))):(t._mapObject.set(o.point,{boxHelper:o.boxHelper,object:o.object}),t._objects.push(o.point))})},r.prototype.resignSelect=function(e,t){var o=this,r=o._selectObjects.get(e);o._mapObject.get(r).boxHelper.material.color.setHex(65280),t.remove(o._mapObject.get(r).boxHelper),o._selectObjects.delete(e),void 0!=this._loadControl&&this._loadControl.setNo(this._selectObjects.size),0===o._selectObjects.size&&void 0!=this._loadControl&&this._loadControl.removeCancle(),this._rmVariable.iterator.reset(),void 0!=o._selectObject&&o._mapObject.get(r).object.id===o._selectObject.id&&(o._selectObject=void 0,o._selectBoxHelper=void 0,o._selectPoint=void 0,o.setDiv("remove"))},r.prototype.setDiv=function(e){if("add"===e&&void 0!=this._loadControl)switch(this._model){case"move":case"fluctuation":this._loadControl.addPsotion(),void 0!=this._loadControl&&void 0!=this._selectObject&&this._loadControl.setPosition(this._selectObject.position);break;case"scale":this._loadControl.addScale(),void 0!=this._loadControl&&void 0!=this._selectObject&&this._loadControl.setScale(this._selectObject.scale.x);break;case"rotation":this._loadControl.addRotation(),void 0!=this._loadControl&&void 0!=this._selectObject&&this._loadControl.setRotation(this._selectObject.rotation)}else if("remove"===e&&void 0!=this._loadControl)switch(this._model){case"move":case"fluctuation":this._loadControl.removePosition();break;case"scale":this._loadControl.removeScale();break;case"rotation":this._loadControl.removeRotation()}},r.prototype.select=function(e,t){this._selectObjects.set(e.id,e),this._selectObjects.size>0&&void 0!=this._loadControl&&(this._loadControl.addCancle(),this._loadControl.setNo(this._selectObjects.size)),t.add(this._mapObject.get(e).boxHelper),void 0==this._selectObject&&(this._selectObject=this._mapObject.get(e).object,this._selectPoint=e,this._selectBoxHelper=this._mapObject.get(e).boxHelper,this.setDiv("add"))},r.prototype.pushBackUp=function(){this._backUp.push(this._model,this._param),this._backUp.length()>0&&void 0!=this._loadControl&&this._loadControl.addBack()},r.prototype.backUp=function(){var t=this._backUp.pop(),o=t.action,r=t.param,n=new e.Box3;switch(e.logger.debug("backup"),o){case"move":case"fluctuation":for(var i=0;i<r.objects.length;++i){var a=r.objects[i],s=this._mapObject.get(a).object,l=this._mapObject.get(a).boxHelper,c=r.prePos[i];n.setFromObject(l),a.position.copy(c),s.position.copy(c).z+=(n.max.z-n.min.z)/2,l.position.copy(c).z+=(n.max.z-n.min.z)/2,e.enableUp=!0,this._rmVariable.iterator.reset(),void 0==this._loadControl&&(this._loadControl=e.cons.getControls().LoadControl),s.id==this._selectObject.id&&(this._loadControl.setPosition(s.position),e.logger.debug("position backup"))}break;case"rotation":for(var i=0;i<r.objects.length;++i){var a=r.objects[i],s=this._mapObject.get(a).object,l=this._mapObject.get(a).boxHelper,c=r.preRot[i];a.rotation.copy(c),s.rotation.copy(c),l.rotation.copy(c),e.enableUp=!0,this._rmVariable.iterator.reset(),void 0==this._loadControl&&(this._loadControl=e.cons.getControls().LoadControl),s.id==this._selectObject.id&&this._loadControl.setRotation(s.rotation)}break;case"scale":for(var i=0;i<r.objects.length;++i){var a=r.objects[i],s=this._mapObject.get(a).object,l=this._mapObject.get(a).boxHelper,c=r.preSca[i];n.setFromObject(l);var u=(n.max.z-n.min.z)/2;s.scale.setScalar(c),l.scale.setScalar(c),n.setFromObject(l),s.position.z+=(n.max.z-n.min.z)/2-u,l.position.z+=(n.max.z-n.min.z)/2-u,e.enableUp=!0,this._rmVariable.iterator.reset(),void 0==this._loadControl&&(this._loadControl=e.cons.getControls().LoadControl),s.id==this._selectObject.id&&this._loadControl.setScale(s.scale.x)}break;case"delete":for(var i=0;i<r.objects.length;++i){var a=r.points[i],s=r.objects[i],l=r.boxHelpers[i];this._rmVariable.scene.add(s),this._rmVariable.overlayScene.add(a),void 0==this._objectsMap&&(this._objectsMap=e.cons.getControls().DragControl.getObjects()),l.material.color.setHex(65280),this._objectsMap.set(s.id,{boxHelper:l,object:s,point:a,type:r.type,sceneName:"scene"}),this.upDate(this.isActive),this.isActive&&(this._rmVariable.iterator.reset(),e.enableUp=!0)}}0==this._backUp.length()&&void 0!=this._loadControl&&(this._loadControl.removeBack(),this._loadControl.mouseout(this._loadControl))},r.prototype.setModel=function(e){void 0!=this._selectObject&&this.setDiv("remove"),this._model=e,void 0!=this._selectObject&&this.setDiv("add")},r=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],r)}(e.BaseControl);e.OperateObject=o}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this)||this;r._mode="drag",r._w=document.createElement("div"),r.wind=document.createElement("div"),r.dragButton=document.createElement("div"),r.operatorButton=document.createElement("div"),r._libDivs=document.createElement("div"),r._modelDivs=document.createElement("div"),r._operateDivs=document.createElement("div"),r._text=document.createElement("div"),r._textP=document.createElement("span"),r._filter=document.createElement("div"),r._filterDivs=document.createElement("div"),r._url=null,r._positionDiv=document.createElement("div"),r.positionDiv={title:{div:document.createElement("span"),left:"8px",top:"0px",width:"117.5px",height:"20px",text:"Position"},x_v:{div:document.createElement("span"),left:"8px",top:"20px",width:"117.5px",height:"20px",text:"100 X"},y_v:{div:document.createElement("span"),left:"8px",top:"47.5px",width:"117.5px",height:"20px",text:"100 Y"},z_v:{div:document.createElement("span"),left:"8px",top:"75px",width:"117.5px",height:"20px",text:"100 Z"},x_i:{div:document.createElement("input"),left:"8px",top:"20px",width:"117.5px",height:"20px"},y_i:{div:document.createElement("input"),left:"8px",top:"47.5px",width:"117.5px",height:"20px"},z_i:{div:document.createElement("input"),left:"8px",top:"75px",width:"117.5px",height:"20px"},mouseover:function(e){},mouseout:function(e){},input:function(e){}},r._rotationDiv=document.createElement("div"),r.rotationDiv={title:{div:document.createElement("span"),left:"8px",top:"0px",width:"227px",height:"20px",text:"Rotation"},rotationX:{div:document.createElement("div"),left:"25px",top:"20px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},rotationY:{div:document.createElement("div"),left:"25px",top:"47.5px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},rotationZ:{div:document.createElement("div"),left:"25px",top:"75px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},rotationX_S:{div:document.createElement("div"),left:"25px",top:"20px",width:"92.5px",height:"20px",text:"Pitch  ",mouseover:function(e){},mouseout:function(e){}},rotationY_S:{div:document.createElement("div"),left:"25px",top:"47.5px",width:"92.5px",height:"20px",text:"Yaw  ",mouseover:function(e){},mouseout:function(e){}},rotationZ_S:{div:document.createElement("div"),left:"25px",top:"75px",width:"92.5px",height:"20px",text:"Roll  ",mouseover:function(e){},mouseout:function(e){}}},r._scaleDiv=document.createElement("div"),r.scaleDiv={title:{div:document.createElement("span"),left:"8px",top:"0px",width:"227px",height:"20px",text:"Size"},scale:{div:document.createElement("div"),left:"25px",top:"20px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},scale_S:{div:document.createElement("div"),left:"25px",top:"20px",width:"26.16px",height:"20px",text:"Size  ",mouseover:function(e){},mouseout:function(e){}}},r._controlDiv=document.createElement("div"),r._continusDiv=document.createElement("div"),r.continusDiv={continus:{div:document.createElement("div"),left:"15px",top:"10px",width:"300px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},continus_S:{div:document.createElement("div"),left:"15px",top:"10px",width:"300px",height:"20px",mouseover:function(e){},mouseout:function(e){}},text:{div:document.createElement("span"),left:"20px",top:"10px",height:"16px",text:"\u6784\u4ef6\u6570\u91cf: "},confire:{div:document.createElement("div"),right:"10px",top:"7.5px",width:"38px",height:"38px",mouseover:function(e){},mouseout:function(e){},click:function(e){},image:"data:image/png;base64,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"},cancle:{div:document.createElement("div"),right:"10px",top:"52.5px",width:"38px",height:"38px",mouseover:function(e){},mouseout:function(e){},click:function(e){},image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAPtSURBVFhHzVZLSxtRFJ6JsYk1JmlMTGpVqP8h/hvBH+DOhuxdasVf4MKN6C5UQW0LDd2IioJWXIkKsSBKW3DhJprbe86cMzlz55HoKl/4cl/ndc99jR2P28oScBtQsZ0qggZs6vMoAUx5gE+IQHJQmCIx6JBEmFIAEYjyedYIsh4BW/+CxGMBph0YA9h0nXbhGUTYBpREznDItKwYlT0DXDKcDRMQEDoPIUQDZuwRZzvQyXJCXnaxGBPgLJnsFcqhYG0AW2WwHRMcgc9+WwH+ccm4C7v1H5ZQ1dOvfKoin5otq/7jp5UvFDxGuYp7gxUJmUzWqtW+WE9PLWth4TMykUjoEdjSjriin4u+PlvB0Y/3xwShbaulpSVl4u7uThVLRQV6SK0LRBtUB+Zy79TZ2RlptbG6uqoGBhIeWdaH0pKdOAAB6bJSqZAJPzgoNzChD4GEBcNYXFz06TF77pT5MsSELETh/v4eOTb2wV2+ks7YxcUFMgqPj4+ujunXHxAJLS8vk3o0ms2mGh19r4aHc+r29pZ6o7G2tub1JwLDgHBD8QANptMptbe3Ryai0Wg01Pn5ObWicXV1hcFzAKZfGyrmcWWkUkPWt6/fsV4ul7F8La6vr7Gcmipbf//9ce4L6ZdPvowuiJlMGnlwcEBzfDl0MKpQyCPRbpg/3d/Dp6xDptLpIbW7u0tz7h5HR0fePQMM8kP+Oy6ZZDL5Rm1vb5Orzjg+PlZDQ4OoCweHifZMn9SOuRsLNpV4UnzQY4lE0iqVStTRGSCbTA5g3WfePEjc9kRJkfpmo1ksjajLy0uae/fAy3NcX57ClrRr0oY/is0DDrhQKGJ5cnKq6/qlfwVarZY1OfkR6zc3DSwDoZ323CmLzFA+P2Kdnv7C9muzw4AsASBTN791lsCruY8AYSespPdMpweWUa/XVa1Wo1Y0np+f1cTEuG8fwfcXlKHHfmNjg0xEAzZ6NptRg6m3Xb99MIF43Pnukj4hqHZAIjAQ7PRyw4UHzOWyri5cnjs7O8gowOcH+HAIgTnBwcehc+yNgIDT09Ok7sf+/r7KZPUbpyl1gJAp4ObmJkn7MTc359GR7L23zF3HgCzNzs7SnNo4PDzEzHDKWRYo2ymdpa2tLdJqY35+3qNjMviLkYICBzMzM8iHhwe1vr6uhvM5NxhJlpdt+MhbWVnBQKrVKrL/TV/blyT59N1DcDXIDr4qzD5uy6vEY+ilIOWYawVKzTCj4Fg6N9uhCDJIvjwgg85rbwxKR1JXliZfBHYQoNhzp8wJiNLlSQ2DUhCZBRgPEwiyGQIMATe1NEYGoPD4MB2ajmDcVDJlguCRt6z/90BrX0HDI5IAAAAASUVORK5CYII="},spaceBew:{div:document.createElement("input"),left:"15px",top:"40px",height:"20px"},spaceBew_no:{div:document.createElement("input"),left:""},attach:function(){},dispose:function(){}},r.clickMap={lib:new Map,model:new Map,filter:new Map},r.imgSrc={dragImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAABSUlEQVRIieWVPY6CQBiGB3YTqEiICQ2xo6DgADRWVF7AA6zN2hghIaGEG0gllWews/MCxprQUNhQYIw/hbF615msu24UdzcRLHiTJ2FmvpknMxOAI4SAPCH8M6T1FL/eG3Qch6xWKzKdTkme5w8Vv5zwiwYFQSCTyYS0221yPB7JZrNhPCoogud5RFGEc9I0hed5MAyjcM4/uF+gaRrW6zUuk2UZRqMRWq1WeWJKEAS4ld1uhzAMyxOrqookSa7E2+0WnU6nPDHFtu0rMb3/Uo+aIssyFosFEx4OB5xeL/Y8GAy+6zjuFy7XvFVAuJ/iz/63bhf7/R7vvR5M08RyuWRy3/fL2zFFFEVYlvXV1nUdcRwz+XA4LE98i2azifl8zuTj8RiSJFUjpiiKgtlsxuT9fr86MaXRaMB13T9/1bizverU739cP/EHVfvqFsTzP+wAAAAASUVORK5CYII=",operateImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAAYUlEQVRIiWP8DwQMdAaMQEx3S5nobeGAWcpCSAFylDMyMmKI4RKHiZFlKTYDcBmIy1HoYECCdzT1wgE5ZcegjFMWcKwywFIjHaKXcTQhIYFhlJCIADCXk1L24gOjCYmmAACDEiod0z8TBgAAAABJRU5ErkJggg==",buildImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAMQSURBVFhH7ZfPL2NRFMe/o/GrqlSUoKkRJCIWLEgajbERxMKiuwYrG4smYoRYiJGICBsxCwtsRGJS3Uisxmb8CVpiYUNItX7FRFNKMO+c3CZmItPe914yzcRn03vPVT7ePefc+z5UVVW9IIVgoUgkIqb/FpPJhDQxThnehRLxfwqlp6eLkXZ0EaqtrUV5ebmYaUMXIYfDge7ubjHThmahtrY2DA4OYnh4GJ9aW0VUPaqFTLm5GBsbw+TkJIxGI56envB1YQGdnZ1IS1P/f6r+ZuT2FisrKxgaGsLp6SkMBgNmZ2cRCATw/Pwsfkoe1UJNTU0YGRmB1+uFzWbj2MTEBOrr63msFlVCFouF//DBwQEODw9FFMjMzER7ezvW1tbwsaJCROVQJZSTkwO/34+6ujpUV1eLKBCNRtHY2Ii5uTmEzs5EVA5DQUHBl4eHBzFNTGlpKcbHx1GhPIH9/X00NDQgKyuL16ampnB/f8+iR0dHuLy85HiyZGRkyAtRwtJW2e129Pf3Q/m+WAFaWlp4uxYXF1FSUoJbJfEfHx/FamJUCfX19aGnp4dz5bUMQeXe3NyM4uJirraTkxOxkhwkJJVD1Ht+7OzAarUiPz8f4XD4t6QmqCfRVoZCIdTU1Iho8kgJvSjb9W19ncerq6sYHR2F2Wzm+Wump6exvLz85loipK6wn5Xjwaw8pfn5eVRWVnI10edbXF1dcbN0u93Y29sT0b9DV1gpIdqymFJFdG719vbyLyBisRh/Uh/a2trCxcUFnE4nZmZmeAs3Nzd5PRHSQnTvGRgYQEdHB+fR9fU1Xzt8Ph+XPp1neXl58Hg8vE6i9KSSRfqSb1Qa4o6S1CTV1dWF79vbcLlcWFpa4vKmoyM7O5s7eTAYlJKJIyX08+YGu7u7OD4+xvn5OXwbG1xRd3d3XOrUFOl8i0m0kT9RdXTEITGCtoq2iKBWQOJq0SQUJ1cpb8odPdBFyKI0ycLCQjHThi5CZWVlur156PZuX1RUxImuBV3f7bXKxNFNSC/ehRKRckJcZWKcAgC/AEnwEqRUPL/0AAAAAElFTkSuQmCC",structureImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAFjSURBVFhH7ZaxasJQFIb/tmiD1cUQIhIUxN3F2RcwOCdb9QEEt4wdzSNk1IJ7HiP1LSQ6ONglU0Da5HLAUqMnQm0t3A9Czjk3l3zcHMi5a7fbH7ghhFAURZT+LeVyGfcU3wxSiEMKcUghDinEIYU4/rfQZDLBarU6e7mui0KhQDsuJ7dQt9sVQhy2bcPzPCiKQpXLeKhWqy9xHFN6TLPZhGEY4iWVSoWq52m1Wuj1etA0DbVaDaVSCU/JaPG+29ET2RSLxex5KF0IggCqqlLl59hsNhgMBthut1Q5cHIeGo1GV5FJqdfrsCyLsmMyTyhtzmvTaDQoOpCeUKaQaZp4Hg4pS/oo2azruojTIw/XaxFzPCafvtPpUAa8LZfi/jqfw/d9EX/lpNB30saeTqfY7/dwHAdhGNIKz3g8Rr/fx2KxwGw2o2o2uYV+Cznk50EKcUghDinEIYU4pBCH+LlSfAMAnygdcmUaxSThAAAAAElFTkSuQmCC",waterImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAALySURBVFhH7ZZNSGJRFMf/Sl9ERDRFFEGboKhttpvItoFNoPtW06ZoYxC2iwgEl21aieBEULvW0SJcNLQNIgp0JqUPUFJrEtPm/a/XYciPd5/TI2H6wcN3rpd7/++cc889lsHBwRfUEUJQOp2W5vvS1tYGq3yvGz4E6fF/CmpsbBSPCqacsp6eHvT19aGzsxOjo6PQ9sDJyQmCwSDy+bycVQpP2T8Jam5uRm9vL7q6ujA0NISBgQHx29/fL8a5QZG9vT0sLy8jl8vJkVJqEtTS0gKn0wmbzYbh4WEhgmNWa2n0M5kMYrGY+P/w8BAej+ftPdTd3Y39/X0Rkr+5vr7Gz6sr/IhEcHNzg9PTU9zd3eHy8hKTdjvsk5NYXFx8ew91dHRgZ2dHJCnz4uzsDOfn57iKRpG8v0cymSzZdHp6Gg6HAwsLC8hms3K0FAoyfMqYN1zU7XZjZWUFfr8foVAIkXAYiUSirAeen5/R3t6udNIMC7JYLMhqGzw9PeHlRe1eLuaXynzDgrhoRhNTLTnLQa+aIojQO0YEUQxPnGmCVBcvwrkUpfIRNYWMiZs3IIgfkEqlpFWdmj1UrZ68hiHmU654vsawIHHKNPfntJOmCufH43FzQka4sJEcYh1iyExLaoZLZfGGhgZxj/FpamoS3tWjJkH8Yr0cmpqagtfrxdbWFjyrq38qvB6GBf3SkpOXZjXm5ubEleJyuWDXLlbb2Jhy3VISxDvo88SE2OjLzIwYo7BysCHjHfc6PI+Pj/KtOrqC2PX5fD5807q9tbU1rK+vY2RkBOkKdeWT1qy1trZKqwC7gYODA2lVR1fQ0tISZmdnpVWACV0pqb8fH2NzcxMPDw+iLwoEAvg6P4+w1g2ooNsPsfUcHx+XVgGGZHt7W1qlsACyhWXy397eKpcIpX7o6OhILEwuLi6wsbGB3d1dYVeCCRzVGjZ6SFVMEV0PsX6wf+Yvc4EbmUVNLayZ1NTCms2HID3qTpBIavleBwC/AUKfh6DO9GVYAAAAAElFTkSuQmCC",eleImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAQPSURBVFhH1ZdLLN17EMe/7fV+v+IZ1CskuiBu6jbRRlmwY0E9KooWCxLaqIggbliwqIWFtNGFhUTYEIKIEGm1C5F4VCKRNhGJiHim3oTb/0x/Z1H/x/mfc2573c/mzMzvz5n/zPxm5twKDw//BzcIdujw8FCo/y1OTk64LeQbw//LIWtrayH9PlQd8vPzQ3JystB+H6oOhYWFob6+Hg4ODsKijZeXl5AsQ9Ehqva/7t9HYGAg2tra0Nraivb2dvj4+Ign5JSXl8PZxUVo5vPTtacvbGpqQmpqKusGdnZ2kJGZia9fvgiLnJmZGXR0dKCrq0tYTEd27Tc3N1FZWYmqqiqcnp4KK9DZ2anpDL2Ir68vqqur4enpKazmIUvZ8fEx+vr6cHV1hb29PWxvb6OgoIC9VyM0NJQ/6Zni4mKWzUWxhry9vbG/v4+MjAwkPnrEdRQfHy9O5URERAgJKCoqQlBQkNDkeHh4CEkZxdEREBDAPWh1dVVYtGlpaUFubq7QgIGBAQwNDXH66LZSBCmlJGdlZWFhYUE8+TMUYYtmWVRUFEJCQlBTU8OfWpydnSEnJwezs7PCIsckhygtcXFxiI6ORvTdu/hTkvVyeXmJ/KdP8eH9e2FRRnbLtNjY2ICdnR3S0tJMcoYoLS016oyBP6Qiazw/PxeqOvTM/Pw8ent7cSqFPzY2FlZWVuJUnYqKCgwPDwtNGxsbG/0RMrC7u4u216+RmJiI7u5uYVVnZWVFSPrQHaHrHBwcYGJiAq6urhwtNaguRkdHhaaNWRG6TnBwsJCUSU9Ph3RxhGacf90hmoWDg4NC+0FhYaGQjGNRH6LVZGlpiYubrnZJSQnGx8f5LEyKyjOpa+fl5fFZQkIC1tfX+UwNixsjjYjp6WkexM+eP1e82sF37qBQmoUnJye8xmhhtA/R+KDB6ujoyDqNlKSkJJYJGgc0jCkKSs5QBA++fUNjY6PutUTToYuLC/7Snp4e5OfnY2xsjN/UgLu7O88m2oWU8Pf3578jaLXRg9Gi/vjpE2JiYtDc3MzX8rNUMwYmJydVByVBw7SsrIwjS1CK3dzcWFZD0yEann9L4TZAo4N0F6n3EBRBJWjupaSkIFPaMm1tbTEyMoK1tTXU1tZyx9dCtTHSTpT5+DH/I7pFlLr+/n5sbW2xvLy8zEvcdSiNuU+e8A+EyMhIttnb23MTffHyJY6OjtimBGVA1y178PAh3r55g3vSknYodWg9UJqoQxtSREXd0NDAshq6p/3c3Bw6373T7QxB66+zszOmpqZ45mVnZ/NvPWPo7kPkvSn9iiJUV1eHV9LiTy9COm2Qi4uL4gk5FjdGLWh3pi1Rq2auoztl5kBriinOGPhlDpnLjXOIa0jINwDgOwIkfE4oeL/zAAAAAElFTkSuQmCC",gasImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAASXSURBVFhH7VjbK6VRFF/ujruJIeSSo0jEqycKKS/ejCIeeZ0xXnhgovgH/ANqkKM0pMyDB+VRJLnkEnK/i2Hc5/utzjptX87+zqFpPMyvdt/Za+9vrd+67PVtfOx2+xO9IzChy8tL5/TfIiwsjHydv98N/hOygpaQj48PD19fX9cQ+Pn5UUBAgEuG30FBQTzHO1jH01toCUGpGJCn4PHxke7u7nhPbm4utbe3U3NzM0VERJC/v/8z8t5Ae8qgVDx9eHhwyYKCgyk6KopSUlKotLSUKioqKMqYg2BZWRltbm4y4fv7e3p68ryr4JRpCUnoAWwuLy+nnJwcSk5OprS0NEpMTOQ1wcnJCe85ODjgOZwAMU9hSQh1AQ/haXZ2NvX393NKBDAG0pLK4+NjKi4uZmICbyOkTbR4iChdXFzQ+fk5y2EEQyUD2Gy2N9UPoH1TNXxmkBHPVTIrKys0OjpK+/v7TMQWEsJy9UCYhw5aQvIyonR7c0Onp6c8h6GNjQ3q7Oyk2tpaqq+vp++9vRRsFPvH2FjeYyahDh0sYwsFIHRjEFpbW2PZ0NAQVVVVUXd3N+3u7nL/uTRSCuTl5XHNiWFEU4V5boZHyUZEoGhxcZHnq6urtLW1RYGBgWz89vaW8vPzea2yspLbAepPjYZKRBclyxrCy1IL2zs7LE9ISOA5iKSkplJHRweVlJRwJDMyMqirq4syMzO5L2Gf6AFk7g4eRUhwfnbGRtLtdk7N16Ym+jk2RtXV1Zw2GAOpgoICri+0ChgXh1Do0mjdwbIxyhOG4uLiqK+vj5KSkrjA4+Pjed0dtre36ZNRaxvr688II814mmHZh8QrCfFvo7Cvrq5YeUxMDNcJ1l5KAWTo5N/a2tgB+YzIO+7gUcokUsEGkRCjzwBogCALyLoKyGC4qKiIWlpa+FuHqLwUGRWWRQ0FYhC1ABLo2AsLCy5P3Xks7xUWFvJBQJSsYBkhKAURINZoehiDg4NUV1dH4+PjvC6GzcABAHaM07m3t8e/EVl3+wHLGhIyAL7woaGhNDU1xQ0RqRgZGXkWIRh3OBz0+csXqqmpoaOjI4qMjGRdsk/VaYaWENKlFiF6C4BvGm4COEXoQcvLyyxHw2xoaKDGxkZyDAzQ7OwsRwZ7cUsAKejDcActIXiCAUX4TqWnp7McX36QhSFEZHJykuU/hodpZmaG60yuLohkeHg4JTjvTpCpETVDS0htYiAwPT3NdyJcwCTsUI7IAAvz88+MoZPjjgQ9H6KjXWui8yVoCanK8bunp4daW1u5KUpN4Cn3JKRCNYZThasJ3kNaUdBW0BKS+pGBjn59fc3REjLw3s9pCCcQkNoDgYmJCXZiaWmJ94sj7mAZISiGp9JDkCqRA5A/On/jBGINA0R5zSCH4y86dGQALSHArABKJTVSR/KMMI63DkJWB0tCOsB7ToFz/sv5kZa04OktXvXfDzEkkcHHMysri+bm5ujw8JBlIOtJilRY/hn0EkBGIgBCqBUxjrn0H4zXEPI6ZTAAAniiltBrYBiAHHdvyFDI3pARvKmG/gY4Zc7f7wBEfwDnD7nUaGwcCgAAAABJRU5ErkJggg==",HVACImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAISSURBVFhH7ZgxayJBFMf/p6g5ES4oiIXFBbeSSykIFoIoViIXbGztJKdYaidY+AEsPAvBRjvFXpCcQq7IfQOLKNroiRZRREWSzGQM4ZplZoSz2F+z770t9se+NzPsflIU5RlnBBVarVYs/b9YLBboWHw2aEJqaEJqaEJqSAkZDAZ8ubxk2WmQEmq1Wvjz8ACXorCKPFJCNpsNJpMJny8uWEUevdVqze92O5byUa/XsVgs4PF44HA4MBgMcDgc2F1+jEaj3FkWjUZRKpVYBgyHQxQKBXQ6HVbhQ+os0+l0yGQyLAN9M/v9HtVqlYqKIiTkdDpRLBbhcrlwfLt6vR7pdBrNZhPhcJjWROAWyuVy6Pf7cLvdiMViaDQa7A4Qj8fpXAUCAToPInDPEHnYeDymA0wIhUK0TYTtdguv14tv19f4fX8P3sUiNEPdbvddhjCbzVgEugX4/X78urvjljkitQ+Rwc5mszSeTqf0GgwG6VUUKaHvNzfw+Xzo9Xp0nshKIy0loqJICf24vcVkMkEqlcJoNEKtVoPZbKYDL4qUEFnq7XYby+WS5uVymQ52JBKhuQhSQoT1es2itwH/WakgkUjAbrezKh/SQv9uGZVXIVJLJpOswoe00GazYdEbq6cn5PN5zOdzVuFD6nD9enWFv69t+tg2GaQ/FIePjyeTOSLdslOjCamhCamhCalxZr/0gBeor7l5E5UuBQAAAABJRU5ErkJggg==",
saftyImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAEvSURBVFhH7Zg7ioRAEEBrdlAUjAyEdcRIU0MvoadxnXyNvYQHMDDQa3gIT6AgCCLsUkPNwuxnum2FNegHDV1Fiw+7q1BPnud9wIG4CY3jSOH/YhgGvND8MEghFlKIhRRisYtQEAQ0284mIVVV4S1Noa5rSK/XW9x13dcQQbhTY1fN8xyiKKIMQNM0D7HrujTjQ7hTW5YFRVE83Bz5HouwWsj3faiqCsIwpMy+rBJCCTwvjuNQ5m+maRKS5haK4xjKsgRd1ynzHFyH6/G6NZxN03yf55nCn2iaBkmSQJZllFkHnitFUaBtW1iWhbK/g1XKfEL25QJ931MkxjAM8GrbFD2Hu+xF+wrCW/7yBY2HzUK4HfexB3LLWEghFvJDkYUUYiGFWEghFocTOtgvPYBPBNNTItRQvrwAAAAASUVORK5CYII=",otherImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAP3SURBVFhH5ZhLLJxRFMf/iEdEEY+KeBex8lioiEdEIpHQVS1YeISFjaJWErFoYmNDIhIkRCvEowlViUckFhYIwqJdVsX7sSHxfgS9584ZM9/M97WG6VTSXzKZe879xvzn3nPPOZddRETEHZ4RUtDJyQmb/xY3NzfY8/jZ8P8IcvfwQFFREXp7ezEzM4Px8XEkJyfzrDaqgtra2rCxsaH5epuTw0+qExwcjC9DQ6irq0NKSgqCgoKwtbWFb9+/8xPaaK5QcXGx/MPt7e3SpjG9xsbG4Cl+vRYv3N3R2tqKyMhI9gADAwMoKyvD8dERe7RRFbSwsICpqSm2lJDA9fV1tsx5k52N6OhotoCJiQnU1NTg6uqKPTri4uJ4pERVUGdnJ4/MWVpa0hRLpKWl8UjHyMgIrq+v2dJRW1uL5uZmtpRYPai9vLx4pKO4pASenp5sAVVVVSgtLYWLiwt7lFhd0O7uLo90vI6PR0dHhwxuWhkSRBwcHMh3U6wqKCQ0FDExMWwZSEhIkMefVkbP9PQ0j5RYTVCoENPf14fw8HD2aEOlqquriy0lfxRE9YWgL9Qi7NUr+QUBAQHs0YbyUWFhIba3t9mj5LfFdX5+Hv7+/mwBDQ0NaGpqYktHSEgI+sTKBAYGssfAkcg7y8vL8Pb2xvHxMebm5tDf34/9/X1+Qgn9+CdVe1qZnu5umYlNOT8/R35+PhYXF+Hg4ICbmxue0eZJ1Z4C+NPHj6piaGUKCgqkGOIhYvQ8SpA+gMPCwthjgMSUiNxD2d4YD5GL6HNOTk7sUcdiQbRNFDNqAUxbTxXeWIyzs7MU+FnUMzr63WKLMzMzedYci2KIRAwODur22t7+/gQSaivj6OiI6upqRf4h7u7uUF5eLsuKMRbHELUTl5eXSE1NRVZW1v1poQCm7sB0m2JjY2Vgm2JnZ4fKykpFSdFjkaDExESsra3h8PBQvl9cXOD09FQRwMbQ9rq6urKlhA6D2B22DFgkaHR0FOnp6WhsbERPTw98fHzMYsaY29tbHqmjNm+RoPr6ehlDGRkZ8BBNWl5enqYY4ufKilxBNVZXV/FDzJvyV69BFNTvRXV/J7pFihs9Z2dnqKiowOTkJHt0UFA7iP7lg2k3Zy1oSxbFClKDlpSUJH10wqgdUSuulKP+qiCCRDmJXPTS1xcH4jDMzs7Kbd/b2+MnDJAgixPjY9gTTRsV6t2dHdmeRBhdAEyxiSD65dQNUMWnFdra3OQZc2wiiKCESqJyc3MRKHKQcZAbYxNBFKNRUVHy5trS0oKvw8MyuNWw2X8/6Jbh5+eHHRFHptciPU/qhyyFygxdMLXE6LGZoIfy7ATJGOLxMwD4BevgnYp1zWAcAAAAAElFTkSuQmCC",modelImage:"data:image/png;base64,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",singleImage:"data:image/png;base64,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",continusImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAQCAYAAAB+690jAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAOYSURBVEhLfVVNaxRBEH09s9nsaGI28RCDHhRyEaKCB0HxIAgqKrmJv8A/IF6FEEEJxiDkT3gVL56E5JhLFDXxohEVjIoh0ejO7s5uW6+6e2ZWE99Q093V9fG6u6bHDM0M2r7+fqDTQReAMQYmkg6sjiN5HDi2bNDKWojjCqpRjI7MBAv19xIg5iq5jkYMIwrmCXq27XYGMzI3bDfXt4BYrMqRcgSlhZVgUcWgVk2QbqeiEYqVsht7TN+LHkK7IQPqB+qyOEnSNcwkSuN3QVqNwLHMOSEhi/6+Km5fuY1rp6/BShDR6pzz2Vmsb/9np/HlibqRkJHkXStKzrGvwoHwJDGvh+xGs9nCUDKEqXNTOHP0DMwvmZB5jbGLuMX5WCX524blERmOXG4VghtGPsyjucKEoNPtYv7ZPF5+f4mHVx5iYnwC5rfR45R3HqcsocYC8rheyihs9chEaFmGJGIBBmIsxNVPq7j79B7SSoq5q3M4fPAwbOpsywjJlADj+D4R+vIJlezkyGwgEoIFD29FMs5EHv0CqbB4/n4Z00+mMToyipnLM9hf3w/bEHv1p7MPIFCdjxu6zsLZFJbybSUXalPpb1kesxaWKtqUrQWOmOu/+7yGjdYGJo9NYnxkHMvry9je3oaJ6ScHKPEoNA8L15gqgQ7hjjzZmyDeI4QaQkiDcIpO3tI5Op6EG7tJHh13j8f3s/kTN8/fxGAyiKUPS2ikssBYJunoCYXi8E0eJyAnlFx0hCI5CiXi7dj0EimCBD1kERy9evsaA8MDuHHqBn7Is/JxBc1WU+fzmCJFl+9elAglboc89R13Iw/ANqejI9YU767F1UWMHRzD9ZPX0Wg1sPZ1DY2s4WvO2+ZeBVw0eQuh2t4aTYsERJk9q14DSCFoPXhb2oRHx1XG6+LWo1tYeLeA2UuzODtxVu4IuoargJdCESOA46BhbwdCLgC1rpWHX6AoQuC/oTr5HWZphjuPp/Hi2wscP3QiBFALgt3ebGHGQZc48qBuN75u6i3slA6OkB+RELsiYT2Rn+MNH0eRXpiKNnBk7AiSSj9W1t+oD6vBzypyXx+LI/6G6qNDMHUhtPVlC8YTUk+euRRkNa4xo6i6/jO2yLLM7RizBDj2SlZTpfJmpyYamVOdf+8K/bkKoeH7+6zpq+gHU9oIVzOSuSP/kFg1kea1QowrdBXhoPYiSpwjN1Dwx8rCpk/h8S/o12638Qd3a4ZoJtQD+gAAAABJRU5ErkJggg==",moveImage:"data:image/png;base64,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",upDownImage:"data:image/png;base64,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",scaleImage:"data:image/png;base64,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",rotationImage:"data:image/png;base64,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",
setImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAABRCAYAAAC67wTqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABMsSURBVGhDbZpZrGXHVYbrjPfeHtxD2m6bthPAxJFNgBADii0LRQKeI4TEEAWHPPASiAQSspQXHoJ5iqLgiEAESFFQkCIBkRC8E5sMjpEDhIQYy6AOHhDY7m6Ldrf7nmHzff+qffoaUefWqapVa/hr1araVfvcyblbTw2LvUUbNtu2S4P1aRsmkzadtLaluZ1sodDoaRhao3uXaVZKha9hAg95MrQJzFFJms6nbUtjsp20LZ/pFK0o2MKzXa3a5LbbzwyvvHKlzedwa3jUjBF4o1tAo9EAsU0f9pIcy8yKDJ2eLtrhpzqRgbr61SsNmAEjz3rT2m3nTrfpFmtTRgEtnCKeMQpHotB8Pmuz5SxKprNpW+Cy6dIOeGjrweUUxeTpkj7oM9DOo4e2dMoJjH7mAFDzoB51kuf0L+ZgQBdt3GXFT4xmIHhhG8XWHdx8Om+zNDAAXSCwR24CaAWlzcwYGOy0H6XFy8CRnTgT9uEqPV/J3iLDPbRZnwLkkmZ0zxn9BO1T+mReb9clUV/EhfRtGzDgyKfEBa0oUY9cA3MxMXjs286YnmnbrG3TT33CPA4gN37DX3L8JQCKkFJjjCCBSPeE+RVwgpt6I1ufokzAG6E4AN2C7IBglOv/GcOjnOk6gVM3qA2VyhumillSZweWVCBQRGWGkomC6FDxRkQbR6SR4rfcah/aDEaBgSlANwFMhZRvIzltp4mSv0wvILPCQOOAM73y12hqCZrHRMQHtQEx6kwWiP2jHdrlQXUwIAM+iGkzwHgFtjXTNdpwwOrQER1GdMkfxYwxcy9VlycpDHXGcCYAHj1kwJe7oaFW/tQTF2SUypPAVod7mKUrBo1Z08hYcwAO5qZJGlMMVsyo2DqWqSfHrXDylXE4rBgxlOXVi0xFRmMyfqDB7UfXGrhuXgLJTOBB+0XsAOLZPtj4ba2b0GhwadFRCzhtQSkOT2IWkordV9wC3EMMXPWIVQZ36IiGc8vGCcA1A1K92rWX3bUL2WFJgYmU1UkthtBWo8IDkMXknE98DCDpFCdBl88pcWM04Sxk5LINnJCRA3OBpIQ286sP0BnKQAG6A5RRm5UiW8CB4xxjqXeKgjcjKoPmGN0gHfRkvdm7IyM/9EG09tEl6FRMltojJagj3Cmi3H2gq2yqsH1mkFafmTqle4gDSD85oCNQconLdJAhFWZoyEWgp9gbKVEYIwWkiP7VNPaBxwvJ6TYEaxUG+LhiyJbxsjp6DiAEDV77syFb2kfqgHoaUdApKNeBMeOkO+9+ZxXS57TW8lS51vBSXGBfmKkV6BjvNBVZHQF20ZhObEmLlEnODtWRFjAYA1SvFePRGMsoFbGRbgid32zXm/X3srO492TaKCUVoM4YceCWPaO+YkUbrlA1Oe/hzS7WDZqiTW4o8CSQ01sLIiwUceJYj84SNTm2lBJiB4Vvci8dChov2TSpF9jKY5+e4/GIQAV4dKWvKwld/tJhHpP12DPrJdpuuDsj2T+gij4jGBV1sNn5JXdPmWIgfOiw3lM8LJ/0IzaOJtlH2ui9eFbaKKziyk4AmchzCjONvc+UOmWeWxLU0/l2WVm77DtSmpRPXSXWe0f2oTcR++hT50sXZiXBuFOSJu0+LeNDVS8m0Z8V5Cey0MhIdJmoLl26xv40Sq7ayo3MEsKBV3qcyBQZ+7p/d6B7vcd6gFt32isEurC6KPVebRfQEO6TQyoHZA84qswkr3WXfQD1NW539CCYD7tgXXV4egQodcpxX4on6XRiy9uQTaqkyLFEOnWxeAZDU2eQUHZVFaS6fLc3kAJYMOSck0ZeQWn4CBjjKzpwgXtbqJKsREZd2kSPHqMzeB1dTOYrrN1wJFWd0iKOomJXAeHPo0u4jCUIMQAj9YJB25pVwSmTATigrrtQxltlhBxhpELjYKa7cxWKAhXhFbLKc1CPBVIK+vph7k3BjfVqV5msvnxIyHpAS5I/XX47Ko15HtYw/TNvEtRz8sN4YolU9ju//XQL3IPYhiMGN2LOz+N+pn75XIU8IYNCHT6w0QmTjnDQoZ6/48xw5dLlnPpyg8XAeN2I56yQDFiBCkBcyqtIdqi5aaxW63bnnW9t9957L4PxRtjaM898pz3/0kVPwgFngFsXUB5BsaP8tp0+c5r7NHf7xaINy4PpsGfe75m6tP1Oszx2fEaeD8eOzYb9Y9PhAPoBpbzie+ihh4bHPvXJ4fr11xn4drjy2pXh4Q++P33zxWTY358Ne3st/Ptdx1ifQ7/19tNDO3frmWEGoMU+QnuTCC6Wk2FJXiiMkiX5gD6NHzs2R7GKugGyBu//sfuHF196ESAbZnYYrl69Ovzxn/zRcNv5swOPnAxoucA4dgqIgJA3o2+GLZ0DoFMRWO7piQkjsCzky6WjQWA5AyQKrHeA+/AtAUlYID8Znvu3Z+OVzWaFh64Pf/4XXxiYivQJRlnuawwSuYBi0IBZYtO2gxdQzlnGQfYCgqYO68wtMZEgdDXlEumqqpxd1HWPrIF7zzu+t939/W8nJriBcpr/2pNfab/+kQ9H795xvoiXNbeOBx74ibY6RECj0HIZwm5A9ESceu8uUObcNsyGLNHraxU/4yoZs/d1NzzT7z768ZTT6Tygfu+xT7b/+s9LbXlAP0DeuL5p73ngx9sTj39VtY4DPr80GNFdugnNJDOUoO4AQrZAlrEFtPXx9mp6530/lNIBCOrB9zzYTp480darbbt+bdPu/oG72xNf+goryUdCefX/z7k+VqJ9Ex7Atnhtw/lS+hRF7jE7yUyZU1zs3/2PiynXLHu3gkce+Wh7+OEPtFuOn2kXLlxo3/r2t+CdtJdfeTl8Sd1WOaDqjnRXTUXrJhpxhHOZ86AbpXPNZobiTd/d3Dh9U3LxuwXIDeZwvY7xT3ziMfLH21NPPdX2lnvp3t/31VsBcC+a5sVU5u4msFtvO5U9YM99JcuwrwJW0LLvMwfH7HdVuFpa9h/5ADj8yLvvy+oyrder5NXqMO2Rfnh4I+XHPvbbsb6PPpd+7UWVXWXnbjs95KXnlcuXQTvnBrDJbq2LfNbNON1v+rnV77xUME64zx9e37a3fd+F9u/PPR+PACTl/03g4P6/aNeuXWsnTpxIG0Ak3cF53CcA2tkw2hl2aqm7lCNAlv6ksXszZQtZswUYkILUrTeubdvZt9zS/vEb334TGME6zT42xuwrmBUPtwt33R4wx46jgADN4NBrMKhTN2gAV7hajFVihYpBaduHo0i2WxVvya66bbvxxtBOnFq0r331qXbq1CmAVsxobAEYHfzalStpm//0859rezwvrlz6n7YPGN+CGIK+wU0MCsaBYk04R2KIR4OPiDwO3F3rucXGlp2bkYlwmMwnw5e//HeJj8QM8XI0Zj74Kx8Y5vM5z8dFMkEfuYMTPV72aqevRwb2KH1G7vFUOF879bQREsQLU+UGSdaFeZFOwimMpLU3bni1nrTPffaz7LgPlkcZ2gaaK836Ix/9rfZnn/8CfOu2YhrbdNX29lvDKC5HN3bc09SvRyxNPukJXryLj2SCt+Zwl6Y502jEGLjBBjdsJu3RR3+n/cLP/xJ02vQJ0GuLu/in/+BT7fcf+3QbZus225s1PM0gZxgr3b6fxlQWTd5bkvx2SxuBpeJ5yKe9S/GAqToYn8JMk0txCR27w4d/7VfzBPdp7hSNy9tpevLrTw4nT57kpHBzatwyfIAeMB0+RNWbbcUtxT62D5f+8gj99jvO1tN+zvzFeD+bGEPS3GsE84vv/7nh0qVLOMU9pWJmBPP0038/nD9/PnHi07/AWGrQ0v3MI42ngymg6zQh4CWgPMYsjSvsn+c8NHkLm9Frr11BnQ9L3cbqYBm4kx4yVefOn27//E/PNAy3wxuH7X3v+1ltkyftuWefbT/1Mz/dnn/+heZm7DLmuJHnIH/hYkYTO+5xlhvfdzNZTjfcZPlqXnNiPHfulnhhyQjGs1DqlPI+86/fGS5evDjcddedw1vfdmH467/5q3jqpZdeGH703e8Mj1O1wLt61NWZ1aSnqC+yqjz4FZ9nLA924TtgFSO3gGbYnL+dw5xrX7AZkd5xSGJxAKR73v6O9uqrr7YXXnixvfD8S+w9t4TnQx/65fbNb/5LQ1mbLVypPhgZe/a1Ojf5GicrCuU+B31jO1uwWepF2vbN+Fp0mqcRVj0d7MoCQExCcvxN+tsnvtTuueee9pnP/GH7yy9+sb3rXfcHzOOPf+XmhplJqFUjLDVPt3Wjdc4GkC0AnZ8sUCxgE7DzcTPuuzRTZlDr8gRZudoNyyBEZrjvB+8brr3++nD58uWB59HwG7/5keHEyeNZBG6crqIcfd3kkOdQluk4YDoOOH8fwLMP7fgJLgdsrulDhl07ZerQxOCKn7g7vvrq5Ty/zIwvz5m6ptRj5L0/+V5c6uO1tW/8w9Pt6tXXevDyHPPYikecaa/WjlgtdWXqXsu+5XTKmznchYRJWQ7j7fTZM21yx/ecHf775UvMr1DslQE1aAsjrnRasps6OU5tdnHBYlQBe5jmxF+SYGrjVCC/uZId3A6H+i1SZ3MG0NkzZ3zZoEH7d6xqj7fmeIF9I8KJNX8RhE28alNCDILJiwZpAgiYaAqzpwT79JK+z42VLEs5izr9Kp3W2wqZuxWSSnOH7zkx3q3LlgyrdA0bpLbrV6Oi26G2ZL4cuMFtXVBjqpCudnTe7OoJA6J2hhyZScCuJJ9Z/uDiVUmgXAnTb13BnGwh5V2l8nFNgXanzQDljFuAkZEpA38GZ1zSqV4bcWNXarFLyquE7NRFcYSrXTQZ9TZj1hs9S0ufvCjSGwWLHuwljxRN7ARs9wpqachWXiq10RnROIavHBVoj1N+dDo1k6nO6mLlRUa93UZXmIE5xTbJNWXUgtNSxCpRKXlk6noKmApo5xWeaKD2ogTI8tcmywCkpU8PkcJb9vR8utOhh6ylIbkQR5lWFdBTfQSCdZRdrZROo+S8NJJrqkp1vGMdFJLLvKnsyRn28LrKDKhQySMTbafAlp4b40IhWQOCmsoH0aojn6ImweMGG2LWEjzo2XmslOc3tPodLSKGwYiZDiiV7QShdXoyAr4sqq80pozf9WpNgUyl0Yq5wIYWhl6oKD318c+cuKx9Q56iShNoNjDXMoZdysZJghNm8arUI2zGD3/kolmWWn2y+VJUE940iofUB6NcCNWsVdZVRMGOAYFMp56JVoxb0C9wwSqbvYasSFJXrNIaQPccia2oHGO78/SvxKkBzgLiUzT1xngAkLy05iYrGARyiUVRDKicwtOdA4FRkQKcmikcJZChk0sofGk4mCispE/KgIyCkYls0yTqetbpn0qRseQrhwB49OZRxTJELXQ95c/VvqHd2bKgfsS3oQeQKS+k5JYppDo6OTTnXoh5Hgk4/cZDJlH8SZZ6Kx7r7aik9DEz7t65ctNvZPmCXbujjtpuVODux60wSvzANIJ1A6y9xbZA7KdlM/x1YqhFUWlnYATX9eX5F1ChRkcG6uzwmepGpXP5p2M0Jv/ADTIbm/nIlOw8FYXkTKmesTeWEqSel4XrRy9UTNLy/AxNu6URroKRVYuBTo3RXu2IK6ZQ5n2bNMkPsABUgwmb/h9RqnpDsjRJRebMThzSZwhYFkgYu7EMFF77+NMoekQr+p4Vyohk4jRZsqJ0xY08ULhSrTmr6MnyduFwQF6jQ+8jRkv0jJuoesSvJn8nyZTZE909C06tZbRemRRFRRhIxI+AnGbGzRQaZ3pPL+R3jr6ioo8+/tDp4IuYPQ5aIFGpUySDhz3WjG6VGx+W9Q9OCtXoVRgB+KI06SY4d2P/06l+SGZKMyBByF+6N+sqIfoXnfnXIHhDtirKOq2VsEDyWxdEX0Z59U2ECip5w+gtC5KjzoZZLDs9zu52XTLRSYfjAGbkguOmakBbyguBv06Q1VFUZ71EZ2Tc8beHaKCdnzRRGnDIyC8IYzBv+gVh7Gg8l8huFV5txRjJNRF7ZCGqw878xDlmk6Uyea5QyehJ/jOl9SGBDoHhuuBKtq5K+QfMgGCk6RAFrHh0AOXGSIduvOlpGpkddbqPxZ7Iys03c7kRNytCY7aHF3C7D0fn2dEJzn+OM5D9fcOU/6flL9pdDNloAWDsoXjKIU4WAecKLg19JV02karkgEzOM06HeYYBhL2ZrvTvtK1h0hslVca33uHXxBoj1sAAiHT4TRHPcVPJFPsugC0kd3y8oCPUV9sGg0MmqjcrYoIYqDMywutJu3G4bStoa0a1ZgmvDlVaIbllWa+RAX7k1tDdYzTqiNx/sidB818FJeuKqX00fO9kXApkfNxs1cdsTE6fPj34D7i5nxsU9LvK8nhQj/OeXdrlCwVr/sAWJzgrDskgtkk9m5vzABgWKd+2a5PMdNPOs5Ha+DAXsT9ZyDS594f3hw0uPLyxxu4i9/Ybh6tgWDFVy31/ctK2sTJt/u/1jTdW+U1juYQJ7+THX1ahv10s9wGOcV/FHD+5B5h6nTts19R9CUonxvXs9aurDH7/2Bz9/ojc2v8C9q7Mo0qxsUQAAAAASUVORK5CYII=",modifyImage:"data:image/png;base64,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",drashImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAABRCAYAAAC67wTqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABI6SURBVGhDbZpLr6VHdYbr23ufW7cj4z5W2u5unAyQhYVtsGP50iYhUSQmGZJhBFZmZGCJTABhISdCmTCI+A25MUBK8gM8SaRIkcUEx0RBxt3GsUTkOHTT3XSfy95fnuddVfs0iNqndlWtWpd3rVpVX+2ve9o/WMyb1tpEneeqE4PFAsJ9ZU1dVjeDNXyLaW7TYoJf6V8ua5Qu5nXboHmxRBks4eo2NsyXHQbMnJ6u24MPPthiVkQyCWKJ1YARpdXCnGAEkcJAGzPKNhtrp8Not8DQWaiMMYQNdYZxjZLNZo2NTXd6Aa3sr1bLtlCZcgKxOI4Bmal206cjCMFZNzAt+Cwh6nlkQuEbY4IWmM4ujeI8YXgK5Ekk26AKbIOeivRizOFDpjOe6NewsDhMp2oBLo0hCcB5rEcPzPJMGpLuFPSJJV7i/Qy4eV4kKtUf6ADnOqp0KNFzy+BxZDf2O03FC7Rt1EgxLpk3EvQ39GFJGTr13Cpdp8eSVXUZFVC6l1kCtWyKWvRbDFVCqESeVY43GghP5+8szNEnXzJ2IK+MdsPn8vXCRGQBXzlOx4hEIOrvY45wsNag74oM7cFuf4bJpHWkBmmJSEJS3H4XhwUd2mWwAbh6Ekl2ZlimQLQ6rLGfTsjfBtQb14MBGdAdkN1IyFOtEpNLQaIGFNydNXOlrKBFbpBgWsx9CZJMqdGbnKjQFj/DfG/PnN4UkPyVHvMIMJnWZlyvJbFsnaAzwGRnUQS+mNzuUegyyN2Nqph21KFwW+4zIvKJZakhsupzORiFJqnTdFJU+US3DBCT3BWIFCey3hGg9u6vlkFLq5XInRkIyMEUx4vHmqkxb5UGIZGSB2IOA0MtIYDCVEs8ki6yFdXYyIZ0EHdtBcMMslHV61ZRWOTFOMICMF/Gkrl8aTlJOakzE4LPnf7Xv2qq+EEvmuitxR1MLtb4RB5UPChq9/CJ4WzTvrQBpzWZqU6Lm77Px6CWOCISvoj3VuYI8EfOdYcYVsfs81NBoJdWPveiWDKLMfjNTeW68kg6r20ByWCUJIZVRfD6NQwr7NwIt6MEi66jHP05EhpPbU/dQi9Qu9GLQPxOpNRdymOP/jDFjoPi8oucVt0BYLXLV5jlYaAXznl80RQovUsrpw9R/ZaGk8o716u5FFoASVSiCl1zyGeMHskkQjyhFkgahWmj0L7Gu4aANgK9reeTuaZO9SgoI308UJeKZzyoSGvAZygypgL0nEmi7ZFMqkBKsS/IgGHQVyJtfJBRm1Sf+D7BRR/l8AkgD07kFyDWMYvyLqvAxIhE6WSenhxogCJRT4vGJFXPrF4jtvchWw/UXjLskS7vix4nYFwuMczlKzQmK4JL7HFT5HamM4JRaR4y6+k0F60Qf6Xm8rYzt9MtUO40rJHg8xyk9cY3puOlspTVCgepM1szN0YjxWQOUBmw7U6sLVJlcYrmqd+FVDzuy463dyOWop8sivCtAr6XJK9dqpexRfjOlJ/ixUwNFYeN9Np7tgeg4EBoxIzkiKpwgxRSatbbKi10PMXG0vuuni7WWdadnSUgiCo8SwhJdPiErEM6tlpN1FVbc4Ffn0AjsguXFnDmU+SNGI4ZVf0n11BGdWKFZQ8+I5NJPNbAaSzQIxeCe8KA0ezF1ER1vNXdBZMzeozQyUlPB/hWAvHuTF818hqPpejIpwn9iyW3e8FgIozmh2jrfKoFcDnG3VfehGKb/XRLfeasGwysT9CHQy7HiX0AjsOwfoUAGv2Sogm7pD+aIWjIPFItcAi/BjUsJ3+9GpUEQaxZozIQgBQjbXSlJicCem47Rl6WKFJ1AV+QH57c0VQ+qQkF0WcESpGoTeAkHHN1eSN68dJIhH3Lv63qwKByLr+bYWkCGglm81TnT84sbyKkjGPxngqojvIA8MgvzR1xP+bNXOhOjdKnU9P0ybrKeNDS0h8/a0qtm8Yo2pO5eOMcww0OAIiRQ//o6r06ZbRNMDpdxe5Cz5+KRNWwj6ocPdmVhy01szALvHA4lsQXHXPM3Vf3IdlhyJRMoWj87JHiXZkYttOTmVwqYnRRlFyfmrwj2okFCgqKWOII+s42RdHTJJI64JnVi7pdpgDqEVDdiITXCnk+fuVKFG/4WVyPlQJz6fKldu78uXZ6LOzitUYYNFJH5npJ08EaFE3Aa46JJYfX66F0tKWFct9Y2eOjuf3uZz/bvvzlP2uf+fQz7aWXrrbLl6+04+OjdunS5faVP/9K291Ztbd+8J8VJeRGBEsRjTqJkOeSJbkEU3Yw/YP9gw4Iwey0rsBcig7HVgYejo9/4vH28ssvteeff6H98Re+0J566sn22GMfb7/3uc+1L33xT9tlgN26dRuDy3bjxs12zPlTmiZoKCJpK3eIbr/I1fkmuNbOnQPQzu5ZhLJGhHDrGcVd4gK4zteuXWv/8dYP2jvvvNt+futW++CDD8J7/vz5du/oXnviiU+15557rv32bz3WHnn00fbkp55szzzzbLsJuBs3f4Y2gLh8ro8FMDnyOL1d+gMATQfn+fEKkCypTvQQFgzoeU3i/KKdklAnd5mDEE97uXz5kfb8Cy+0P/j9P2yHh4fRUfRL7erVl9uXXvmT9nd/+922u59zuAod89N88pQ6AcSFjz3Upv1zPHORN/kDHKao60r1wPc7inlSP3x4kRz6DElOJltkQ/kAWBE4Tfv000+0z3/+j9q3v/1X7V/+9d8aqxHnUtCf67AK2Om+azv82IU27ewtZnNMw+7m8Lt0KSWUHYGCe7/YtNf/4pvttW98s92+c6dAd0CWNYh9st87vgvgdbvOEr/66qvt7bd/2PYO1FHsFq+rXnFz3GDYi93h4QWuEfuLeW+vzUZqj/4O/V1A7uw6nuZ9aPsHy3mxiq4Zo0R0nu/evTvfvHkz/aOjo/nOnTs8yjaZv3HjZ/TXGf/9P/xN5NQz9BqE3YM272Fz/9xy3j03zTs7bX7k0oU59/t6qxG5OmH5yvll6f3kmMM+8eab/97+6Z//Mf0f/ei/2htvvNGOju62n9++2b73ve9ySJ7E+5/+9H/Ck3xBhzdQNXiW1zXHw7CuOeYu69rmHdCK9IC6d1BR2tud5l3n9qb5YH85L6Gpd5SrL78wn3tgN/3XXvvazEVs/slPrs/f//6beLkgYrcz98orX4xcIk5k1P9L1aih23rxUSLkm8+JS773l+Njj163+JILFrg5T7w84cc4ULflypXL7fHHP5H+4cOH7Tce2m8oa7t4odej/PDtt9IamYTm1xQj5E7Pddew7nDV9IrqlcHsZqenZkvmesltsp+uo0jzh6NFHemjdCypV1fLu9ffSeucj5q0RUnxN6AbypTIzdObmwxGQc9mL+F6KCA4XWs35zju33vvvbQW8yJtOngHywgOq5X2o/+9nXbjg3OE2XB0PrXmPHdsfk0Y8umt4QVbyd9LPm+8t/iWQsU8PnnKl4b3rl9LuxZ8tLjd6x10/KigtRU/AizKr3awBZbJS1uPRl66o1mZuAp7rs8VChU7WT9RLHnRfc/LvJUY9W3242vvpvWRkkuYJWlLVXOJc5jWklk87Q3fzNnkRXnyHk/0/cSBEWopXh/9dSFx5IKgylvFu1C3dO3aj9M66umSNjXEouno0dFxdY0yer2Aea31iEnkcSKtGa9DyHNBk2DuoAkUG39tWKQHjn3/KhrvXb+e1h95PT4JcqrMXdzy0UcfpnWzeNqb8GcvI6yIGCmXXzl0QEKxkYGxXrX0igLp8YK1Hfn4/vvvpzXX9PqsFO8ZytY+/LAA3Z9bpZdOFNvothPaEZAo/cCoJ6vd+qUgeucEaokxyn9/UIB4dLAk99L3hcGdX9zFMBHe5kNrPFp6D6MaDgCBC6IrpAxA4iQ36wjP7yMRGkrWeuuJvIljlVu3ysju3i6gCtDJ8Ul2YXLEnIw3LNn/fZRW1wWRbqHaBtJ2zFmWO8vpdQFhnmF9p5RcImT09IhAJOG//vVvtAfOP9CeevrT7dlnf4ff+av2yU8+wd3natvf3WsXL15sL774YvvWt/6SC93bOQJ0ruyOaKkT/aYDkwb23AEXtH2eVUGIV4Ejg0vFJ/J8K5DLvLkA5Wtffa175Zw7p4yMyOig/e98569ZyjsAlu6xUnzq8NvcLAnPMK4fF7gPeS0QRKaCAKt0vZTJGGOS+UryQz71TUaR+lIXvWOMTGQ5UOstCUP4vMgHuJCMus4TqTjMGXgBQAGYH2j0Ehk1gwnA8SiV0ExdmbY8NqxLl7P3s7Q+96i+nLD6OkZ1ghFgAReMdqjj0q9J7Fk4ArRcA2Utild4oyYfWeK5fxlYOVsQqpcM8GsYnjJstx+q23yhulmytGp1rvAGBu3Cs6fr6UVlSlZboJh3ZXUNwW00PWCLNTysQNejbEXdsT+OnQtQPrWkEqx0QaMOWzYQSRmFNVnLZlTloNj0sWoyjiEiwq5Tdx2QXblGaaMDPj3fysiFgNHkIlz6etGuhNzfBeqXciHSTxSi2C+85bMySlSNZJmUQXlAdRQqdCtHMRoDrM9pJjuLoRc/g6F+f1g6mR8UolChNyUNxZjPtair6jKZN0AIkOwsePJfEGKRP2guvYwaOisKOgErsvgDWJezwDJbKhwz8hkJCK4dEJ2weAD62i2v3kQ4OU9/zfJSfUuhZl/J+ajw4ehPGh+c/uPwpitSD8Ii0QhBwH/mE3VKXpxj2za7WbDedyzDJ5fKCJYXCqPL34TuGACs2c4ekL72W5HVhjv3b+1CWyJgJPxd5tLp1Jx7qstZNqT5QjSvgpDxvuWcb3nD42V+FKMtiO5EvPJw86xJePEiFyz6pyaoXhEFk7WLJELmmg/d7GIinAKDAc/daCyZSlGGmrxkNwyM+M3uEuHVhoekQUteyUuLA7LkrfAKZJx37JIKN5dygLpdhaic+VXLNZamsrkvIWw9hwEjmrpFOm6sBD+lObwNGej8KW1xP6jey5pKsxsYO91XuJRCqAiVcnddOKEZL81s79KQCzJFRfJEKVwEwyv74cMPsRJ4tljpI4IyihpJl90rqdXimWMRyAh1okik1kRJmehyKUwoeZn333UcbcFYIgcQf+GEBzdoJ7zVND0IGsB6nmuMExWXgVo7wCQkQU1wRfQ404Lo/HwCVD4NySN4RaQLxIKd2bf2kWUI3Sl3qHs0KHXDoT9tsh0hmZyCyD8/8MkvDV1w0nmMKFsR6XLqQbFvzDQW8J05h6m5Soq482KXgi8FDD2Ci1AmVc7CWis5JdLHirnk0Mywk3nibK1xzecroFAOrwB1JlM6z6QRA3vs+sLUvqAUzeLJ7FcUWuKSY6NSHlv912UBxUjn7Xiq72zmBhH1jvuO02hyxWlmw+G/p/W+vNiRkSFctgl/V5oP/YzLr7Mwh+esXyF3mSqaRax0yJ1pLMvgHbQxls++Sv2qSxYUxlmOKGAsCLSaLyJzaYa9bYmMK2DHOXOv0kCnZE2/pjNGfemQn0aCzuf5GBGVEFpyLmtaV4qwplSOeMJ2Rb3EiFaiuCYS3YQSzcrZix0KLGl7sS+rdn1EuVeTtILJrY9JDddYiTIiiAEkAFCVJnQMpxVS6Uj86RelZEdr9JWTIC0Ve3bc6VUYuGQxqrDMok60St5SoFVRNkfEstsofars2Xdegi3j0NR5n+78llOHeeWEAioNEWR+suW7kSi0QDNxc1qDJMkbOsqLVcn67uKSw9YZkls9+gWuJJLDMOrgfSEsoZhxxzGM97Z6SE2icxVJnkC39RnmGaNzQWBfncowztLfV2RRNkDp1MrEKvo9UenruQr8D46pMiVkSpYCO+Mf/323rAqTNnnGX3ajQ+gB1wHKJ8BEhejESYmUgHEeA9aFl+2IYHicIak+8FDi8gk0kei1FPoF3ejAohZLTufukDLlFLVfJbIaozjlSlAFO+ENx28pi0fhyF/cqWeargnW09oRxrhOeD9QhkckEQ7yejDLB9VNM4rpI446OG2rlgI6uVHKwJ//zln/Wda8YA4gG+Jazy8NRFMS0XtLXm55Y0OX199JGnL1b/NGxYoQc15vc0VWmKzN7cEU0FEe4to0eoKXbJmWO9PsrrGoeLRG+f7+SEzslmPyQpet7kgohhgdVGn2kze05VjJqi96ZBWvfPR/kwvadPGRC94KkpcyWQJGbot9igISjYOjsatcrVxREHLJwq7skFN3IlK5GSf6nBvDC7A6deDkZNP+H9DDMztu36QUAAAAAElFTkSuQmCC",cancleImage:"data:image/png;base64,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",backImage:"data:image/png;base64,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"},r.controlDiv={cancle:{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",right:"0px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:void 0,divs:void 0,image:r.imgSrc.cancleImage,rightOffset:7.5},back:{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",right:"0px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:void 0,divs:void 0,image:r.imgSrc.backImage,rightOffset:7.5}},r.libDiv={"\u5efa\u7b51":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"0px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.buildImage,leftOffset:7.5},"\u7ed3\u6784":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"45px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.structureImage,leftOffset:7.5},"\u6c34":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"90px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.waterImage,leftOffset:7.5},"\u7535":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"135px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.eleImage,leftOffset:7.5},"\u6c14":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"0px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.gasImage,leftOffset:7.5},"\u6696\u901a":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"45px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.HVACImage,leftOffset:7.5},"\u5b89\u5168\u8bbe\u5907":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"90px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.saftyImage,leftOffset:7.5},"\u5176\u4ed6":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"135px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.otherImage,leftOffset:7.5},"\u6a21\u578b":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"180px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.lib,divs:void 0,image:r.imgSrc.modelImage,leftOffset:7.5}},r.filterDiv={"\u5efa\u7b51":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"0px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.buildImage,leftOffset:165,topOffset:40},"\u7ed3\u6784":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"25px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.structureImage,leftOffset:165,topOffset:40},"\u6c34":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"50px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.waterImage,leftOffset:165,topOffset:40},"\u7535":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"75px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.eleImage,leftOffset:165,topOffset:40},"\u6c14":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"0px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.gasImage,leftOffset:165,topOffset:40},"\u6696\u901a":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"25px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.HVACImage,leftOffset:165,topOffset:40},"\u5b89\u5168\u8bbe\u5907":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"50px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.saftyImage,leftOffset:165,topOffset:40},"\u5176\u4ed6":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"75px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.otherImage,leftOffset:165,topOffset:40},"\u6a21\u578b":{div:document.createElement("div"),height:"41px",width:"16px",top:"0px",left:"100px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.filter,divs:void 0,image:r.imgSrc.modelImage,leftOffset:165,topOffset:40}},r.modelDiv={single:{div:document.createElement("div"),height:"56px",width:"36px",top:"0px",left:"0px",background:"#027d02",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.singleImage,leftOffset:250},continus:{div:document.createElement("div"),height:"16px",width:"36px",top:"65px",left:"0px",background:"#027d02",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.continusImage,leftOffset:250},move:{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"62.5px",background:"#094768",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.moveImage,leftOffset:250},upDown:{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"107.5px",background:"#094768",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.upDownImage,leftOffset:250},scale:{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"62.5px",background:"#094768",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.scaleImage,leftOffset:250},rotation:{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"107.5px",background:"#094768",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.rotationImage,leftOffset:250},"\u8bbe\u7f6e":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"170px",
background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.setImage,leftOffset:250},"\u4fee\u6539":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"215px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.modifyImage,leftOffset:250},"\u5220\u9664":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"260px",background:"#000000",click:void 0,mouseout:void 0,mouseover:void 0,isClick:r.clickMap.model,divs:void 0,image:r.imgSrc.drashImage,leftOffset:250}},r.markedWorld={drag:"\u653e\u7f6e\u6a21\u5f0f",operate:"\u79fb\u52a8\u6a21\u5f0f","\u5efa\u7b51":"\u5efa\u7b51","\u7ed3\u6784":"\u7ed3\u6784","\u6c34":"\u7ed9\u6392\u6c34","\u7535":"\u7535","\u6c14":"\u6c14","\u6696\u901a":"\u6696\u901a","\u5b89\u5168\u8bbe\u5907":"\u5b89\u5168\u8bbe\u5907","\u5176\u4ed6":"\u5176\u4ed6\u8bbe\u5907","\u6a21\u578b":"\u5bfc\u5165\u6a21\u578b",single:"\u653e\u7f6e\u6a21\u578b",continus:"\u6a2a\u6392\u653e\u7f6e\u6a21\u578b",move:"\u5e73\u79fb",upDown:"\u4e0a\u4e0b\u79fb\u52a8",scale:"\u7f29\u653e",rotation:"\u65cb\u8f6c","\u8bbe\u7f6e":"\u8bbe\u7f6e","\u4fee\u6539":"\u4fee\u6539","\u5220\u9664":"\u5220\u9664",cancle:"\u53d6\u6d88",back:"\u8fd4\u56de\u4e0a\u4e00\u6b65"},r.params={libModel:{"\u5efa\u7b51":e.MODEL_UP_URL+"/1/","\u7ed3\u6784":e.MODEL_UP_URL+"/2/","\u6c34":e.MODEL_UP_URL+"/tadiao/","\u7535":"","\u6696\u901a":"","\u6c14":"","\u5b89\u5168\u8bbe\u5907":"","\u5176\u4ed6":"","\u6a21\u578b":""},codeMap:{"01":"\u5efa\u7b51","02":"\u7ed3\u6784","03":"\u6c34","04":"\u7535","05":"\u6c14","06":"\u6696\u901a","07":"\u5b89\u5168\u8bbe\u5907","08":"\u5176\u4ed6","09":"\u6a21\u578b"},modelModel:"single",operateModel:"",lib:""},r.selectDiv={div:document.createElement("div"),height:"100px",width:"160px",bottom:"0px",left:"0px",leftOffset:0},r.initDiv=function(){function t(){var t=d.filterDiv;for(var o in t)!function(o){var r=t[o];r.isClick.set(o,!1);var n=r.div;r.click=function(t){var i=r.isClick,a=e.cons.getControls().OperateObject;0==i.get(o)?(n.style.background="#650301",n.style.borderColor="#f99692",i.set(o,!0),a.addFilterTypes(o)):(n.style.background=r.background,n.style.borderColor=r.background,i.set(o,!1),a.deleteFilterTypes(o))}}(o)}function o(){d._libDivs.style.width="220px",d._libDivs.style.height="85px",d._libDivs.style.position="absolute",d._libDivs.style.bottom="7.5px",d._libDivs.style.left="7.5px",p(d.libDiv,d._libDivs)}function r(){d._modelDivs.style.height="85px",d._modelDivs.style.position="absolute",d._modelDivs.style.bottom="7.5px",d._modelDivs.style.left="250px",p(d.modelDiv,d._modelDivs)}function n(){d._filterDivs.style.width="120px",d._filterDivs.style.height="45px",d._filterDivs.style.position="absolute",d._filterDivs.style.bottom="7.5px",p(d.filterDiv,d._filterDivs)}function i(){var e=d._filter,t=document.createElement("span");t.innerText="Filter",t.style.fontSize="16px",t.style.position="absolute",t.style.height="21px",t.style.width="38.16px",t.style.color="#ffffff",e.style.left="165px",e.style.bottom="0px",e.style.width="120px",e.style.height="81px",e.style.position="absolute",t.style.left=String(40.92)+"px",t.style.bottom="60px",e.appendChild(t),e.appendChild(d._filterDivs)}function a(){d._operateDivs.style.width="235px",d._operateDivs.style.height="100px",d._operateDivs.style.position="absolute",d._operateDivs.style.background="#000000",d._operateDivs.style.opacity="0.5",d._operateDivs.style.bottom="0px",d._operateDivs.style.right="45px"}function s(){function t(e){for(var t=0;t<e.length;++t){var o=e[t],r=o.div;r.style.left=o.left,r.style.top=o.top,r.style.textAlign="right",r.innerText=o.text,r.style.position="absolute",r.style.width=o.width,r.style.height=o.height}}function o(e){for(var t=0;t<e.length;++t){var o=e[t],r=o.div;r.style.left=o.left,r.style.top=o.top,r.style.width=o.width,r.style.height=o.height,r.style.position="absolute"}}var r=d.positionDiv,n=d._positionDiv;return r.mouseover=function(e){r.x_v.div.style.display="none",r.y_v.div.style.display="none",r.z_v.div.style.display="none",r.x_i.div.style.display="block",r.y_i.div.style.display="block",r.z_i.div.style.display="block",r.x_i.div.value=r.x_v.div.innerText.split(" ")[0],r.y_i.div.value=r.y_v.div.innerText.split(" ")[0],r.z_i.div.value=r.z_v.div.innerText.split(" ")[0]},r.mouseout=function(e){r.x_v.div.style.display="block",r.y_v.div.style.display="block",r.z_v.div.style.display="block",r.x_i.div.style.display="none",r.y_i.div.style.display="none",r.z_i.div.style.display="none",r.x_v.div.innerText=r.x_i.div.value+" X",r.y_v.div.innerText=r.y_i.div.value+" Y",r.z_v.div.innerText=r.z_i.div.value+" Z"},r.input=function(t){var o=new e.Vector3;o.x=parseFloat(r.x_i.div.value),o.y=parseFloat(r.y_i.div.value),o.z=parseFloat(r.z_i.div.value),e.cons.getControls().OperateObject.setPosition(o)},function(){n.style.width="117.5px",n.style.height="100px",n.style.position="absolute",n.style.color="#ffffff",n.style.fontSize="12px",n.style.bottom="0px",n.style.right="162.5px";var e=r.title.div,i=r.title;e.style.textAlign="left",e.innerText=i.text,e.style.left=i.left,e.style.top=i.top,e.style.position="absolute",e.style.width=i.width,e.style.height=i.height,e.style.fontSize="14px",t([r.x_v,r.y_v,r.z_v]),o([r.x_i,r.y_i,r.z_i]),n.appendChild(e),n.appendChild(r.x_v.div),n.appendChild(r.y_v.div),n.appendChild(r.z_v.div),n.appendChild(r.x_i.div),n.appendChild(r.y_i.div),n.appendChild(r.z_i.div)}}function l(){var t=d.scaleDiv,o=d._scaleDiv,r=!1;o.style.width="235px",o.style.height="100px",o.style.color="#ffffff",o.style.fontSize="8px",o.style.bottom="0px",o.style.right="45px",o.style.position="absolute",o.style.webkitUserSelect="none",o.style.userSelect="none",function(){var e=t.title,o=e.div;o.style.fontSize="14px",o.style.width=e.width,o.style.height=e.height,o.style.left=e.left,o.style.top=e.top,o.style.position="absolute",o.innerText=e.text}(),function(){var e=t.scale_S,o=e.div;o.style.width=e.width,o.style.height=e.height,o.style.position="absolute",o.style.borderRadius="5px",o.style.background="#404140",o.className="slider",o.id=e.text,e.mouseover=function(t){var r=e.text+String((50*Math.pow(parseFloat(o.style.width),2)/34225).toFixed(2));o.style.background="#7c1811",d._text.style.display="block",d._textP.innerText=r,d._text.style.width=String(10*r.length+10)+"px",d._text.style.top=String(parseFloat(e.top)-10+37.5-40)+"px",d._text.style.left=String(parseFloat(e.left)+557.5+5)+"px"},e.mouseout=function(e){d.mouseout(d),o.style.background="#404140"}}(),t.scale.div.appendChild(t.scale_S.div),function(){var o=t.scale,n=o.div;n.style.left=o.left,n.style.top=o.top,n.style.width=o.width,n.style.height=o.height,n.style.position="absolute",n.style.background="#000000",n.style.borderRadius="5px",n.style.borderColor="#586255",n.style.borderWidth="1px",n.style.borderStyle="solid";var i=function(){for(var e=0;e<n.children.length;++e)if("slider"===n.children[e].className)return n.children[e]}(),a=function(){var t=d.scaleDiv.scale_S.div.style.width,o=50*Math.pow(parseFloat(t),2)/34225;e.cons.getControls().OperateObject.setScale(o)};o.mouseDown=function(t){var o=e.cons.getControls().OperateObject;i.style.width=t.offsetX+"px",r=!0,o.setParam("new",o,!0),o.setParam("pre",o,!0),a()},o.mouseUp=function(t){var o=e.cons.getControls().OperateObject;1==r&&(i.style.width=t.offsetX+"px",r=!1,a()),o.setParam("post",o,!0),o.pushBackUp()},o.move=function(e){if(r){i.style.width=e.offsetX+"px";var t=i.id+String((50*Math.pow(parseFloat(i.style.width),2)/34225).toFixed(2));d._textP.innerText=t,d._text.style.width=String(10*t.length+10)+"px",a()}}}(),o.appendChild(t.title.div),o.appendChild(t.scale.div)}function c(){var e=d._controlDiv,t=d.controlDiv;e.style.height="85px",e.style.position="absolute",e.style.bottom="0px",e.style.right="0px",p(t,e),e.removeChild(t.cancle.div),e.removeChild(t.back.div)}function u(){var t=d.continusDiv,o=d._continusDiv,r=!1;t.attach=function(){var e=t.continus,o=e.div;o.addEventListener("mousemove",e.move,!1),o.addEventListener("mousedown",e.mouseDown,!1),o.addEventListener("mouseup",e.mouseUp,!1);var r=t.continus_S;o=r.div,o.addEventListener("mouseover",r.mouseover,!1),o.addEventListener("mouseout",r.mouseout,!1);var n=t.confire;o=n.div,o.addEventListener("mouseout",n.mouseout,!1),o.addEventListener("mouseover",n.mouseover,!1),o.addEventListener("click",n.click,!1);var i=t.cancle;o=i.div,o.addEventListener("mouseout",i.mouseout,!1),o.addEventListener("mouseover",i.mouseover,!1),o.addEventListener("click",i.click,!1)},t.dispose=function(){var e=t.continus,o=e.div;o.removeEventListener("mousemove",e.move,!1),o.removeEventListener("mousedown",e.mouseDown,!1),o.removeEventListener("mouseup",e.mouseUp,!1);var r=t.continus_S;o=r.div,o.removeEventListener("mouseover",r.mouseover,!1),o.removeEventListener("mouseout",r.mouseout,!1);var n=t.confire;o=n.div,o.removeEventListener("mouseout",n.mouseout,!1),o.removeEventListener("mouseover",n.mouseover,!1),o.removeEventListener("click",n.click,!1);var i=t.cancle;o=i.div,o.removeEventListener("mouseout",i.mouseout,!1),o.removeEventListener("mouseover",i.mouseover,!1),o.removeEventListener("click",i.click,!1)},function(){o.style.left="50%",o.style.position="absolute",o.style.width="400px",o.style.height="100px",o.style.background="#000000",o.style.bottom="7.5px",o.style.webkitUserSelect="none",o.style.zIndex="3"}(),function(){var o=t.continus,n=o.div,i=t.continus_S.div;n.style.left=o.left,n.style.top=o.top,n.style.width=o.width,n.style.height=o.height,n.style.position="absolute",n.style.background="#000000",n.style.borderRadius="5px",n.style.borderColor="#586255",n.style.borderWidth="1px",n.style.borderStyle="solid";var a=function(){var o=e.cons.getControls().DragControl,r=Math.floor(parseInt(t.continus_S.div.style.width)/3);t.text.div.innerText=t.text.text+" "+r,o.setPlaceNumber(r)};o.mouseDown=function(e){i.style.width=e.offsetX+"px",r=!0,a()},o.mouseUp=function(e){i.style.width=e.offsetX+"px",r=!1,a()},o.move=function(e){r&&(i.style.width=e.offsetX+"px",a())}}(),function(){var e=t.continus_S,o=e.div;o.style.width="12px",o.style.height=e.height,o.style.position="absolute",o.style.borderRadius="5px",o.style.background="#404140",e.mouseover=function(e){o.style.background="#7c1811"},e.mouseout=function(e){o.style.background="#404140"}}(),function(){var e=t.text,o=e.div;o.style.height=e.height,o.style.left="10px",o.style.top="2px",o.style.position="absolute",o.style.background="#00000000",o.style.fontSize="12px",o.innerText=e.text+" 4",o.style.color="#ffffff"}(),function(){var o=t.cancle,r=o.div;r.style.top=o.top,r.style.right=o.right,r.style.width=o.width,r.style.height=o.height,r.style.borderStyle="solid",r.style.borderWidth="1px",r.style.borderColor="#000000",r.style.background="#000000",r.style.position="absolute";var n=document.createElement("img");n.src=o.image,n.width=38,n.height=38,r.appendChild(n),o.mouseover=function(e){r.style.borderColor="#ffffff"},o.mouseout=function(e){r.style.borderColor="#000000"},o.click=function(t){var o=e.cons.getControls().DragControl;d.removeContinusDiv(d),d.addWind(d),o.placeObject(0),o.removeOverlay(),o.active(),o.setModel("continus")}}(),function(){var o=t.confire,r=o.div;r.style.top=o.top,r.style.right=o.right,r.style.width=o.width,r.style.height=o.height,r.style.borderStyle="solid",r.style.borderWidth="1px",r.style.borderColor="#000000",r.style.background="#000000",r.style.position="absolute";var n=document.createElement("img");n.src=o.image,n.width=38,n.height=38,r.appendChild(n),o.mouseover=function(e){r.style.borderColor="#ffffff"},o.mouseout=function(e){r.style.borderColor="#000000"},o.click=function(t){var o=e.cons.getControls().DragControl;d.removeContinusDiv(d),d.addWind(d),o.removeOverlay(),o.active(),o.setModel("continus"),o.placeObject(-1)}}(),t.continus.div.appendChild(t.continus_S.div),t.continus.div.appendChild(t.text.div),o.appendChild(t.continus.div),o.appendChild(t.cancle.div),o.appendChild(t.confire.div)}var d=null,h=function(e){var t=e.div;t.style.left=e.left,t.style.bottom=e.bottom,t.style.width=e.width,t.style.height=e.height,t.style.position="absolute";var o=document.createElement("span");o.innerText="Selected",o.style.fontSize="16px",o.style.color="#ffffff",o.style.bottom="55px",o.style.position="absolute",o.style.width="65px",o.style.left=String(parseFloat(t.style.width)/2-parseFloat(o.style.width)/2)+"px";var r=document.createElement("span");r.id="no.",r.innerText="0",r.style.color="#ffffff",r.style.fontSize="28px",r.style.bottom="20px",r.style.position="absolute",r.style.width="16.42px",r.style.left=String(parseFloat(t.style.width)/2-parseFloat(r.style.width)/2)+"px",t.appendChild(o),t.appendChild(r)},p=function(){function t(t,o,r){var n=t.isClick,i=t.div;void 0!=n&&n.set(r,!1),i.style.width=t.width,i.style.height=t.height,i.style.background=t.background,i.style.left=t.left,i.style.top=t.top,i.style.right=t.right,i.style.borderStyle="solid",i.style.borderColor=t.background,i.style.borderWidth="2px",i.style.position="absolute",i.style.opacity="1.",i.id=r;var a=document.createElement("img");return a.src=t.image,a.width=parseFloat(t.width),a.height=parseFloat(t.height),i.appendChild(a),t.click=function(o){var n=e.cons.getControls().OperateObject,i=e.cons.getControls().DragControl;"move"===r||"upDown"===r||"scale"===r||"rotation"===r?(i.deActive(),n.active()):"single"!==r&&"continus"!==r||(n.deActive(),""!=d.params.lib&&i.active()),d.setClick(r,t,d)},t.mouseover=function(e){var o=t.isClick;(void 0!=o&&!o.get(r)||void 0==o)&&setTimeout(function(){i.style.borderColor="#FFFFFF",i.style.borderWidth="1px",i.style.left=String(parseFloat(t.left)+1)+"px",i.style.top=String(parseFloat(t.top)+1)+"px"},100),d.mouseover(d,i,r,t.leftOffset,t.topOffset)},t.mouseout=function(e){var o=t.isClick;(void 0!=o&&!o.get(r)||void 0==o)&&setTimeout(function(){i.style.borderColor=t.background,i.style.borderWidth="2px",i.style.left=String(parseFloat(t.left)-1)+"px",i.style.top=String(parseFloat(t.top)-1)+"px"},100),d.mouseout(d)},o.appendChild(i),i}return function(e,o){for(var r in e)e[r].divs=e,t(e[r],o,r)}}(),m=function(){function t(t){for(var o=0;o<t.length;++o)!function(o){var r=t[o],n=r.div;n.style.left=r.left,n.style.top=r.top,n.style.width=r.width,n.style.height=r.height,n.style.position="absolute",n.style.background="#000000",n.style.borderRadius="5px",n.style.borderColor="#586255",n.style.borderWidth="1px",n.style.borderStyle="solid";var a=function(){for(var e=0;e<n.children.length;++e)if("slider"===n.children[e].className)return n.children[e]}(),s=function(){var t=new THREE.Euler,o=void 0;return function(){o=e.cons.getControls().OperateObject;var r=d.rotationDiv,n=r.rotationX_S.div.style.width,i=r.rotationY_S.div.style.width,a=r.rotationZ_S.div.style.width;t.x=(360*parseFloat(n)/185-180)*(Math.PI/180),t.y=(360*parseFloat(i)/185-180)*(Math.PI/180),t.z=(360*parseFloat(a)/185-180)*(Math.PI/180),o.setRotation(t)}}();r.mouseDown=function(t){var o=e.cons.getControls().OperateObject;a.style.width=t.offsetX+"px",i=!0,o.setParam("new",o,!0),o.setParam("pre",o,!0),s()},r.mouseUp=function(t){var o=e.cons.getControls().OperateObject;1==i&&(a.style.width=t.offsetX+"px",i=!1,s()),o.setParam("post",o,!0),o.pushBackUp(),e.logger.debug(o._backUp)},r.move=function(e){if(i){a.style.width=e.offsetX+"px";var t=a.id+String(Math.round(360*parseFloat(a.style.width)/185-180));d._textP.innerText=t,d._text.style.width=String(10*t.length+10)+"px",s()}}}(o)}function o(e){for(var t=0;t<e.length;++t)!function(t){var o=e[t],r=o.div;r.style.width=o.width,r.style.height=o.height,r.style.position="absolute",r.style.borderRadius="5px",r.style.background="#404140",r.className="slider",r.id=o.text,o.mouseover=function(e){var t=o.text+String(Math.round(360*parseFloat(r.style.width)/185-180));r.style.background="#7c1811",d._text.style.display="block",d._textP.innerText=t,d._text.style.width=String(10*t.length+10)+"px",d._text.style.top=String(parseFloat(o.top)-10+37.5-40)+"px",d._text.style.left=String(parseFloat(o.left)+557.5+5)+"px"},o.mouseout=function(e){d.mouseout(d),r.style.background="#404140"}}(t)}var r=d.rotationDiv,n=d._rotationDiv,i=!1;return function(){n.style.width="235px",n.style.height="100px",n.style.color="#ffffff",n.style.fontSize="8px",n.style.bottom="0px",n.style.right="45px",n.style.position="absolute",n.style.webkitUserSelect="none",n.style.userSelect="none";var e=r.title,i=e.div;i.style.fontSize="14px",i.style.width=e.width,i.style.height=e.height,i.style.left=e.left,i.style.top=e.top,i.style.position="absolute",i.innerText=e.text,o([r.rotationX_S,r.rotationY_S,r.rotationZ_S]),r.rotationX.div.appendChild(r.rotationX_S.div),r.rotationY.div.appendChild(r.rotationY_S.div),r.rotationZ.div.appendChild(r.rotationZ_S.div),t([r.rotationX,r.rotationY,r.rotationZ]),n.appendChild(i),n.appendChild(r.rotationX.div),n.appendChild(r.rotationY.div),n.appendChild(r.rotationZ.div)}};return function(e){d=e;var p=e._w;p.style.background="#000000",p.style.width="557.5px",p.style.height="100px",p.style.bottom="0px",p.style.left="0px",p.style.opacity="0.5",p.style.position="absolute",p.id="wind",e.wind.appendChild(p),e.operatorButton.style.left="528.5px",e.operatorButton.style.width="28px",e.operatorButton.style.height="18px",e.operatorButton.style.background="#000000",e.operatorButton.style.bottom="100px",e.operatorButton.style.position="absolute",e.operatorButton.style.opacity="0.5",e.operatorButton.style.borderStyle="solid",e.operatorButton.style.borderWidth="1px",e.operatorButton.style.borderColor="#FFFFFF";var f=document.createElement("img");f.src=e.imgSrc.operateImage,f.width=28,f.height=18,e.operatorButton.appendChild(f),e.dragButton.style.left="499.5px",e.dragButton.style.height="18px",e.dragButton.style.width="28px",e.dragButton.style.bottom="100px",e.dragButton.style.background="#000000",e.dragButton.style.position="absolute",e.dragButton.style.opacity="0.5",e.dragButton.style.borderStyle="solid",e.dragButton.style.borderWidth="1px",e.dragButton.style.borderColor="#FFFFFF",e.dragButton.style.borderBottomColor="#000000";var v=document.createElement("img");v.src=e.imgSrc.dragImage,v.width=28,v.height=18,e.dragButton.appendChild(v),e.wind.appendChild(this.dragButton),e.wind.appendChild(this.operatorButton),e.wind.style.position="absolute",e.wind.style.left="10px",e.wind.style.bottom="10px",e.wind.style.height="120px",e.wind.style.width="602.5px",e.wind.style.zIndex="2",e.wind.style.userSelect="none",e._text.style.display="none",e._text.style.height="30px",e._text.style.background="#ffffff",e._text.style.opacity="0.8",e._textP.style.color="#000000",e._textP.style.fontSize="16px",e._textP.style.verticalAlign="middle",e._text.style.position="absolute",e._text.style.textAlign="center",e._text.style.verticalAlign="middle",e._text.style.margin="0 auto",e._text.style.zIndex="5",e._text.style.right=e.dragButton.style.right,e._text.appendChild(e._textP),e.wind.appendChild(e._text),o(),e.wind.appendChild(e._libDivs),r(),e.wind.appendChild(e._modelDivs),a(),e._libDivs.style.opacity="0",e._modelDivs.style.opacity="0",h(d.selectDiv),n(),i(),t(),s()(),m()(),l(),c(),u(),e.wind.appendChild(d._controlDiv)}}(),r.setText=function(e,t,o,r,n,i,a,s,l,c){var u=e._textP,d=e._text,h=e.markedWorld[o];u.innerText=h,d.style.width=String(20*u.innerText.length+10)+"px",void 0!=n&&(c=void 0==c?0:c,d.style.top=String(n-5+37.5-40+c)+"px"),void 0!=a&&(d.style.bottom=String(a+r+5)+"px"),void 0!=i&&(l=void 0==l?0:l,d.style.left=String(i+l)+"px"),void 0!=s&&(l=void 0==l?0:l,d.style.right=String(s+l)+"px")};var n=r;n.initDiv(n),r.getHotKey=function(){return{hotkey:"ctr+l",needLongPress:!1}},r.getName=function(){return"LoadControl"},r.regist=function(){null!=n.wind&&e.container.appendChild(n.wind),n._libDivs.style.opacity="0",n._modelDivs.style.opacity="0";var t=0,o=setInterval(function(){n._libDivs.style.opacity=String(t/2e3),n._modelDivs.style.opacity=String(t/2e3),(t+=10)>=2e3&&clearInterval(o)},10);n.setParams(n),this.attachDiv()},r.unRegist=function(){null!=n.wind&&e.container.removeChild(n.wind),e.cons.getControls().DragControl.deActive(),e.cons.getControls().OperateObject.deActive(),this.disposeDiv()};var i=void 0;return r.dragButtonClick=function(t){if("operate"==n._mode){n._mode="drag";var o=e.cons.getControls().OperateObject,r=e.cons.getControls().DragControl;o.deActive(),n.setParams(n),""!=n.params.lib&&r.active(),void 0!=i&&clearInterval(i),n.dragButton.style.borderBottomColor="#000000",n.operatorButton.style.borderBottomColor="#FFFFFF",n.wind.appendChild(n._libDivs),n._modelDivs.appendChild(n.modelDiv.single.div),n._modelDivs.appendChild(n.modelDiv.continus.div),n.wind.removeChild(n.selectDiv.div),n.wind.removeChild(n._filter),n._libDivs.style.opacity="0",n._modelDivs.style.opacity="0";var a=0;i=setInterval(function(){n._libDivs.style.opacity=String(a/2e3),n._modelDivs.style.opacity=String(a/2e3),(a+=10)>=2e3&&clearInterval(i)},10)}e.logger.debug("dragButtonClick")},r.operatorButtonClick=function(t){if("drag"==n._mode){var o=e.cons.getControls().OperateObject,r=e.cons.getControls().DragControl;n._mode="operate",r.deActive(),o.active(),void 0!=i&&clearInterval(i),n.operatorButton.style.borderBottomColor="#000000",n.dragButton.style.borderBottomColor="#FFFFFF",n.wind.removeChild(n._libDivs),n._modelDivs.removeChild(n.modelDiv.single.div),n._modelDivs.removeChild(n.modelDiv.continus.div),n.wind.appendChild(n.selectDiv.div),n.wind.appendChild(n._filter),n._filter.style.opacity="0",n._modelDivs.style.opacity="0";var a=0;i=setInterval(function(){n._filter.style.opacity=String(a/2e3),n._modelDivs.style.opacity=String(a/2e3),(a+=10)>=2e3&&clearInterval(i)},10),n.setClick("move",n.modelDiv.move,n)}e.logger.debug("operatorButtonClick")},r.operatorButtonMouseOver=function(e){var t=n.operatorButton;n.mouseover(n,t,"operate")},r.operatorButtonMouseOut=function(e){n._text.style.display="none"},r.dragButtonMouseOver=function(e){var t=n.dragButton;n.mouseover(n,t,"drag")},r.dragButtonMouseOut=function(e){n.mouseout(n)},r.cancleClick=function(){e.cons.getControls().OperateObject.cancle(),n.mouseout(n)},r.backClick=function(){e.cons.getControls().OperateObject.backUp()},r}return __extends(o,t),o.prototype.setClick=function(t,o,r){var n,i,a=o.isClick,s=e.cons.getControls().DragControl,l=e.cons.getControls().OperateObject;void 0!=a&&a.forEach(function(c,u){n=o.divs[u].div;var d=o.divs[u];if(i=o.divs[u].background,u===t)if(a.set(u,!0),n.style.left=String(parseFloat(o.left)-1)+"px",n.style.top=String(parseFloat(o.top)-1)+"px",n.style.borderColor="#FFFFFF",n.style.borderWidth="2px",void 0!=r.libDiv[t]){new e.Load(r.params.libModel[t],t,new e.Matrix4,function(o,n,i,a,l){e.logger.debug("name",a),s.setObject(n,i,a),r.params.lib=t},-1);l.setSelectType(t)}else"single"===t||"continus"===t?(e.logger.debug("name",t),s.setModel(t),s.active(),l.setFilterMode(null)):"move"!==t&&"upDown"!==t&&"scale"!==t&&"rotation"!==t||("upDown"===t?l.setModel("fluctuation"):l.setModel(t),r.params.operateModel=t,"drag"==r._mode?l.setFilterMode("select"):"operate"==r._mode&&l.setFilterMode("filter"));else 1==c&&(n.style.borderColor=i,n.style.borderWidth="2px",n.style.left=String(parseFloat(d.left)+1)+"px",n.style.top=String(parseFloat(d.top)+1)+"px"),a.set(u,!1)})},o.prototype.setUrl=function(e,t){var o=this.params.codeMap[e];this.params.libModel[o]=t},o.prototype.setParamUrls=function(e){for(var t in e)this.setUrl(t,e[t])},o.prototype.setNo=function(e){var t=this;((function(){for(var e=t.selectDiv.div.children,o=0;o<e.length;++o)if("no."==e[o].id)return e[o]})()).innerText=String(e)},o.prototype.setParams=function(t){var o=(e.cons.getControls().OperateObject,e.cons.getControls().DragControl,t.params.modelModel);t.setClick(o,t.modelDiv[o],t)},o.prototype.addContinusDiv=function(t){e.container.appendChild(t._continusDiv),t.continusDiv.attach()},o.prototype.removeContinusDiv=function(t){e.container.removeChild(t._continusDiv),t.continusDiv.dispose()},o.prototype.addWind=function(t){e.container.appendChild(t.wind)},o.prototype.removeWind=function(t){e.container.removeChild(t.wind)},o.prototype.removeControl=function(){},o.prototype.attachDiv=function(){e.cons.getControls().OperateObject;for(var t in this.libDiv)this.libDiv[t].div.addEventListener("click",this.libDiv[t].click),this.libDiv[t].div.addEventListener("mouseout",this.libDiv[t].mouseout),this.libDiv[t].div.addEventListener("mouseover",this.libDiv[t].mouseover);for(var o in this.modelDiv)this.modelDiv[o].div.addEventListener("click",this.modelDiv[o].click),this.modelDiv[o].div.addEventListener("mouseout",this.modelDiv[o].mouseout),this.modelDiv[o].div.addEventListener("mouseover",this.modelDiv[o].mouseover);for(var r in this.filterDiv)this.filterDiv[r].div.addEventListener("click",this.filterDiv[r].click),this.filterDiv[r].div.addEventListener("mouseout",this.filterDiv[r].mouseout),this.filterDiv[r].div.addEventListener("mouseover",this.filterDiv[r].mouseover);for(var n in this.controlDiv)this.controlDiv[n].div.addEventListener("mouseout",this.controlDiv[n].mouseout),this.controlDiv[n].div.addEventListener("mouseover",this.controlDiv[n].mouseover);this.controlDiv.cancle.div.addEventListener("click",this.cancleClick,!1),this.controlDiv.back.div.addEventListener("click",this.backClick,!1);for(var i in this.rotationDiv)if("rotationX"===i||"rotationY"===i||"rotationZ"===i){var a=this.rotationDiv[i];a.div.addEventListener("mousedown",a.mouseDown,!1),a.div.addEventListener("mousemove",a.move,!1),a.div.addEventListener("mouseup",a.mouseUp,!1)}else if("rotationX_S"===i||"rotationY_S"===i||"rotationZ_S"===i){var a=this.rotationDiv[i];a.div.addEventListener("mouseover",a.mouseover,!1),a.div.addEventListener("mouseout",a.mouseout,!1)}this.wind.addEventListener("mouseout",this.positionDiv.mouseout,!1),this.wind.addEventListener("mouseover",this.positionDiv.mouseover,!1),this._positionDiv.addEventListener("input",this.positionDiv.input,!1),this.modelDiv["\u5220\u9664"].div.addEventListener("click",this.deleteClick,!1),this.scaleDiv.scale.div.addEventListener("mousedown",this.scaleDiv.scale.mouseDown,!1),this.scaleDiv.scale.div.addEventListener("mousemove",this.scaleDiv.scale.move,!1),this.scaleDiv.scale.div.addEventListener("mouseup",this.scaleDiv.scale.mouseUp,!1),this.scaleDiv.scale_S.div.addEventListener("mouseover",this.scaleDiv.scale_S.mouseover,!1),this.scaleDiv.scale_S.div.addEventListener("mouseout",this.scaleDiv.scale_S.mouseout,!1),this.dragButton.addEventListener("click",this.dragButtonClick,!1),this.dragButton.addEventListener("mouseover",this.dragButtonMouseOver,!1),this.dragButton.addEventListener("mouseout",this.dragButtonMouseOut,!1),this.operatorButton.addEventListener("click",this.operatorButtonClick,!1),this.operatorButton.addEventListener("mouseover",this.operatorButtonMouseOver,!1),this.operatorButton.addEventListener("mouseout",this.operatorButtonMouseOut,!1)},o.prototype.disposeDiv=function(){for(var e in this.libDiv)this.libDiv[e].div.removeEventListener("click",this.libDiv[e].click),this.libDiv[e].div.removeEventListener("mouseout",this.libDiv[e].mouseout),this.libDiv[e].div.removeEventListener("mouseover",this.libDiv[e].mouseover);for(var t in this.modelDiv)this.modelDiv[t].div.removeEventListener("click",this.modelDiv[t].click),this.modelDiv[t].div.removeEventListener("mouseout",this.modelDiv[t].mouseout),this.modelDiv[t].div.removeEventListener("mouseover",this.modelDiv[t].mouseover);for(var o in this.filterDiv)this.filterDiv[o].div.removeEventListener("click",this.filterDiv[o].click),this.filterDiv[o].div.removeEventListener("mouseout",this.filterDiv[o].mouseout),this.filterDiv[o].div.removeEventListener("mouseover",this.filterDiv[o].mouseover);for(var r in this.controlDiv)this.controlDiv[r].div.removeEventListener("mouseout",this.controlDiv[r].mouseout),this.controlDiv[r].div.removeEventListener("mouseover",this.controlDiv[r].mouseover);this.wind.removeEventListener("mouseout",this.positionDiv.mouseout,!1),this.wind.removeEventListener("mouseover",this.positionDiv.mouseover,!1),this._positionDiv.removeEventListener("input",this.positionDiv.input,!1),this.controlDiv.cancle.div.removeEventListener("click",this.cancleClick,!1),this.controlDiv.back.div.addEventListener("click",this.backClick,!1);for(var n in this.rotationDiv)if("rotationX"===n||"rotationY"===n||"rotationZ"===n){var i=this.rotationDiv[n];i.div.removeEventListener("mousedown",i.mouseDown,!1),i.div.removeEventListener("mousemove",i.move,!1),i.div.removeEventListener("mouseup",i.mouseUp,!1)}else if("rotationX_S"===n||"rotationY_S"===n||"rotationZ_S"===n){var i=this.rotationDiv[n];i.div.removeEventListener("mouseover",i.mouseover,!1),i.div.removeEventListener("mouseout",i.mouseout,!1)}this.modelDiv["\u5220\u9664"].div.removeEventListener("click",this.deleteClick,!1),this.scaleDiv.scale.div.removeEventListener("mousedown",this.scaleDiv.scale.mouseDown,!1),this.scaleDiv.scale.div.removeEventListener("mousemove",this.scaleDiv.scale.move,!1),this.scaleDiv.scale.div.removeEventListener("mouseup",this.scaleDiv.scale.mouseUp,!1),this.scaleDiv.scale_S.div.addEventListener("mouseover",this.scaleDiv.scale_S.mouseover,!1),this.scaleDiv.scale_S.div.addEventListener("mouseout",this.scaleDiv.scale_S.mouseout,!1),this.dragButton.removeEventListener("click",this.dragButtonClick,!1),this.dragButton.removeEventListener("mouseover",this.dragButtonMouseOver,!1),this.dragButton.removeEventListener("mouseout",this.dragButtonMouseOut,!1),this.operatorButton.removeEventListener("click",this.operatorButtonClick,!1),this.operatorButton.removeEventListener("mouseover",this.operatorButtonMouseOver,!1),this.operatorButton.removeEventListener("mouseout",this.operatorButtonMouseOut,!1)},o.prototype.deleteClick=function(t){e.logger.debug("delete click");var o=e.cons.getControls().DragControl,r=e.cons.getControls().OperateObject;o.deActive(),r.active(),r.setModel("delete")},o.prototype.addPsotion=function(){var e=this;e.wind.appendChild(e._operateDivs),e.wind.appendChild(e._positionDiv),e._operateDivs.style.opacity="0";var t=0,o=setInterval(function(){e._operateDivs.style.opacity=t/2e3>.5?"0.5":String(t/2e3),(t+=10)>=2e3&&clearInterval(o)},10);e.wind.style.width=String(parseFloat(e.wind.style.width)+240)+"px"},o.prototype.setPosition=function(e){var t=this.positionDiv,o=t.x_v.div,r=t.y_v.div,n=t.z_v.div;o.innerText=e.x.toFixed(2)+" X",r.innerText=e.y.toFixed(2)+" Y",n.innerText=e.z.toFixed(2)+" Z"},o.prototype.setRotation=function(e){var t=this.rotationDiv,o=t.rotationX_S.div,r=t.rotationY_S.div,n=t.rotationZ_S.div,i=0,a=0,s=0;i=e.x>Math.PI?e.x-2*Math.PI:e.x,a=e.y>Math.PI?e.y-2*Math.PI:e.y,s=e.z>Math.PI?e.z-2*Math.PI:e.z,o.style.width=i/Math.PI*180*185/360+92.5+"px",r.style.width=a/Math.PI*180*185/360+92.5+"px",n.style.width=s/Math.PI*180*185/360+92.5+"px"},o.prototype.setScale=function(e){this.scaleDiv.scale_S.div.style.width=185*Math.sqrt(e/50)+"px"},o.prototype.removePosition=function(){var e=this;e.wind.removeChild(e._operateDivs),e.wind.removeChild(e._positionDiv),e.wind.style.width=String(parseFloat(e.wind.style.width)-240)+"px"},o.prototype.addRotation=function(){var e=this;e.wind.appendChild(e._operateDivs),e.wind.appendChild(e._rotationDiv),e._operateDivs.style.opacity="0";var t=0,o=setInterval(function(){e._operateDivs.style.opacity=t/2e3>.5?"0.5":String(t/2e3),(t+=10)>=2e3&&clearInterval(o)},10);e.wind.style.width=String(parseFloat(e.wind.style.width)+240)+"px"},o.prototype.removeRotation=function(){var e=this;e.wind.removeChild(e._operateDivs),e.wind.removeChild(e._rotationDiv),e.wind.style.width=String(parseFloat(e.wind.style.width)-240)+"px"},o.prototype.addScale=function(){var e=this;e.wind.appendChild(e._operateDivs),e.wind.appendChild(e._scaleDiv),e._operateDivs.style.opacity="0";var t=0,o=setInterval(function(){e._operateDivs.style.opacity=t/2e3>.5?"0.5":String(t/2e3),(t+=10)>=2e3&&clearInterval(o)},10);e.wind.style.width=String(parseFloat(e.wind.style.width)+240)+"px"},
o.prototype.removeScale=function(){var e=this;e.wind.removeChild(e._operateDivs),e.wind.removeChild(e._scaleDiv),e.wind.style.width=String(parseFloat(e.wind.style.width)-240)+"px"},o.prototype.addCancle=function(){this._controlDiv.appendChild(this.controlDiv.cancle.div)},o.prototype.removeCancle=function(){this._controlDiv.removeChild(this.controlDiv.cancle.div)},o.prototype.addBack=function(){this._controlDiv.appendChild(this.controlDiv.back.div)},o.prototype.removeBack=function(){this._controlDiv.removeChild(this.controlDiv.back.div)},o.prototype.mouseout=function(e){var t=e._text.style;t.display="none",t.left="",t.right="",t.top="",t.bottom=""},o.prototype.mouseover=function(e,t,o,r,n){var i=parseFloat(t.style.height),a=parseFloat(t.style.top);isNaN(a)&&(a=void 0);var s=parseFloat(t.style.left);isNaN(s)&&(s=void 0);var l=parseFloat(t.style.right);isNaN(l)&&(l=void 0);var c=parseFloat(t.style.bottom);isNaN(c)&&(c=void 0),e.setText(e,t,o,i,a,s,c,l,r,n),e._text.style.display="block"},o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.LoadControl=t}(Neon||(Neon={}));var Neon;!function(e){var t;!function(e){e[e.FXAASHADER=1]="FXAASHADER",e[e.BLENDSHADER=2]="BLENDSHADER",e[e.SMAASHADER=4]="SMAASHADER"}(t=e.SHADERNAME||(e.SHADERNAME={}));var o=function(){function e(){this.defines={},this.uniforms={};var e={tDiffuse:{value:{}},resolution:{value:{}}},t=["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),o=["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n");this.uniforms=e,this.vertexShader=t,this.fragmentShader=o,this.defines=void 0}return e}(),r=function(){function e(){this.defines={},this.uniforms={};var e={tDiffuseBaseModelAndAddModel:{value:{}},tDiffuseAssistModel:{value:{}},tDepthBaseModelAndAddModel:{value:{}},tDepthAssistModel:{value:{}},size:{value:{}},aoClamp:{value:.5},lumInfluence:{value:.5},resolution:{value:{}}},t=["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),o=["varying vec2 vUv;","uniform sampler2D tDiffuseBaseModelAndAddModel;","uniform sampler2D tDepthBaseModelAndAddModel;","uniform sampler2D tDiffuseAssistModel;","uniform sampler2D tDepthAssistModel;","uniform vec2 size;","uniform float aoClamp;","uniform float lumInfluence;","#define DL 2.399963229728653","#define EULER 2.718281828459045","const int samples = 8;","const float radius = 4.0;","const bool useNoise = false;","const float noiseAmount = 0.0003;","const float diffArea = 0.5;","const float gDisplace = 0.5;","#include <packing>","vec2 rand( const vec2 coord ) {","vec2 noise;","if ( useNoise ) {","float nx = dot ( coord, vec2( 12.9898, 78.233 ) );","float ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );","noise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );","} else {","float ff = fract( 1.0 - coord.s * ( size.x / 2.0 ) );","float gg = fract( coord.t * ( size.y / 2.0 ) );","noise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;","}","return ( noise * 2.0  - 1.0 ) * noiseAmount;","}","float readDepth( const in vec2 coord, const sampler2D tDepth ) {","return texture2D( tDepth, coord ).x;","}","float compareDepths( const in float depth1, const in float depth2, inout int far ) {","float garea = 2.0;","float diff = ( depth1 - depth2 ) * 100.0;","if ( diff < gDisplace ) {","garea = diffArea;","} else {","far = 1;","}","float dd = diff - gDisplace;","float gauss = pow( EULER, -2.0 * dd * dd / ( garea * garea ) );","return gauss;","}","float calcAO( float depth, float dw, float dh, const sampler2D tDepth ) {","float dd = radius - depth * radius;","vec2 vv = vec2( dw, dh );","vec2 coord1 = vUv + dd * vv;","vec2 coord2 = vUv - dd * vv;","float temp1 = 0.0;","float temp2 = 0.0;","int far = 0;","temp1 = compareDepths( depth, readDepth( coord1, tDepth ), far );","if ( far > 0 ) {","temp2 = compareDepths( readDepth( coord2, tDepth ), depth, far );","temp1 += ( 1.0 - temp1 ) * temp2;","}","return temp1;","}","vec4 SSAO(const sampler2D tDiffuse, const sampler2D tDepth){","vec2 noise = rand( vUv );","float depth = readDepth( vUv, tDepth );","float tt = clamp( depth, aoClamp, 1.0 );","float w = ( 1.0 / size.x )  / tt + ( noise.x * ( 1.0 - noise.x ) );","float h = ( 1.0 / size.y ) / tt + ( noise.y * ( 1.0 - noise.y ) );","float ao = 0.0;","float dz = 1.0 / float( samples );","float z = 1.0 - dz / 2.0;","float l = 0.0;","for ( int i = 0; i <= samples; i ++ ) {","float r = sqrt( 1.0 - z );","float pw = cos( l ) * r;","float ph = sin( l ) * r;","ao += calcAO( depth, pw * w, ph * h, tDepth );","z = z - dz;","l = l + DL;","}","ao /= float( samples );","ao = 1.0 - ao;","vec3 color = texture2D( tDiffuse, vUv ).rgb;","float a = texture2D( tDiffuse, vUv ).a;","vec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );","float lum = dot( color.rgb, lumcoeff );","vec3 luminance = vec3( lum );","vec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","//final = vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","return vec4( final, a );","}","vec4 checkDepth (sampler2D depth1, sampler2D depth2, vec4 color1, vec4 color2){","float d1 = texture2D(depth1, vUv).x;","float d2 = texture2D(depth2, vUv).x;","if (d1 > d2){","return color2;","}","else{","if (color1.a < 1.0){","float a1 = 1.0 - color1.a;","float a2 = 1.0 - a1;","return vec4(color2.r*a1 + color1.r*a2, color2.g*a1 + color1.g*a2, color2.b*a1 + color1.b*a2, a2);","}","else","return color1;","}","}","void main() {","vec4 diffuse = texture2D(tDiffuseBaseModelAndAddModel, vUv).rgba;","vec4 diffuse1 = texture2D(tDiffuseAssistModel, vUv).rgba;","//vec4 diffuse = SSAO(tDiffuseBaseModelAndAddModel, tDepthBaseModelAndAddModel);","//vec4 diffuse1 = SSAO(tDiffuseAssistModel, tDepthAssistModel);","gl_FragColor.rgba = checkDepth(tDepthBaseModelAndAddModel, tDepthAssistModel, diffuse, diffuse1);","}"].join("\n");this.uniforms=e,this.vertexShader=t,this.fragmentShader=o,this.defines=void 0}return e}(),n=function(){function e(){this.defines={},this.uniforms={};var e={SMAA_THRESHOLD:"0.1"},t={tDiffuse:{value:{}},resolution:{value:{}}},o=["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","void SMAAEdgeDetectionVS( vec2 texcoord ) {","vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );","vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );","vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );","}","void main() {","vUv = uv;","SMAAEdgeDetectionVS( vUv );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),r=["uniform sampler2D tDiffuse;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {","vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );","vec4 delta;","vec3 C = texture2D( colorTex, texcoord ).rgb;","vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;","vec3 t = abs( C - Cleft );","delta.x = max( max( t.r, t.g ), t.b );","vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;","t = abs( C - Ctop );","delta.y = max( max( t.r, t.g ), t.b );","vec2 edges = step( threshold, delta.xy );","if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )","discard;","vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;","t = abs( C - Cright );","delta.z = max( max( t.r, t.g ), t.b );","vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;","t = abs( C - Cbottom );","delta.w = max( max( t.r, t.g ), t.b );","float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );","vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;","t = abs( C - Cleftleft );","delta.z = max( max( t.r, t.g ), t.b );","vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;","t = abs( C - Ctoptop );","delta.w = max( max( t.r, t.g ), t.b );","maxDelta = max( max( maxDelta, delta.z ), delta.w );","edges.xy *= step( 0.5 * maxDelta, delta.xy );","return vec4( edges, 0.0, 0.0 );","}","void main() {","gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );","}"].join("\n");this.uniforms=t,this.vertexShader=o,this.fragmentShader=r,this.defines=e}return e}(),i=function(){function e(e){switch(e){case t.FXAASHADER:this.shader=new o;break;case t.BLENDSHADER:this.shader=new r;break;case t.SMAASHADER:this.shader=new n;break;default:console.log("shader error! have no this shader.")}}return e.prototype.getUniforms=function(){return this.shader.uniforms},e.prototype.getDefins=function(){return this.shader.defines},e.prototype.getVertexShader=function(){return this.shader.vertexShader},e.prototype.getFragmentShader=function(){return this.shader.fragmentShader},e}();e.RadonShader=i}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function t(){function t(e){n.length=0;for(var t=0;t<r.length;++t){for(var o=function(t){for(var o=new Array,r=e.getCount(),n=0;n<r;++n){e.getUUID(n)==t&&o.push(n)}return o}(r[t]),a=[],s=(new THREE.Geometry,0);s<o.length;++s){var l=e.getMesh(o[s]),c=l.geometry,u=new THREE.BufferGeometry;u.setIndex(c.index),u.addAttribute("position",c.attributes.position),u.addAttribute("uv",c.attributes.uv),u.addAttribute("normal",c.attributes.normal),u.computeBoundingBox();var d=u.boundingBox,h=new THREE.Mesh(u,i);h.matrix.makeScale(20,20,20),h.applyMatrix(l.matrix),h.position.z-=19*(d.max.z+d.min.z)/2,h.position.x-=19*(d.max.x+d.min.x)/2,h.position.y-=19*(d.max.y+d.min.y)/2,a.push(h)}n[t]=a}}function o(e,t,o){if(e>=n.length)return!1;if(1==t)for(var r=0;r<n[e].length;++r)o.add(n[e][r]);else{console.log(t);for(var r=0;r<n[e].length;++r)o.remove(n[e][r])}return!0}var r=["cc5b4b09-b7d5-4ddd-a58d-cdcc857c3b6c","cc5b4b09-b7d5-4ddd-a58d-cdcc857c3b9d","cc5b4b09-b7d5-4ddd-a58d-cdcc857c3902","cc5b4b09-b7d5-4ddd-a58d-cdcc857c38dc","cc5b4b09-b7d5-4ddd-a58d-cdcc857c39da","cc5b4b09-b7d5-4ddd-a58d-cdcc857c3bbb"],n=[],i=new e.MeshPhongMaterial({color:3368635,specular:526344,emissive:0,opacity:.8,transparent:!0});this.InitCameras=t,this.SetCameraState=o}return t}();e.CameraOperate=t}(Neon||(Neon={}));var Neon;!function(e){function t(){for(var t=e.coreModel[0].getFragmentSet(),o=e.coreModel[0].getHighIterator(),r=0;r<t.getCount();++r)"\u673a\u7535\u7ba1\u7ebf"!==t.getAttribute(r).category?(o.push(r,e.HMATERIAL.OPICATY),t.setState(r,1)):t.setState(r,2);o.reset(),e.coreModel[0].getIterator().reset()}function o(t){var o=e.coreModel[0].getFragmentSet(),r=e.coreModel[0],n=o.uuid2fragid.get(t);if(n){var i=o.frag2idx[n[0]],a=r.getProperty(i,t,!1),s={};s.name=a.name,s.type=a.type;var l=a.property;for(var c in l)if(e.isString(l[c]))s[c]=l[c];else for(var u in l[c])s[u]=l[c][u];return s}}function r(t,o,r,n,i,a){e.model.addBox(t,o,r,n,i,a)}function n(t){e.model.getOverlayScene().add(t)}function i(){for(var t=e.coreModel[0].getFragmentSet(),o=e.coreModel[0].getHighIterator(),r=0;r<t.getCount();++r)"\u673a\u7535"===t.getAttribute(r).major?t.setState(r,2):t.setState(r,1);o.reset(),e.coreModel[0].getIterator().reset()}function a(){for(var t=0;t<e.coreModel.length;t++)e.coreModel[t].hide(-2)}function s(t,o){e.coreModel[0].selectSel(t,o)}function l(t){e.coreModel[0].hideFromGuid(t)}function c(){for(var t=0;t<e.coreModel.length;t++)e.coreModel[t].show(-2)}function u(t){if(a(),e.isArray(t))t.forEach(function(t){e.coreModel[0].getFragmentSet().uuid2fragid.get(t).forEach(function(t){e.coreModel[0].show(t)})});else{e.coreModel[0].getFragmentSet().uuid2fragid.get(t).forEach(function(t){e.coreModel[0].show(t)})}}function d(t){"b"==t?(e.enableBLevel=!0,e.enableCLevel=!1,e.coreModel[0].getIterator().reset(),e.firstCreat=!0):"c"==t&&(e.enableCLevel=!0,e.enableBLevel=!1,e.coreModel[0].getIterator().reset(),e.firstCreat=!0),e.enableUp=!0}function h(t){e.coreModel[0].getFragmentSet().uuids.map(function(e){t(o(e))})}function p(t){if(e.enableAxisNet=t,e.coreModel[0].getIterator().reset(),e.enableUp=!0,!0===t){var o=e.coreModel[0].axisNetsMesh[0];e.coreModel[0].axisNetScene.children.length=0,void 0!=o&&o.forEach(function(t){e.coreModel[0].axisNetScene.add(t)})}}function m(e,t){}function f(t){for(var o,r=e.coreModel[0].getFragmentSet(),n=0;n<t.uuids.length;++n)o=t.uuids[n],r.getAttributeUUID(o).state=t.state}function v(t,o){var r=new A(t,o);return e.coreModel.push(r),void 0!=e.cons&&(e.cons.dispose(),e.cons=void 0),void 0!=e.con&&(e.con.dispose(),e.con=void 0),e.con=new e.Control(r),e.cons=new e.Controls(r),t=null,r}function g(t){return void 0===t&&(t=e.coreModel.length-1),e.coreModel[t]}e.coreModel=[],e.defaultClearColor=(new e.Color).setHex(15592941),e.isCircle=!1,e.isTriPlan=!1,e.enableUp=!1,e.enableNav=!1,e.enablePeel=!1,e.meter2foot=3.2808399,e.enableBLevel=!1,e.enableCLevel=!0;var x;e.opicaty=t,e.getproperty=o,e.addBox=r,e.addMesh=n,e.renderT=i,e.hideAll=a,e.select=s,e.hideFromGUID=l,e.showAll=c,e.peel=u,e.cutLevel=d,e.enumGeometries=h,e.enableAxis=p,e.getValue=m,e.setColorState=f,e.createModel=v,e.setConstructionSelect=function(){function t(t){var o,i=new THREE.Box3;1==t.isAll?(o=r.clone(),i=e.coreModel[0].getFragSet().getBoundingBox(t.fragId)):(o=n.clone(),i.setFromArray(t.box));var a=new THREE.BoxGeometry(i.max.x-i.min.x,i.max.y-i.min.y,i.max.z-i.min.z);return o.position.set((i.max.x+i.min.x)/2,(i.max.y+i.min.y)/2,(i.max.z+i.min.z)/2),o.geometry=a,o}var o,r=new THREE.Mesh,n=new THREE.Mesh;return function(i,a,s){o=i.fragIds,r.material=new THREE.MeshBasicMaterial({color:a,transparent:!0,opacity:.5}),n.material=new THREE.MeshBasicMaterial({color:s,transparent:!0,opacity:.5});for(var l=0,c=o.length;l<c;l++){var u=o[l],d=t(u);e.coreModel[0].getOverlayScene().add(d),e.coreModel[0].getFragmentSet().setState(u.fragId,2)}e.coreModel[0].getIterator().reset()}}(),e.getModel=g;var y=function(t){function o(o){var r=t.call(this)||this;r.up=o.up,r.boundingBox=(new e.Box3).copy(o.boundingBox);var n=e.coreModel.length;return r.getModelId=function(){return n},r}return __extends(o,t),o}(e.EventEmitter),A=function(t){function o(o,r){function n(t){var o=(new e.Vector3).copy(t.max),r=(new e.Vector3).copy(t.min),n=Math.abs;o.project(U),r.project(U);var i=n(o.x-r.x),a=n(o.y-r.y);return 1.2/(i>a?a:i)}function i(){function t(t,o){var r=s.clone(),n=new THREE.Geometry,i=(new e.Vector3).copy(t.startPoint),l=(new e.Vector3).copy(t.endPoint);return 0!=o&&(i.z=a.get(o).c.location,l.z=i.z),n.vertices.push(t.startPoint,t.endPoint),r.geometry=n,r}function o(t,o,r){var n=l.clone(),i=l.clone(),s=new e.Geometry,c=new e.Geometry,d=new e.Vector3,p=new e.Vector3,m=new e.Vector3,f=new e.Vector3;t.mode==e.AXISMODE.XMODE?(t.startPoint.y==o.startPoint.y||t.endPoint.y==o.startPoint.y?(d.copy(t.startPoint),p.copy(o.startPoint),m.copy(t.endPoint),f.copy(o.endPoint)):(d.copy(t.startPoint),p.copy(o.endPoint),m.copy(t.endPoint),f.copy(o.startPoint)),t.startPoint.y>t.endPoint.y?(d.y=t.startPoint.y>o.startPoint.y?t.startPoint.y:o.startPoint.y,p.y=d.y,m.y=t.endPoint.y>o.endPoint.y?o.endPoint.y:t.endPoint.y,f.y=m.y):(d.y=t.startPoint.y<o.startPoint.y?t.startPoint.y:o.startPoint.y,p.y=d.y,m.y=t.endPoint.y<o.endPoint.y?o.endPoint.y:t.endPoint.y,f.y=m.y)):t.mode==e.AXISMODE.YMODE&&(t.startPoint.x==o.startPoint.x||t.endPoint.x==o.endPoint.x?(d.copy(t.startPoint),p.copy(o.startPoint),m.copy(t.endPoint),f.copy(o.endPoint)):(d.copy(t.startPoint),p.copy(o.endPoint),m.copy(t.endPoint),f.copy(o.startPoint)),t.startPoint.x>t.endPoint.x?(d.x=t.startPoint.x>o.startPoint.x?t.startPoint.x:o.startPoint.x,p.x=d.x,m.x=t.endPoint.x>o.endPoint.x?o.endPoint.x:t.endPoint.x,f.x=m.x):(d.x=t.startPoint.x<o.startPoint.x?t.startPoint.x:o.startPoint.x,p.x=d.x,m.x=t.endPoint.x<o.endPoint.x?o.endPoint.x:t.endPoint.x,f.x=m.x));var v,g=h.clone();t.mode==e.AXISMODE.XMODE?(v=new THREE.TextGeometry(String((1e3*(p.x-d.x)/Ee).toFixed(0)),u),v.center(),g.position.set((d.x+p.x)/2,d.y-4.5,d.z),d.y>m.y?(d.y-=5,p.y-=5,m.y+=5,f.y+=5):(d.y+=5,p.y+=5,m.y-=5,f.y-=5)):t.mode==e.AXISMODE.YMODE&&(v=new THREE.TextGeometry(String((1e3*(p.y-d.y)/Ee).toFixed(0)),u),v.center(),g.position.set(d.x+10,(d.y+p.y)/2,d.z),d.x>m.x?(d.x-=10,p.x-=10,m.x+=10,f.x+=10):(d.x+=10,p.x+=10,m.x-=10,f.x-=10)),0!=r&&(d.z=a.get(r).c.location,p.z=d.z,m.z=d.z,f.z=d.z,g.position.z=d.z),s.vertices.push(d,p),c.vertices.push(m,f),n.geometry=s,i.geometry=c,g.geometry=v;var x=g.clone();return t.mode==e.AXISMODE.XMODE?x.position.set((m.x+f.x)/2,m.y-.5,d.z):t.mode==e.AXISMODE.YMODE&&(x.position.x=m.x,g.position.x=d.x),[n,i,g,x]}var r=e.getMicroYaHeiFont(),n=e.axisNets,i=Be;e.logger.log("nameMap",Be,n);var a=e.levels,s=new THREE.Line;s.material=new THREE.LineDashedMaterial({color:16711680,linewidth:1,scale:1,dashSize:3,gapSize:1});var l=new THREE.Line;l.material=new THREE.LineBasicMaterial({color:65280});var c={size:4,height:.1,font:r,curveSegments:4},u={size:2,height:.1,font:r,currentTarget:4},d=new e.SelfAdaptionObject,h=new THREE.Mesh;d.material=new THREE.MeshPhongMaterial({color:16711680});var p=n.get(0);if(void 0!=p){for(var m=[],f=[],v=[],g=0,x=p.length;g<x;++g){var y=p[g];m.push(t(y,0));var A=function(t,o){var r=d.clone(),n=new THREE.TextGeometry(t.name,c);n.center(),n.computeBoundingBox();var i=new e.Vector3,s=n.boundingBox;r.geometry=n,r.axis=t;var l=r.clone();return l.axis=t,t.mode==e.AXISMODE.YMODE?t.startPoint.x<t.endPoint.x?i.set((s.max.x-s.min.x)/2,0,0):i.set(-(s.max.x-s.min.x)/2,0,0):t.startPoint.y<t.endPoint.y?i.set(0,(s.max.y-s.min.y)/2,0):i.set(0,-(s.max.y-s.min.y)/2,0),r.position.copy(t.startPoint).sub(i),l.position.copy(t.endPoint).add(i),r.point=t.startPoint,l.point=t.endPoint,0!=o&&(r.position.z=a.get(o).c.location,l.position.z=a.get(o).c.location),[r,l]}(y,0);m.push(A[0],A[1]),y.mode==e.AXISMODE.XMODE?f.push(g):y.mode==e.AXISMODE.YMODE&&v.push(g)}var b=function(t,o,r){var n=new Map,i=new Map;return t.map(function(t){var o=r[t],i=(new e.Vector3).copy(o.startPoint).distanceTo(o.endPoint),a=Math.floor(i),s=n.get(a);void 0==s&&(s=[]),s.push(t),n.set(a,s)}),o.map(function(t){var o=r[t],n=(new e.Vector3).copy(o.startPoint).distanceTo(o.endPoint),a=Math.floor(n),s=i.get(a);void 0==s&&(s=[]),s.push(t),i.set(a,s)}),n.forEach(function(e){e.sort(function(e,t){return r[e].startPoint.x-r[t].startPoint.x})}),i.forEach(function(e){e.sort(function(e,t){return r[e].startPoint.x-r[t].startPoint.x})}),[n,i]}(f,v,p),w=b[0],E=b[1];w.forEach(function(e){for(var t=0;t<e.length;++t)if(void 0!=e[t+1]){var r=o(p[e[t]],p[e[t+1]],0);m.push(r[0],r[1],r[2],r[3])}}),E.forEach(function(e){for(var t=0;t<e.length;++t)if(void 0!=e[t+1]){var r=o(p[e[t]],p[e[t+1]],0);m.push(r[0],r[1],r[2],r[3])}}),Me[0]=m}i.forEach(function(o,r){var i=n.get(o),s=0;if(void 0==a.get(o)?a.has(0)&&(s=null==a.get(0).b?a.get(0).c.location:a.get(0).b.location):s=null==a.get(o).c?a.get(o).b.location:a.get(o).c.location,void 0==i){for(var l=[],c=Me[0],u=0,d=c.length;u<d;++u){var h=c[u].clone();if(1==h.isLine){var p=h.geometry,m=new e.Geometry;h.geometry=m,m.vertices.push((new e.Vector3).copy(p.vertices[0]).add(new e.Vector3(0,0,s-p.vertices[0].z)),(new e.Vector3).copy(p.vertices[1]).add(new e.Vector3(0,0,s-p.vertices[1].z)))}else h.position.z=s;l.push(h)}Me[o]=l}else{for(var f=[],u=0,v=i.length;u<v;++u){var g=i[u];f.push(t(g,o))}Me[o]=f}}),e.logger.log(Me)}function a(e,t,o,r,n){var i=e.x+t/2,a=e.x-t/2,s=e.y+o/2,l=e.y-o/2,c=e.z+r/2,u=e.z-r/2;n.max.set(i,s,c),n.min.set(a,l,u)}function s(){return U=I,U.up.copy(new e.Vector3(0,0,1)),Q.reset(),{camera:U,control:de}}function l(){return U=q,de.update(.97,-.78),Q.reset(),{camera:U,control:de}}function c(e,t,o){var r=G.indices[e];if(void 0!==r){var n=G.pairs,i=G.keys,a=G.values,s=G.category,l=G.names,c=G.types,u=l[n[r]],d=c[n[++r]],h=n[++r],p={};p.name=u,p.type=d;for(var m={uuid:t,isQuick:o,property:p,name:u,type:d},f=0;f<h;f++)for(var v=p[s[n[++r]]]={},g=n[++r],x=0;x<g;x++)v[i[n[++r]]]=a[n[++r]];return console.log(t),m}}function u(t,o){var r;if(pe.clear(),t.length>0){for(var n=Y.getCount(),i=0;i<n&&!(t.length<=0);i++)for(var a=0;a<t.length;a++)if(Y.getUUID(i)===t[a]){if(r=Y.getFragId(i),e.isNumber(r))0==o?pe.push(r,e.HMATERIAL.BLUE):1==o&&pe.push(r,e.HMATERIAL.RED),Y.setState(r,2);else for(var s=0;s<r.length;s++)0==o?pe.push(r[s],e.HMATERIAL.BLUE):1==o&&pe.push(r[s],e.HMATERIAL.RED),Y.setState(r[s],2);t.splice(a,1);break}Q.reset(),pe.reset()}}function d(){return Y}function h(e,t){for(var o=!1,r=0;r<e.length;r++)if(e[r]==t){o=!0;break}return o}function p(){for(var t=[],o=0,r=Y.getCount();o<r;++o){var n=Y.getAttribute(o);if(null!=n){var i=new Array(3),a=t[n.floorNum];if(void 0==a&&(a={}),i[0]=n.floorName,i[1]=n.major,i[2]=n.category,i[3]=n.categoryName,void 0!=i[0])if(void 0!=i[2]){var s=void 0;if(s=void 0==a[i[0]]?{}:a[i[0]],void 0==i[3]){var l=void 0;l=void 0==s[i[1]]?[]:s[i[1]],!h(l,i[2])&&e.isArray(l)&&l.push(i[2]),s[i[1]]=l,a[i[0]]=s,t[n.floorNum]=a,"\u672a\u77e5"!=i[0]&&Be.set(i[0],n.floorNum)}else{var l=void 0;l=void 0==s[i[1]]?{}:s[i[1]];var c=void 0;c=void 0==l[i[2]]?[]:l[i[2]],!h(c,i[3])&&e.isArray(c)&&c.push(i[3]),l[i[2]]=c,s[i[1]]=l,a[i[0]]=s,t[n.floorNum]=a,"\u672a\u77e5"!=i[0]&&Be.set(i[0],n.floorNum)}}else{var s=void 0;s=void 0==a[i[0]]?[]:a[i[0]],!h(s,i[1])&&e.isArray(s)&&s.push(i[1]),a[i[0]]=s,t[n.floorNum]=a}}}e.logger.log(t);var u={},d=[];for(var p in t)d.push(parseInt(p));e.logger.log(d),d.sort(function(e,t){return e-t});for(var o=0,r=d.length;o<r;++o){var m=t[d[o]];for(var f in m)u[f]=m[f]}return u}function m(){function t(e){var t="",o=0,r=Y.getAttributeUUID(e),n=r.intersectAxis,i=r.adjoinAxis;if(n.length>=2)t+=n[0].name+n[1].name;else if(0==n.length)t+=null==i.xpos?"":i.xpos.name,t+=null==i.xneg?"":i.xneg.name,t+=null==i.ypos?"":i.ypos.name,t+=null==i.yneg?"":i.yneg.name;else if(1==n.length){t+=n[0].name;var s=n[0].mode;t+=null!=i.xpos&&s!=i.xpos.mode?i.xpos.name:"",t+=null!=i.xneg&&s!=i.xneg.mode?i.xneg.name:"",t+=null!=i.ypos&&s!=i.ypos.mode?i.ypos.name:"",t+=null!=i.yneg&&s!=i.yneg.mode?i.yneg.name:""}return a.has(t)?(o=a.get(t)+1,a.set(t,o)):(o=1,a.set(t,o)),t+"-"+o}for(var o=new Set,r=new Set,n=new Set,i=new Map,a=(new Map,new Map),s=0;s<Y.uuids.length;++s){var l=Y.uuids[s],c=Y.getAttributeUUID(l);void 0!=c&&("\u57fa\u7840\u627f\u53f0"==c.cNames?o.add(l):"\u6869"==c.cNames?n.add(l):"\u57ab\u5c42"==c.cNames&&r.add(l))}o.forEach(function(t){var o=Y.getBoundingBoxFromUuid(t);n.forEach(function(r){var a=Y.getBoundingBoxFromUuid(r);if(e.inBoxLinking(o,a)){var s=i.get(t);void 0==s&&(s=[]),s.push(r),i.set(t,s),n.delete(r)}})}),C.capToPipleMap=i;for(var s=0;s<Y.uuids.length;++s)!function(e){var o=Y.uuids[e],r=Y.getAttributeUUID(o);if(r&&"\u57fa\u7840\u627f\u53f0"==r.cNames){var n=i.get(o);if(void 0!=n){var a=1;n.map(function(e){var r=Y.getAttributeUUID(e);r.no=t(o),r.pileLocation=r.no.split("-")[0],a++})}}}(s)}function f(){if(e.enableNav){var t=Math.PI,o=Math.abs,r=de.getSpherical(),n=z.rotation;n.x=U.rotation.x,n.y=U.rotation.y,n.z=U.rotation.z,B.clear(!0,!0,!0),B.render(ee,z,null,!0,null),(o(r.phi%(t/2))<.01||o(r.phi%(t/2))>t/2-.01)&&(o(r.theta%(t/2))<.01||o(r.theta%(t/2))>t/2-.01)?(B.render(te,L,null,!0,null),e.isTriPlan=!0):e.isTriPlan=!1,o(r.phi-t)<.01||o(r.phi)<.01?(B.render(oe,L,null,!0,null),e.isCircle=!0):e.isCircle=!1,e.enableNav=!1}}function v(){Q.reset(),pe.reset(),e.enableNav=!0,e.enableUp=!0,e.enablePeel=!0,Z.position.copy(U.position),Z.updateMatrix(),Z.updateMatrixWorld()}function g(){setTimeout(function(){e.con.setNavModels(ee,re,k),function t(o){e.con.animateRotate(.25,U,Q,de,pe),e._moveAnimate.animate(U,Q,Y),x=requestAnimationFrame(t),Te()}()},1)}function y(){U.position.copy(O),j.copy(_),U.lookAt(j),Q.reset()}function A(e){if(-2===e){pe.clear();for(var t=0,o=Y.getCount();t<o;t++)Y.setState(t,1)}else Y.setState(e,1);Q.reset(),pe.reset()}function b(e){if(-2===e)for(var t=0,o=Y.getCount();t<o;t++)Y.setState(t,2);else Y.setState(e,2);Q.reset(),pe.reset(),pe.reset()}function w(t,o){q.left=t/-2,q.right=t/2,q.top=o/2,q.bottom=o/-2,q.updateMatrixWorld(),q.updateProjectionMatrix(),I.aspect=t/o,I.updateProjectionMatrix(),N.left=t/-10,N.right=t/10,N.top=o/10,N.bottom=o/-10,N.updateMatrixWorld(),N.updateProjectionMatrix(),T.setSize(t,o,!0),R.setSize(t,o,!0),v(),e.processer.style.left=String((t-450)/2)+"px"}function E(t){w(e.container.clientWidth,e.container.clientHeight)}function M(e){if(0!=e.children.length)for(var t=0,o=e.children.length;t<o;++t)e.remove(e.children[t]),e.children[t]=null;e.children.length=0,e=null}var S=t.call(this,o)||this,C=S,R=e.getRenderContext();R.shadowMap.enabled=!0,R.shadowMap.type=THREE.BasicShadowMap,S.getGL=function(){return T},S.getDownGL=function(){return R};var B=e.getNavRenderContext(),T=e.getRenderUpContext(),D=T.domElement;S.getDom=function(){return T.domElement};var k=B.domElement;S.getNavDom=function(){return k},e.enableNav=!0;var q=new e.OrthographicCamera(D.width/-2,D.width/2,D.height/2,D.height/-2,-5e4,5e4),I=new THREE.PerspectiveCamera(75,D.width/D.height,.1,5e4),U=q;U.up.copy(o.up);var N=new e.OrthographicCamera(D.width/5/-2,D.width/5/2,D.height/5/2,D.height/5/-2,-1,1);N.up.copy(o.up);var P=new e.Scene;S.getHubScene=function(){return P};var H=n(S.boundingBox);U.zoom=H,U.updateMatrixWorld(),U.updateProjectionMatrix(),S.getCamera=function(){return U};var z=new e.OrthographicCamera(k.width/-2,k.width/2,k.height/2,k.height/-2,-1e3,5e4),L=z.clone();z.up.copy(o.up),L.up.copy(o.up),S.getNavCamera=function(){return z},S.getNavTriCamera=function(){return L};var F=S.boundingBox.clone();e.logger.log(F);var V=F.max.distanceTo(F.min),O=new e.Vector3(-0,-0,1).normalize().multiplyScalar(V),_=new e.Vector3;F.getCenter(_);var j=_.clone();O.add(_);var G=o.attributes[0],W=o.geometries,Y=new e.FragmentSet(o,S.getModelId()),Q=new e.LinearIterator(Y);S.getIterator=function(){return Q};var X=((new e.Color).setRGB(1,1,1),(new e.Color).setRGB(1,1,1)),K=new e.AmbientLight;K.color=X,K.position.copy(_),K.intensity=.5;var J=new e.Scene,Z=new THREE.PointLight;Z.position.copy(O),Z.intensity=.6,Z.color=X,Z.updateMatrix(),Z.updateMatrixWorld();var $=[Z,K];S.getScene=function(){return J};var ee=new e.Scene;S.getNavScene=function(){return ee};var te=new e.Scene;S.getNavtriScene=function(){return te};var oe=new e.Scene;S.getNavCircleScene=function(){return oe};var re=new e.Scene;S.getHomeScene=function(){return re};var ne=new e.CameraOperate;J.castShadow=!0,J.receiveShadow=!0;var ie=new e.PlaneBufferGeometry(10*(F.max.x-F.min.x),10*(F.max.y-F.min.y)),ae=new e.BoxBufferGeometry(10,10,10),se=new e.MeshBasicMaterial({color:"red"}),le=new e.Mesh(ae,se);le.position.set(0,0,100),le.castShadow=!0,le.receiveShadow=!0;var ce=new e.MeshBasicMaterial({color:15592941}),ue=new e.Mesh(ie,ce);ue.position.copy(F.getCenter()),ue.position.z=F.min.z-100,ue.receiveShadow=!0,ue.castShadow=!0,J.add(ue),J.add(Z),R.setClearColor(e.defaultClearColor,1),B.setClearColor(e.defaultClearColor,0),T.setClearColor(e.defaultClearColor,0),y();var de=new THREE.OrbitControls(U,T.domElement);de.target.copy(_),de.update(.95,-.78),S.getControlor=function(){return de},de.addEventListener("change",function(e){v()}),e.clipBox=F.clone();var he=(new e.Plane(new e.Vector3(1,0,0),-e.clipBox.min.x),new e.Plane(new e.Vector3(0,1,0),-e.clipBox.min.y),new e.Plane(new e.Vector3(0,0,1),-e.clipBox.min.z),new e.Plane(new e.Vector3(-1,0,0),e.clipBox.max.x),new e.Plane(new e.Vector3(0,-1,0),e.clipBox.max.y),new e.Plane(new e.Vector3(0,0,-1),e.clipBox.max.z),[]);R.clippingPlanes=he;var pe=(new e.Raycaster,new e.Vector2,new e.HighLightIterator(Y,U));S.getHighIterator=function(){return pe};var me=new e.Scene;S.getOverlayScene=function(){return me};var fe=new THREE.AxisHelper(2);fe.scale.set(10,10,10),J.add(fe),fe.position.copy(F.min),fe.castShadow=!0;var ve=new e.Scene,ge=new e.Scene,xe=new e.BoxHelper(e.clipBox);F.getSize();xe.material.color.setRGB(1,0,0),S.getBoxHelper=function(){return xe};var ye=function(t){e.con.handNavMouseOver(t),k.addEventListener("mousedown",e.con.handNavMouseDownEvent,!1),k.addEventListener("mouseup",e.con.handNavMouseUpEvent,!1),k.addEventListener("click",e.con.handNavMouseClickEvent,!1),k.addEventListener("mousemove",e.con.handNavMouseMoveEvent,!1)};k.addEventListener("mouseover",ye,!1);var Ae=function(t){e.con.handNavMouseOut(t),k.removeEventListener("mousedown",e.con.handNavMouseDownEvent,!1),k.removeEventListener("mouseup",e.con.handNavMouseUpEvent,!1),k.removeEventListener("click",e.con.handNavMouseClickEvent,!1),k.removeEventListener("mousemove",e.con.handNavMouseMoveEvent,!1)};k.addEventListener("mouseout",Ae,!1),e._selector.on("_OnFocus",function(e){be(e.target)}),e._selector.on("_OnFocusBack",function(e){we()});var be=function(t){var o=function(e){for(var t=new Array,o=Y.getCount(),r=0;r<o;++r){Y.getUUID(r)==e&&t.push(r)}return t}(t),r=Y.frag2idx[o[0]];if(e._selector.emit({type:"_OnPropertyChanged",target:{id:r,isQuick:!0,uuid:t}}),0===o.length||o.length>=Y.getCount())return console.error("UUID error, please try again!"),!1;var n=Y.getBoundingBox(o[0]).clone();de.target.copy(new THREE.Vector3((n.max.x+n.min.x)/2,(n.max.y+n.min.y)/2,(n.max.z+n.min.z)/2)),U.updateMatrixWorld(),e.con.getAnimate().getSpherical().copy(de.getSpherical()),e.con.getAnimate().setAnimateParas(de.getSpherical().phi,de.getSpherical().theta,function(e,t){var o=new THREE.Vector3(e.max.x,e.max.y,e.max.z),r=new THREE.Vector3(e.min.x,e.min.y,e.min.z);o.project(U),r.project(U);var n=Math.abs(o.x-r.x),i=Math.abs(o.y-r.y),a=n>i?n:i,s=t*(1.6/a);return s=s>50?50:s}(n,U.zoom),U),U.updateProjectionMatrix(),pe.clear(),de.update();for(var i=0;i<o.length;++i){var a=o[i];pe.push(a,e.HMATERIAL.BLUE),Y.setState(a,1)}return v(),!0},we=function(){de.target.copy(_),e.con.getAnimate().getSpherical().copy(de.getSpherical()),e.con.getAnimate().setAnimateParas(de.getSpherical().phi,de.getSpherical().theta,H,U),U.updateMatrixWorld(),U.updateProjectionMatrix(),v()},Ee=3.2808399,Me=[];S.axisNetsMesh=Me,S.axisNetScene=ve,e.inCallBack.add("customAxisNet",{fn:i,target:C,arguments:[]});var Se=!0;e._selector.on("OnSetConstructionsection",function(e){if(1==(Se=1==e.targer.enable))for(var t=0;t<Ce.length;++t)me.add(Ce[t]);else for(var t=0;t<Ce.length;++t)me.remove(Ce[t])});var Ce=[]
;e._selector.on("OnLeadConstructionsection",function(t){var o=e.getMicroYaHeiFont(),r=Math.abs(t.target.mes.xstart/1e3-t.target.mes.xend/1e3)*Ee,n=Math.abs(t.target.mes.ystart/1e3-t.target.mes.yend/1e3)*Ee,i=Math.abs(t.target.mes.zstart/1e3-t.target.mes.zend/1e3)*Ee,s=new THREE.BoxBufferGeometry(r,n,i),l=new e.MeshPhongMaterial({color:parseInt(t.target.mes.color.slice(2),16),transparent:!0,opacity:.5}),c=new e.Mesh(s,l);c.position.set(F.min.x+(t.target.mes.xstart/1e3+t.target.mes.xend/1e3)/2*Ee,F.min.y+(t.target.mes.ystart/1e3+t.target.mes.yend/1e3)/2*Ee,(t.target.mes.zstart/1e3+t.target.mes.zend/1e3)/2*Ee);var u={size:10,height:.1,font:o,curveSegments:1},d=new THREE.Mesh(new THREE.TextGeometry(t.target.mes.num,u),new THREE.MeshBasicMaterial({color:16711680}));d.geometry.center(),d.position.copy(c.position),1==Se&&(me.add(c),me.add(d)),Ce.push(c),Ce.push(d);var h=new e.Box3;a(c.position,r,n,i,h)});!function(){function t(t){for(var o=Y.getMesh(t).geometry,r=o.attributes.position.array,n=o.index,i=new e.Vector3,a=0,s=0,l=n.count;s<l;s+=3)c=n.getX(s),u=n.getX(s+1),d=n.getX(s+2),p.set(r[8*c],r[8*c+1],r[8*c+2]).applyMatrix4(v),m.set(r[8*u],r[8*u+1],r[8*u+2]).applyMatrix4(v),f.set(r[8*d],r[8*d+1],r[8*d+2]).applyMatrix4(v),a+=i.crossVectors(p,m).dot(f)/6;return a}function o(e,t){return e.x>=t.min.x-1e-7&&e.y>=t.min.y-1e-7&&e.z>=t.min.z-1e-7&&e.x<=t.max.x+1e-7&&e.y<=t.max.y+1e-7&&e.z<=t.max.z+1e-7}function r(e,t){return t.max.x<=e.max.x&&t.min.x>=e.min.x&&t.max.y<=e.max.y&&t.min.y>=e.min.y&&t.max.z<=e.max.z&&t.min.z>=e.min.z}function n(t,r,n){var i=[],a=(new e.Vector3).copy(r).sub(t).normalize();if(r.x>n.max.x){var s=(n.max.x-t.x)/a.x;i.push((new e.Vector3).set(t.x+a.x*s,t.y+a.y*s,t.z+a.z*s))}else if(r.x<n.min.x){var s=(n.min.x-t.x)/a.x;i.push((new e.Vector3).set(t.x+a.x*s,t.y+a.y*s,t.z+a.z*s))}if(r.y>n.max.y){var s=(n.max.y-t.y)/a.y;i.push((new e.Vector3).set(t.x+a.x*s,t.y+a.y*s,t.z+a.z*s))}else if(r.y<n.min.y){var s=(n.min.y-t.y)/a.y;i.push((new e.Vector3).set(t.x+a.x*s,t.y+a.y*s,t.z+a.z*s))}if(r.z>n.max.z){var s=(n.max.z-t.z)/a.z;i.push((new e.Vector3).set(t.x+a.x*s,t.y+a.y*s,t.z+a.z*s))}else if(r.z<n.min.z){var s=(n.min.z-t.z)/a.z;i.push((new e.Vector3).set(t.x+a.x*s,t.y+a.y*s,t.z+a.z*s))}for(var l=0;l<i.length;++l)if(o(i[l],n))return i[l]}function i(t,o){return t.max.z>o.max.z?new e.Vector3(0,0,o.max.z):t.min.z<o.min.z?new e.Vector3(0,0,o.min.z):t.max.x>o.max.x?new e.Vector3(o.max.x,0,0):t.min.x<o.min.x?new e.Vector3(o.min.x,0,0):t.max.y>o.max.y?new e.Vector3(0,o.max.y,0):t.min.y<o.min.y?new e.Vector3(0,o.min.y,0):void 0}function a(t,r,a){for(var s=Y.getMesh(t).geometry,l=s.attributes.position.array,h=s.index,v=new e.Vector3,g=(new e.Vector3,new THREE.Raycaster,i(Y.getBoundingBox(t),r)),x=0,y=0,A=h.count;y<A;y+=3)if(c=h.getX(y),u=h.getX(y+1),d=h.getX(y+2),p.set(l[8*c],l[8*c+1],l[8*c+2]).applyMatrix4(a),m.set(l[8*u],l[8*u+1],l[8*u+2]).applyMatrix4(a),f.set(l[8*d],l[8*d+1],l[8*d+2]).applyMatrix4(a),o(p,r)&&o(m,r)&&o(f,r)){var b=(new e.Vector3).copy(p).sub(g),w=(new e.Vector3).copy(m).sub(g),E=(new e.Vector3).copy(f).sub(g);x+=v.crossVectors(b,w).dot(E)/6}else if(!o(p,r)||o(m,r)||o(f,r))if(o(p,r)||!o(m,r)||o(f,r))if(o(p,r)||o(m,r)||!o(f,r)){var M=(new e.Vector3).copy(p).sub(g),S=(new e.Vector3).copy(m).sub(g),C=(new e.Vector3).copy(f).sub(g);if(x+=v.crossVectors(M,S).dot(C)/6,o(p,r)&&o(m,r)&&!o(f,r)){var b=n(p,f,r).sub(g),w=n(m,f,r).sub(g),E=(new e.Vector3).copy(f).sub(g);x-=v.crossVectors(b,w).dot(E)/6}else if(o(p,r)&&!o(m,r)&&o(f,r)){var b=n(p,m,r).sub(g),w=(new e.Vector3).copy(m).sub(g),E=n(f,m,r).sub(g);x-=v.crossVectors(b,w).dot(E)/6}else if(o(p,r)&&!o(m,r)&&!o(f,r)){var b=(new e.Vector3).copy(p).sub(g),w=n(m,p,r).sub(g),E=n(f,p,r).sub(g);x-=v.crossVectors(b,w).dot(E)/6}}else{var b=n(f,p,r).sub(g),w=n(f,m,r).sub(g),E=(new e.Vector3).copy(f).sub(g);x+=v.crossVectors(b,w).dot(E)/6}else{var b=n(m,p,r).sub(g),w=(new e.Vector3).copy(m).sub(g),E=n(m,f,r).sub(g);x+=v.crossVectors(b,w).dot(E)/6}else{var b=(new e.Vector3).copy(p).sub(g),w=n(p,m,r).sub(g),E=n(p,f,r).sub(g);x+=v.crossVectors(b,w).dot(E)/6}return x}var s,l,c,u,d,h=new e.Box3,p=(new e.Vector3,new e.Vector3,new e.Vector3,new e.Vector3),m=new e.Vector3,f=new e.Vector3,v=new e.Matrix4}();e._selector.on("_OnSetCameraState",function(e){var t=e.targer.cameraID,o=e.targer.cameraState;ne.SetCameraState(t,o,me)}),e._selector.on("_OnCreateLevel",function(t){var o=e.getMicroYaHeiFont(),r=5,n={size:r,height:.1,font:o,curveSegments:4},i=F.clone(),a=t.targer.theta;t.targer.phi;ge.children.length=0;var s=(F.max.z-F.min.z)/10,l=(new THREE.Geometry,[]);1==e.enableCLevel?e.levels.forEach(function(e){null!=e.c&&l.push(e.c.location)}):1==e.enableBLevel&&e.levels.forEach(function(e){null!=e.b&&l.push(e.b.location)}),e.logger.log(e.levels);for(var c=new THREE.LineBasicMaterial({color:16711680,linewidth:5}),u=0;u<l.length;++u)!function(t){var o,l,u,d;if(Math.abs(a)<1e-4||Math.abs(a-3.1415926)<1e-4||Math.abs(a+3.1415926)<1e-4){o=i.max.x,l=i.min.x,u=i.max.y+s,d=i.max.y+s;var h=new THREE.Geometry;h.vertices.push(new THREE.Vector3(o+2*s,u,t),new THREE.Vector3(o,u,t));var p=new THREE.Line(h,c),m=new THREE.Geometry;m.vertices.push(new THREE.Vector3(o+7/3*s+s,u,t+1/3*s),new THREE.Vector3(o+1/3*s+s,u,t+1/3*s));var f=new THREE.Line(m,c),v=new THREE.Geometry;v.vertices.push(new THREE.Vector3(o+1/3*s+s,u,t+1/3*s),new THREE.Vector3(o+2/3*s+s,u,t));var g=new THREE.Line(v,c),x=new THREE.Geometry;x.vertices.push(new THREE.Vector3(o+s+s,u,t+1/3*s),new THREE.Vector3(o+2/3*s+s,u,t));var y=new THREE.Line(x,c),A=String(((t-e.gloableTran.z)/Ee).toFixed(2)),b=new THREE.Mesh(new THREE.TextGeometry(A,n),new THREE.MeshBasicMaterial({color:16711680})),w=b.geometry.center();b.position.set(o+7/3*s+s+w.x,u,t+1/3*s+.5*r+.5),Math.abs(a-3.1415926)<.001||Math.abs(a+3.1415926)<1e-4?(b.rotateX(-1.5707963),b.rotateZ(-3.1415926)):b.rotateX(1.5707963),ge.add(p),ge.add(f),ge.add(g),ge.add(y),ge.add(b);var E=new THREE.Geometry;E.vertices.push(new THREE.Vector3(l-2*s,d,t),new THREE.Vector3(l,d,t));var M=new THREE.Line(E,c),S=new THREE.Geometry;S.vertices.push(new THREE.Vector3(l-7/3*s-s,d,t+1/3*s),new THREE.Vector3(l-1/3*s-s,d,t+1/3*s));var C=new THREE.Line(S,c),R=new THREE.Geometry;R.vertices.push(new THREE.Vector3(l-1/3*s-s,d,t+1/3*s),new THREE.Vector3(l-2/3*s-s,d,t));var B=new THREE.Line(R,c),T=new THREE.Geometry;T.vertices.push(new THREE.Vector3(l-s-s,d,t+1/3*s),new THREE.Vector3(l-2/3*s-s,d,t));var D=new THREE.Line(T,c),k=String(((t-e.gloableTran.z)/Ee).toFixed(2)),q=new THREE.Mesh(new THREE.TextGeometry(k,n),new THREE.MeshBasicMaterial({color:16711680})),I=q.geometry.center();q.position.set(l-7/3*s-s-I.x,d,t+1/3*s+.5*r+.5),Math.abs(a-3.1415926)<.001||Math.abs(a+3.1415926)<1e-4?(q.rotateX(-1.5707963),q.rotateZ(-3.1415926)):q.rotateX(1.5707963),ge.add(M),ge.add(C),ge.add(B),ge.add(D),ge.add(q)}else{o=i.max.x,l=i.max.x,u=i.max.y,d=i.min.y;var U=new THREE.Geometry;U.vertices.push(new THREE.Vector3(o,d+s-s,t),new THREE.Vector3(o,d-s-s,t));var N=new THREE.Line(U,c),P=new THREE.Geometry;P.vertices.push(new THREE.Vector3(o,d-7/3*s-s,t+1/3*s),new THREE.Vector3(o,d-1/3*s-s,t+1/3*s));var H=new THREE.Line(P,c),z=new THREE.Geometry;z.vertices.push(new THREE.Vector3(o,d-1/3*s-s,t+1/3*s),new THREE.Vector3(o,d-2/3*s-s,t));var L=new THREE.Line(z,c),F=new THREE.Geometry;F.vertices.push(new THREE.Vector3(o,d-1*s-s,t+1/3*s),new THREE.Vector3(o,d-2/3*s-s,t));var V=new THREE.Line(F,c),O=String(((t-e.gloableTran.z)/Ee).toFixed(2)),_=new THREE.Mesh(new THREE.TextGeometry(O,n),new THREE.MeshBasicMaterial({color:16711680})),j=_.geometry.center();_.position.set(o,d-7/3*s-s-j.x,t+1/3*s+.5*r+.5),Math.abs(a-1.5707963)<.001?(_.rotateX(1.5707963),_.rotateY(1.5707963)):(_.rotateX(1.5707963),_.rotateY(-1.5707963)),ge.add(N),ge.add(H),ge.add(L),ge.add(V),ge.add(_);var G=new THREE.Geometry;G.vertices.push(new THREE.Vector3(o,u+s+s,t),new THREE.Vector3(o,u-s+s,t));var W=new THREE.Line(G,c),Y=new THREE.Geometry;Y.vertices.push(new THREE.Vector3(o,u+7/3*s+s,t+1/3*s),new THREE.Vector3(o,u+1/3*s+s,t+1/3*s));var Q=new THREE.Line(Y,c),X=new THREE.Geometry;X.vertices.push(new THREE.Vector3(o,u+1/3*s+s,t+1/3*s),new THREE.Vector3(o,u+2/3*s+s,t));var K=new THREE.Line(X,c),J=new THREE.Geometry;J.vertices.push(new THREE.Vector3(o,u+1*s+s,t+1/3*s),new THREE.Vector3(o,u+2/3*s+s,t));var Z=new THREE.Line(J,c),$=String(((t-e.gloableTran.z)/Ee).toFixed(2)),ee=new THREE.Mesh(new THREE.TextGeometry($,n),new THREE.MeshBasicMaterial({color:16711680})),te=ee.geometry.center();ee.position.set(o,u+7/3*s+s+te.x,t+1/3*s+r/2+.5),Math.abs(a-1.5707963)<.001?(ee.rotateX(-1.5707963),ee.rotateY(1.5707963),ee.rotateZ(3.1415926)):(ee.rotateX(1.5707963),ee.rotateY(3.1415926*3/2)),ge.add(W),ge.add(Q),ge.add(K),ge.add(Z),ge.add(ee)}}(l[u]);e.enableUp=!0}),e._selector.on("OnText",function(t){var o=(t.target.enable,{"\u7b2c\u4e94\u5c42":{"\u7ed3\u6784":["\u677f"]}});e._selector.selectFloorAndMajorAndClass(o);var r=e.cons.controls.ConstructionSectionControl;r.active(),r.setMode("b")}),e._selector.on("OnSelectFloorN",function(t){var o=t.target.names;pe.clear(),ve.children.length=0;for(var r=new Set,i=new Set,a=0;a<o.length;++a){var s=o[a];1==s.isChecked&&i.add(s.title);var l=s.title;e.getNames(r,s.children,l)}for(var c=new e.Box3,a=0,u=Y.getCount();a<u;++a){var d=Y.getAttribute(a);if(null!=d){var h=d.floorName,p=d.major,m=d.category,f=d.categoryName,l="";void 0!=h&&(l+=h),void 0!=p&&(l+=p),void 0!=m&&(l+=m),void 0!=f&&(l+=f),r.has(l)?(Y.setState(a,2),c.union(Y.getBoundingBox(a))):Y.setState(a,1)}else Y.setState(a,1)}if(c.equals(new e.Box3)||(e.clipBox.copy(c),R&&R.clippingPlanes&&R.clippingPlanes.length>0&&(R.clippingPlanes[0].constant=-e.clipBox.min.x,R.clippingPlanes[1].constant=-e.clipBox.min.y,R.clippingPlanes[2].constant=-e.clipBox.min.z,R.clippingPlanes[3].constant=e.clipBox.max.x,R.clippingPlanes[4].constant=e.clipBox.max.y,R.clippingPlanes[5].constant=e.clipBox.max.z)),i.forEach(function(t){var o=Be.get(t);if(e.logger.log(t,o,Be),void 0!=o){var r=Me[o];void 0!=r&&r.forEach(function(e){ve.add(e)})}}),i.size>0&&0==ve.children.length){var v=Me[0];void 0!=v&&v.forEach(function(e){ve.add(e)})}Q.reset(),e.enableUp=!0,e.inCallBack.run("setVertexCount"),de.target.copy(c.getCenter()),U.zoom*=n(c),U.zoom>50&&(U.zoom=50),U.updateProjectionMatrix(),de.update()}),e._selector.on("OnSelectAll",function(e){if(1==e.target.enable)for(var t=0,o=Y.getCount();t<o;++t)Y.setState(t,2);else for(var t=0,o=Y.getCount();t<o;++t)Y.setState(t,1);Q.reset()}),e._selector.on("OnSetMethod",function(t){var o=t.target.name,r=t.target.enable;if("home"==o){for(var n=Y.getCount(),i=0;i<n;++i)Y.setState(i,2);pe.clear(),R.clippingPlanes=he,de.target.copy(F.getCenter()),de.update(.95,-.78),U.zoom=H,U.updateMatrixWorld(),U.updateProjectionMatrix(),Q.reset(),e.cons.disableAllControls(),e.clipBox.max.copy(F.max),e.clipBox.min.copy(F.min),e.cons.getControls().ConstructionSectionControl.deActive(),e.inCallBack.run("setVertexCount")}else"back"==o?e.cons.backUp():(o=o[0].toUpperCase()+o.slice(1)+"Control",e.cons.setContrlFromName(o,r))}),e._selector.on("_OnPropertyChanged",function(t){var o=t.target.id,r=t.target.uuid,n=t.target.isQuick,i=c(o,r,n);e._selector.emit({type:"OnPropertyChanged",target:i}),console.debug("proper",i)}),e._selector.on("OnSelectorSel",function(e){u(e.target.uuids,e.target.isLag)});var Re=function(){var t;return function(o,r){if(t=W[r],e.isUndefined(t))return void e.logger.warn("hash is unvalid! ["+r+"]");Y.addGeometry(o,t),delete W[r]}}(),Be=new Map;e.inCallBack.add("initPile",{fn:m,target:C,arguments:[]}),e.callBackMap.setCallBack("initPile",{fn:m,target:C,arguments:[]});var Te=function(){function t(){if(!Q.done()){s=r.now();var e=s-a;for(n-=e,a=s;;){if(o=Q.next(R.getFrustum()),R.render(o,U,null,!1,$),Q.done())break;if(s=r.now(),e=s-a,void 0===o.time?o.time=e:o.time=.8*o.time+.2*e,(n-=e)<=0)break}}}var o,r=performance,n=0,i=0,a=0,s=0,l=0;new e.BoxHelper;return function(){i=1e3,n=.75*n+.25*i,a=r.now(),(e.enableUp||l!=me.children.length)&&(T.clear(!0,!0,!0),T.render(me,U,null,!1,$),T.render(P,N,null,!1,$),e.enableUp=!1,l=me.children.length,e.enableAxisNet&&T.render(ve,U,null,!1,$),Math.abs(de.getSpherical().phi-1.5707963)<1e-4&&Math.abs(de.getSpherical().theta%1.5707963)<1e-4?(e.firstCreat&&(e._selector.createLevel(de.getSpherical().theta,de.getSpherical().phi),e.logger.log("level scene",ge),e.firstCreat=!1),T.render(ge,U,null,!1,$)):e.firstCreat=!0),Q.needClear()&&(R.clear(!0,!0,!1),R.render(J,U,null,!1,$)),t(),f(),pe.render(10,R)}}();S.hideFromGuid=function(e){for(var t=0,o=e.length;t<o;++t){for(var r=new Array,n=Y.getCount(),i=0;i<n;++i){Y.getUUID(i)==e[i]&&r.push(i)}Y.setState(r,1)}},window.addEventListener("resize",E,!1),S.dispose=function(){window.removeEventListener("resize",E,!1),k.removeEventListener("mouseover",Ae,!1),k.removeEventListener("mousedown",e.con.handNavMouseDownEvent,!1),k.removeEventListener("mouseup",e.con.handNavMouseUpEvent,!1),k.removeEventListener("click",e.con.handNavMouseClickEvent,!1),k.removeEventListener("mousemove",e.con.handNavMouseMoveEvent,!1),k.removeEventListener("mouseout",e.con.handNavMouseOut,!1),e.container.removeChild(R.domElement),e.container.removeChild(T.domElement),e.container.removeChild(B.domElement),cancelAnimationFrame(x),R=void 0,T=void 0,B=void 0,U=void 0,N=void 0,z=void 0,L=void 0,M(J),M(ee),M(oe),M(te),M(me),M(ge),M(ve),pe.dispose(),de.dispose(),de=null,e.coreModel.length=0,e._selector.reSet(),e.cons.dispose(),e.cons=void 0,e.con.dispose(),e.con=void 0,Y.dispose(),Y=null,Me.length=0,Me=null};var De=function(){function t(t,o,r){var n=new THREE.BoxBufferGeometry(t,o,r),i=new THREE.MeshBasicMaterial({color:"blue",transparent:!0,opacity:.7});return new e.Mesh(n,i)}return function(e,o,r,n,i,a){var s=t(n,i,a);s.position.set(e,o,r),me.add(s)}}();return S.selectSel=u,S.setHome=y,S.start=g,S.reset=v,S.addGeometry=Re,S.getFragmentSet=d,S.hide=A,S.show=b,S.getFragSet=d,S.setPerCamera=s,S.setOrthCamera=l,S.getFloorAndMajorAndCategoryName=p,S.disposeScene=M,delete o.geometries,delete o.nodes,delete o.indices,o=null,S.hubCamera=N,S.getProperty=c,S.customAxisNet=i,S.addBox=De,S}return __extends(o,t),o}(y);e.RenderModel=A}(Neon||(Neon={}));var Neon;!function(e){function t(e,t){return new o(e,t)}e.createCamera=t;var o=function(t){function o(o,r){var n=t.call(this)||this;return n.fov=50,n.near=.1,n.far=5e4,n.aspect=o/r,n.left=-o/2,n.right=o/2,n.top=r/2,n.bottom=-r/2,n.clientHeight=r,n.clientWidth=o,n.target=new e.Vector3(0,0,-1),n.worldUp=new e.Vector3(0,1,0),n.pCamera=new e.PerspectiveCamera(n.fov,n.aspect,n.near,n.far),n.oCamera=new e.OrthographicCamera(n.left,n.right,n.top,n.bottom,n.near,n.far),n.zoom=1,n.toPerspective(),n.isPerspectiveCamera=!0,n.isOrthographicCamera=!1,n}return __extends(o,t),o.prototype.from=function(e){this.up.set(e.up.x,e.up.y,e.up.z),this.setFov(e.fov),e.isPerspective?this.toPerspective():this.toOrthographic()},o.prototype.__computeFovPosition=function(t){if(Math.abs(this.fov-t)<=1e-5)return this.position.clone();var o=this.target.clone().sub(this.position),r=e._Math.degToRad(this.fov),n=e._Math.degToRad(t),i=o.length()*Math.tan(.5*r)/Math.tan(.5*n),a=o.normalize().multiplyScalar(-i);return this.target.clone().add(a)},o.prototype.toPerspective=function(){!this.isPerspective&&this.cacheFov&&(this.position.copy(this.__computeFovPosition(this.cacheFov)),this.fov=this.cacheFov),this.pCamera.aspect=this.aspect,this.pCamera.near=this.near,this.pCamera.far=this.far,this.pCamera.fov=this.fov/this.zoom,this.pCamera.updateProjectionMatrix(),this.projectionMatrix=this.pCamera.projectionMatrix,this.isPerspective=!0,this.isPerspectiveCamera=!0,this.isOrthographicCamera=!1},o.prototype.toOrthographic=function(){if(!this.isPerspective){this.cacheFov=this.fov;var e=o.ORTHO_FOV;this.position.copy(this.__computeFovPosition(e)),this.fov=e}this.orthoScale=this.target.clone().sub(this.position).length();var t=.5*this.orthoScale,r=t*this.aspect;this.left=this.oCamera.left=-r,this.right=this.oCamera.right=r,this.top=this.oCamera.top=t,this.bottom=this.oCamera.bottom=-t,this.oCamera.near=this.near,this.oCamera.far=this.far,this.oCamera.updateProjectionMatrix(),this.projectionMatrix=this.oCamera.projectionMatrix,this.isPerspective=!1,this.isOrthographicCamera=!0,this.isPerspectiveCamera=!1},o.prototype.updateProjectionMatrix=function(){this.isPerspective?this.toPerspective():this.toOrthographic()},o.prototype.setSize=function(e,t){this.pCamera.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.updateProjectionMatrix()},o.prototype.setFov=function(e){this.fov=e,this.updateProjectionMatrix()},o.prototype.setLens=function(t,o){void 0===o&&(o=24);var r=2*e._Math.radToDeg(Math.atan(o/(2*t)));return this.setFov(r),r},o.prototype.clone=function(){var e=new o(2*this.right,2*this.top);return e.copy(this),e.position.copy(this.position),e.up.copy(this.up),e.target.copy(this.target),e.worldUp.copy(this.worldUp),this.worldUpMatrix&&(e.worldUpMatrix=this.worldUpMatrix.clone()),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.fov=this.fov,e.aspect=this.aspect,e.zoom=this.zoom,e.isPerspective=this.isPerspective,this.updateProjectionMatrix(),e},o.ORTHO_FOV=2*Math.atan(.5)*180/Math.PI,o}(e.Camera)}(Neon||(Neon={}));var Neon;!function(e){function t(e){return new x(e)}function o(e,t){return Math.abs(t[0])-Math.abs(e[0])}function r(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function n(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function i(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var o;if(t.map?o=t.map:t.specularMap?o=t.specularMap:t.displacementMap?o=t.displacementMap:t.normalMap?o=t.normalMap:t.bumpMap?o=t.bumpMap:t.roughnessMap?o=t.roughnessMap:t.metalnessMap?o=t.metalnessMap:t.alphaMap?o=t.alphaMap:t.emissiveMap&&(o=t.emissiveMap),void 0!==o){o.isWebGLRenderTarget&&(o=o.texture);var r=o.offset,n=o.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}e.envMap.value=t.envMap,1==t.hasUvMatrix&&(e.uvMatrix.value=t.uvMatrix),e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function a(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function s(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function l(e,t,o,r){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*o,e.scale.value=.5*r,e.map.value=t.map,null!==t.map){var n=t.map.offset,i=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,i.x,i.y)}}function c(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function u(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function d(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function h(e,t){d(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function p(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function m(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,p(e,t)}function f(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function v(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function g(e,t,o){var r;if(1e3===e)return o.REPEAT;if(1001===e)return o.CLAMP_TO_EDGE;if(1002===e)return o.MIRRORED_REPEAT;if(1003===e)return o.NEAREST;if(1004===e)return o.NEAREST_MIPMAP_NEAREST;if(1005===e)return o.NEAREST_MIPMAP_LINEAR;if(1006===e)return o.LINEAR;if(1007===e)return o.LINEAR_MIPMAP_NEAREST;if(1008===e)return o.LINEAR_MIPMAP_LINEAR;if(1009===e)return o.UNSIGNED_BYTE;if(1017===e)return o.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return o.UNSIGNED_SHORT_5_5_5_1;if(1019===e)return o.UNSIGNED_SHORT_5_6_5;if(1010===e)return o.BYTE;if(1011===e)return o.SHORT;if(1012===e)return o.UNSIGNED_SHORT;if(1013===e)return o.INT;if(1014===e)return o.UNSIGNED_INT;if(1015===e)return o.FLOAT;if(1016===e&&null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(1021===e)return o.ALPHA;if(1022===e)return o.RGB;if(1023===e)return o.RGBA;if(1024===e)return o.LUMINANCE;if(1025===e)return o.LUMINANCE_ALPHA;if(1026===e)return o.DEPTH_COMPONENT;if(1027===e)return o.DEPTH_STENCIL;if(100===e)return o.FUNC_ADD;if(101===e)return o.FUNC_SUBTRACT;if(102===e)return o.FUNC_REVERSE_SUBTRACT;if(200===e)return o.ZERO;if(201===e)return o.ONE;if(202===e)return o.SRC_COLOR;if(203===e)return o.ONE_MINUS_SRC_COLOR;if(204===e)return o.SRC_ALPHA;if(205===e)return o.ONE_MINUS_SRC_ALPHA;if(206===e)return o.DST_ALPHA;if(207===e)return o.ONE_MINUS_DST_ALPHA;if(208===e)return o.DST_COLOR;if(209===e)return o.ONE_MINUS_DST_COLOR;if(210===e)return o.SRC_ALPHA_SATURATE;if((2001===e||2002===e||2003===e||2004===e)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(2001===e)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===e)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===e)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===e)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((2100===e||2101===e||2102===e||2103===e)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(2100===e)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===e)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===e)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===e)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===e&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((103===e||104===e)&&null!==(r=t.get("EXT_blend_minmax"))){if(103===e)return r.MIN_EXT;if(104===e)return r.MAX_EXT}return 1020===e&&null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}e.createRender=t;var x=function(){function t(t){function x(){return null===ue?Me:1}function y(){Oe.init(),Oe.scissor(fe.copy(Se).multiplyScalar(Me)),Oe.viewport(ge.copy(Re).multiplyScalar(Me)),Oe.buffers.color.setClear(Ae.r,Ae.g,Ae.b,be,Z)}function A(){ce=null,me=null,pe="",he=-1,Oe.reset()}function b(e){e.preventDefault(),A(),y(),_e.clear()}function w(e){var t=e.target;t.removeEventListener("dispose",w),E(t)}function E(e){M(e),_e.delete(e)}function M(e){var t=_e.get(e).program;e.program=void 0,void 0!==t&&Ye.releaseProgram(t)}function S(e){return g(e,Fe,ze)}function C(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),xe.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),B(xe)}function R(e){return xe.center.set(0,0,0),xe.radius=.7071067811865476,xe.applyMatrix4(e.matrixWorld),B(xe)}function B(e){if(!Be.intersectsSphere(e))return!1;var t=Te.numPlanes;if(0===t)return!0;var o=le.clippingPlanes,r=e.center,n=-e.radius,i=0;do{if(o[i].distanceToPoint(r)<n)return!1}while(++i!==t);return!0}function T(t,o){var r,n,i,a,s,l,c,u=0,d=0,h=0,p=o.matrixWorldInverse,m=0,f=0,v=0,g=0,x=0;for(r=0,n=t.length;r<n;r++)if(i=t[r],a=i.color,s=i.intensity,l=i.distance,c=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)u+=a.r*s,d+=a.g*s,h+=a.b*s;else if(i.isDirectionalLight){var y=Qe.get(i);y.color.copy(i.color).multiplyScalar(i.intensity),y.direction.setFromMatrixPosition(i.matrixWorld),Ie.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Ie),y.direction.transformDirection(p),y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Pe.directionalShadowMap[m]=c,Pe.directionalShadowMatrix[m]=i.shadow.matrix,Pe.directional[m++]=y}else if(i.isSpotLight){var y=Qe.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(a).multiplyScalar(s),y.distance=l,y.direction.setFromMatrixPosition(i.matrixWorld),Ie.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Ie),y.direction.transformDirection(p),y.coneCos=Math.cos(i.angle),y.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Pe.spotShadowMap[v]=c,Pe.spotShadowMatrix[v]=i.shadow.matrix,Pe.spot[v++]=y}else if(i.isRectAreaLight){var y=Qe.get(i);y.color.copy(a).multiplyScalar(s/(i.width*i.height)),y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),Ne.identity(),Ue.copy(i.matrixWorld),Ue.premultiply(p),Ne.extractRotation(Ue),y.halfWidth.set(.5*i.width,0,0),y.halfHeight.set(0,.5*i.height,0),y.halfWidth.applyMatrix4(Ne),y.halfHeight.applyMatrix4(Ne),Pe.rectArea[g++]=y}else if(i.isPointLight){var y=Qe.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(i.color).multiplyScalar(i.intensity),y.distance=i.distance,y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Pe.pointShadowMap[f]=c,void 0===Pe.pointShadowMatrix[f]&&(Pe.pointShadowMatrix[f]=new e.Matrix4),Ie.setFromMatrixPosition(i.matrixWorld).negate(),Pe.pointShadowMatrix[f].identity().setPosition(Ie),Pe.point[f++]=y}else if(i.isHemisphereLight){var y=Qe.get(i);y.direction.setFromMatrixPosition(i.matrixWorld),y.direction.transformDirection(p),y.direction.normalize(),y.skyColor.copy(i.color).multiplyScalar(s),y.groundColor.copy(i.groundColor).multiplyScalar(s),Pe.hemi[x++]=y}Pe.ambient[0]=u,Pe.ambient[1]=d,Pe.ambient[2]=h,Pe.directional.length=m,Pe.spot.length=v,Pe.rectArea.length=g,Pe.point.length=f,Pe.hemi.length=x,Pe.hash=m+","+f+","+v+","+g+","+x+","+Pe.shadows.length}function D(e){for(var t=0,o=0,r=e.length;o<r;o++){var n=e[o];n.castShadow&&(Pe.shadows[t++]=n)}Pe.shadows.length=t}function k(e){2===e.side?Oe.disable(ze.CULL_FACE):Oe.enable(ze.CULL_FACE),Oe.setFlipSided(1===e.side),!0===e.transparent?Oe.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Oe.setBlending(0),Oe.setDepthFunc(e.depthFunc),Oe.setDepthTest(e.depthTest),Oe.setDepthWrite(e.depthWrite),Oe.setColorWrite(e.colorWrite),Oe.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function q(t,o,r){var n=_e.get(t),i=Ye.getParameters(t,Pe,o,Te.numPlanes,Te.numIntersection,r),a=Ye.getProgramCode(t,i),s=n.program,l=!0;if(void 0===s)t.addEventListener("dispose",w);else if(s.code!==a)M(t);else{if(void 0!==i.shaderID)return;l=!1}if(l){if(i.shaderID){var c=e.ShaderLib[i.shaderID];n.__webglShader={name:t.type,uniforms:e.UniformsUtils.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else n.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=n.__webglShader,s=Ye.acquireProgram(t,i,a),n.program=s,t.program=s}var u=s.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<le.maxMorphTargets;d++)u["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var d=0;d<le.maxMorphNormals;d++)u["morphNormal"+d]>=0&&t.numSupportedMorphNormals++}var h=n.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Te.numPlanes,n.numIntersection=Te.numIntersection,h.clippingPlanes=Te.uniform),n.fog=o,n.lightsHash=Pe.hash,t.lights&&(h.ambientLightColor.value=Pe.ambient,h.directionalLights.value=Pe.directional,h.spotLights.value=Pe.spot,h.pointLights.value=Pe.point,h.hemisphereLights.value=Pe.hemi,h.directionalShadowMap.value=Pe.directionalShadowMap,h.directionalShadowMatrix.value=Pe.directionalShadowMatrix,h.spotShadowMap.value=Pe.spotShadowMap,h.spotShadowMatrix.value=Pe.spotShadowMatrix,h.pointShadowMap.value=Pe.pointShadowMap,h.pointShadowMatrix.value=Pe.pointShadowMatrix);var p=n.program.getUniforms(),m=e.WebGLUniforms.seqWithValue(p.seq,h);n.uniformsList=m}function I(e,t,o,r,n){var i,a;o.transparent?(i=re,a=++ne):(i=te,a=++oe);var s=i[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=o,s.z=Ie.z,s.group=n):(s={id:e.id,object:e,geometry:t,material:o,z:Ie.z,group:n},i.push(s))}function U(t,o){if(!1!==t.visible){if(0!=(t.layers.mask&o.layers.mask))if(t.isLight)ee.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==R(t)||ae.push(t);else if(t.isLensFlare)se.push(t);else if(t.isImmediateRenderObject)!0===le.sortObjects&&(Ie.setFromMatrixPosition(t.matrixWorld),Ie.applyProjection(qe)),I(t,null,t.material,Ie.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===C(t)||t instanceof e.SelfAdaptionObject)){var r=t.material;if(!0===r.visible){!0===le.sortObjects&&(Ie.setFromMatrixPosition(t.matrixWorld),Ie.applyProjection(qe));var n=Ge.update(t);if(r.isMultiMaterial)for(var i=n.groups,a=r.materials,s=0,l=i.length;s<l;s++){var c=i[s],u=a[c.materialIndex];!0===u.visible&&I(t,n,u,Ie.z,c)}else I(t,n,r,Ie.z,null)}}for(var d=t.children,s=0,l=d.length;s<l;s++)U(d[s],o)}}function N(t,o,r,n){for(var i=0,a=t.length;i<a;i++)!function(i,a){var s=t[i],l=s.object;l instanceof e.SelfAdaptionObject&&l.adaptionMethod(r);var c=s.geometry,u=void 0===n?s.material:n,d=s.group;if(l.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,l.matrixWorld),l.normalMatrix.getNormalMatrix(l.modelViewMatrix),l.onBeforeRender(le,o,r,c,u,d),l.isImmediateRenderObject){k(u);var h=P(r,o.fog,u,l);pe="",l.render(function(e){le.renderBufferImmediate(e,h,u)})}else V(l),le.renderBufferDirect(r,o.fog,c,u,l,d);l.onAfterRender(le,o,r,c,u,d)}(i)}function P(t,o,r,n){ye=0;var g=_e.get(r);if(De&&(ke||t!==me)){var x=t===me&&r.id===he;Te.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,t,g,x)}!1===r.needsUpdate&&(void 0===g.program?r.needsUpdate=!0:r.fog&&g.fog!==o?r.needsUpdate=!0:r.lights&&g.lightsHash!==Pe.hash?r.needsUpdate=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===Te.numPlanes&&g.numIntersection===Te.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(q(r,o,n),r.needsUpdate=!1);var y=!1,A=!1,b=!1,w=g.program,E=w.getUniforms(),M=g.__webglShader.uniforms;if(w.id!==ce&&(ze.useProgram(w.program),ce=w.id,y=!0,A=!0,b=!0),r.id!==he&&(he=r.id,A=!0),y||t!==me){if(E.set(ze,t,"projectionMatrix"),Ve.logarithmicDepthBuffer&&E.setValue(ze,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==me&&(me=t,A=!0,b=!0),
r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var S=E.map.cameraPosition;void 0!==S&&S.setValue(ze,Ie.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&E.setValue(ze,"viewMatrix",t.matrixWorldInverse),E.set(ze,le,"toneMappingExposure"),E.set(ze,le,"toneMappingWhitePoint")}if(r.skinning){E.setOptional(ze,n,"bindMatrix"),E.setOptional(ze,n,"bindMatrixInverse");var C=n.skeleton;C&&(Ve.floatVertexTextures&&C.useVertexTexture?(E.set(ze,C,"boneTexture"),E.set(ze,C,"boneTextureWidth"),E.set(ze,C,"boneTextureHeight")):E.setOptional(ze,C,"boneMatrices"))}return A&&(r.lights&&v(M,b),o&&r.fog&&c(M,o),(r.isMeshBasicMaterial||r.isMeshLambertMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isMeshNormalMaterial||r.isMeshDepthMaterial)&&i(M,r),r.isLineBasicMaterial?a(M,r):r.isLineDashedMaterial?(a(M,r),s(M,r)):r.isPointsMaterial?l(M,r,Me,Ee):r.isMeshLambertMaterial?u(M,r):r.isMeshToonMaterial?h(M,r):r.isMeshPhongMaterial?d(M,r):r.isMeshPhysicalMaterial?m(M,r):r.isMeshStandardMaterial?p(M,r):r.isMeshDepthMaterial?r.displacementMap&&(M.displacementMap.value=r.displacementMap,M.displacementScale.value=r.displacementScale,M.displacementBias.value=r.displacementBias):r.isMeshNormalMaterial&&f(M,r),void 0!==M.ltcMat&&(M.ltcMat.value=e.UniformsLib.LTC_MAT_TEXTURE),void 0!==M.ltcMag&&(M.ltcMag.value=e.UniformsLib.LTC_MAG_TEXTURE),e.WebGLUniforms.upload(ze,g.uniformsList,M,le)),E.set(ze,n,"modelViewMatrix"),E.set(ze,n,"normalMatrix"),E.setValue(ze,"modelMatrix",n.matrixWorld),w}function H(t,o,r,n){var i;if(r&&r.isInstancedBufferGeometry&&null===(i=Fe.get("ANGLE_instanced_arrays")))return void e.logger.error("WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),Oe.initAttributes();var a=r.attributes,s=o.getAttributes(),l=t.defaultAttributeValues;for(var c in s){var u=s[c];if(u>=0){var d=a[c];if(void 0!==d){var h=d.normalized,p=d.itemSize,m=Ge.getAttributeProperties(d),f=m.__webglBuffer,v=m.type,g=m.bytesPerElement;if(d.isInterleavedBufferAttribute){var x=d.data,y=x.stride,A=d.offset;x&&x.isInstancedInterleavedBuffer?(Oe.enableAttributeAndDivisor(u,x.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=x.meshPerAttribute*x.count)):Oe.enableAttribute(u),ze.bindBuffer(ze.ARRAY_BUFFER,f),ze.vertexAttribPointer(u,p,v,h,y*g,(n*y+A)*g)}else d.isInstancedBufferAttribute?(Oe.enableAttributeAndDivisor(u,d.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=d.meshPerAttribute*d.count)):Oe.enableAttribute(u),ze.bindBuffer(ze.ARRAY_BUFFER,f),ze.vertexAttribPointer(u,p,v,h,0,n*p*g)}else if(void 0!==l){var b=l[c];if(void 0!==b)switch(b.length){case 2:ze.vertexAttrib2fv(u,b);break;case 3:ze.vertexAttrib3fv(u,b);break;case 4:ze.vertexAttrib4fv(u,b);break;default:ze.vertexAttrib1fv(u,b)}}}}Oe.disableUnusedAttributes()}function z(e,t,o){it=t,at=o,e.foreach(L,Be,t)}function L(e,t){if(e.visible){var o=void 0;if(!(o=at||e.material))return;if(e.modelViewMatrix.multiplyMatrices(it.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),o.transparent){var r=o.side;o.side=1,F(e,o),o.side=0,F(e,o),o.side=r}else Oe.setBlending(0),F(e,o)}}function F(e,t){2===t.side?Oe.disable(ze.CULL_FACE):Oe.enable(ze.CULL_FACE),Oe.setFlipSided(1===t.side),V(e),le.renderBufferDirect(it,null,e.geometry,t,e,null)}function V(e){ht(e,!0)}function O(e,t){var o=e.isInterleavedBufferAttribute?e.data:e,r=_e.get(o);void 0===r.__webglBuffer||r.__webglBuffer==ct||r.__webglBuffer==ut?_(r,o,t):r.version!==o.version&&j(r,o,t)}function _(e,t,o){var r;1==dt?st<lt?(e.__webglBuffer=ze.createBuffer(),r=ze.STATIC_DRAW,st+=t.array.BYTES_PER_ELEMENT*t.array.length*8):o==ze.ELEMENT_ARRAY_BUFFER?(e.__webglBuffer=ct,r=ze.DYNAMIC_DRAW):(e.__webglBuffer=ut,r=ze.DYNAMIC_DRAW):(e.__webglBuffer=ze.createBuffer(),r=t.dynamic?ze.DYNAMIC_DRAW:ze.STATIC_DRAW),ze.bindBuffer(o,e.__webglBuffer),ze.bufferData(o,t.array,r);var n=ze.FLOAT,i=t.array;i instanceof Float32Array?n=ze.FLOAT:i instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):i instanceof Uint16Array?n=ze.UNSIGNED_SHORT:i instanceof Int16Array?n=ze.SHORT:i instanceof Uint32Array?n=ze.UNSIGNED_INT:i instanceof Int32Array?n=ze.INT:i instanceof Int8Array?n=ze.BYTE:i instanceof Uint8Array&&(n=ze.UNSIGNED_BYTE),e.bytesPerElement=i.BYTES_PER_ELEMENT,e.type=n,e.version=t.version,t.onUploadCallback()}function j(e,t,o){ze.bindBuffer(o,e.__webglBuffer),!1===t.dynamic?ze.bufferData(o,t.array,ze.STATIC_DRAW):-1===t.updateRange.count?ze.bufferSubData(o,0,t.array):0===t.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(ze.bufferSubData(o,t.updateRange.offset*t.array.BYTES_PER_ELEMENT,t.array.subarray(t.updateRange.offset,t.updateRange.offset+t.updateRange.count)),t.updateRange.count=0),e.version=t.version}function G(t){var o=t.wireframe;if(void 0!==o)return O(o,ze.ELEMENT_ARRAY_BUFFER),o;if(t.lineIndex){var r=t.attributes,n=r.position,i=n.count>65535?Uint32Array:Uint16Array,a=new e.BufferAttribute(new i(t.lineIndex),1);return t.lineIndex.length=0,O(a,ze.ELEMENT_ARRAY_BUFFER),t.wireframe=a,a}var s=[],l=t.index,r=t.attributes,n=r.position;if(null!==l)for(var c=l.array,u=0,d=c.length;u<d;u+=3){var h=c[u+0],p=c[u+1],m=c[u+2];s.push(h,p,p,m,m,h)}else for(var c=r.position.array,u=0,d=c.length/3-1;u<d;u+=3){var h=u+0,p=u+1,m=u+2;s.push(h,p,p,m,m,h)}var i=n.count>65535?Uint32Array:Uint16Array,a=new e.BufferAttribute(new i(s),1);return O(a,ze.ELEMENT_ARRAY_BUFFER),t.wireframe=a,a}t=t||{};var W=void 0!==t.canvas?t.canvas:document.createElement("canvas"),Y=void 0!==t.context?t.context:null,Q=void 0!==t.alpha&&t.alpha,X=void 0===t.depth||t.depth,K=void 0===t.stencil||t.stencil,J=void 0===t.antialias||t.antialias,Z=void 0===t.premultipliedAlpha||t.premultipliedAlpha,$=void 0===t.preserveDrawingBuffer||t.preserveDrawingBuffer,ee=[],te=[],oe=-1,re=[],ne=-1,ie=new Float32Array(8),ae=[],se=[];this.domElement=W,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var le=this,ce=null,ue=null,de=null,he=-1,pe="",me=null,fe=new e.Vector4,ve=null,ge=new e.Vector4,xe=new e.Sphere,ye=0,Ae=new e.Color(16777215),be=0,we=W.width,Ee=W.height,Me=1,Se=new e.Vector4(0,0,we,Ee),Ce=!1,Re=new e.Vector4(0,0,we,Ee),Be=new e.Frustum;this.getFrustum=function(){return Be};var Te=new THREE.WebGLClipping,De=!1,ke=!1,qe=new e.Matrix4,Ie=new e.Vector3,Ue=new e.Matrix4,Ne=new e.Matrix4,Pe={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},He={calls:0,vertices:0,faces:0,points:0};this.info={render:He,memory:{geometries:0,textures:0},programs:null};var ze;try{var Le={alpha:Q,depth:X,stencil:K,antialias:J,premultipliedAlpha:Z,preserveDrawingBuffer:$};if(null===(ze=Y||W.getContext("webgl",Le)||W.getContext("experimental-webgl",Le)))throw null!==W.getContext("webgl")?"Error creating WebGL context whit your selected attributes.":"Error create WebGL context.";void 0===ze.getShaderPrecisionFormat&&(ze.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),W.addEventListener("webglcontextlost",b,!1)}catch(t){e.logger.error("Create WebGLRenderer Error:"+t)}var Fe=new e.WebGLExtensions(ze);Fe.get("WEBGL_depth_texture"),Fe.get("OES_texture_float"),Fe.get("OES_texture_float_linear"),Fe.get("OES_texture_half_float"),Fe.get("OES_texture_half_float_linear"),Fe.get("OES_standard_derivatives"),Fe.get("ANGLE_instanced_arrays"),Fe.get("OES_element_index_uint")&&(e.BufferGeometry.MaxIndex=4294967296);var Ve=new e.WebGLCapabilities(ze,Fe,t),Oe=new e.WebGLState(ze,Fe,S),_e=new e.WebGLProperties,je=new e.WebGLTextures(ze,Fe,Oe,_e,Ve,S,this.info),Ge=new e.WebGLObjects(ze,_e,this.info),We=new THREE.WebGLGeometries(ze,_e,this.info),Ye=new e.WebGLPrograms(this,Ve),Qe=new e.WebGLLights;this.info.programs=Ye.programs;var Xe=new e.WebGLBufferRenderer(ze,Fe,He),Ke=new e.WebGLIndexedBufferRenderer(ze,Fe,He),Je=(new e.OrthographicCamera(-1,1,1,-1,0,1),new e.PerspectiveCamera,new e.Mesh(new e.PlaneBufferGeometry(2,2),new e.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1})),e.ShaderLib.cube);new e.Mesh(new e.BoxBufferGeometry(5,5,5),new e.ShaderMaterial({uniforms:Je.uniforms,vertexShader:Je.vertexShader,fragmentShader:Je.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}));y(),this.context=ze,this.capabilities=Ve,this.extensions=Fe,this.properties=_e,this.state=Oe;var Ze=new e.WebGLShadowMap(this,Pe,Ge,Ve);this.shadowMap=Ze;var $e=new e.SpritePlugin(this,ae),et=new e.LensFlarePlugin(this,se);this.getContext=function(){return ze},this.getContextAttributes=function(){return ze.getContextAttributes()},this.forceContextLoss=function(){Fe.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Ve.getMaxAnisotropy()},this.getPrecision=function(){return Ve.precision},this.getPixelRatio=function(){return Me},this.setPixelRatio=function(e){void 0!==e&&(Me=e,this.setSize(Re.z,Re.w,!1))},this.getSize=function(){return{width:we,height:Ee}},this.setSize=function(e,t,o){we=e,Ee=t,W.width=e*Me,W.height=t*Me,!1!==o&&(W.style.width=e+"px",W.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,o,r){Oe.viewport(Re.set(e,t,o,r))},this.setScissor=function(e,t,o,r){Oe.scissor(Se.set(e,t,o,r))},this.setScissorTest=function(e){Oe.setScissorTest(Ce=e)},this.getClearColor=function(){return Ae},this.setClearColor=function(e,t){Ae.set(e),be=void 0!==t?t:1,Oe.buffers.color.setClear(Ae.r,Ae.g,Ae.b,be,Z)},this.getClearAlpha=function(){return be},this.setClearAlpha=function(e){be=e,Oe.buffers.color.setClear(Ae.r,Ae.g,Ae.b,be,Z)},this.clear=function(e,t,o){var r=0;(void 0===e||e)&&(r|=ze.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=ze.DEPTH_BUFFER_BIT),(void 0===o||o)&&(r|=ze.STENCIL_BUFFER_BIT),ze.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,o,r){this.setRenderTarget(e),this.clear(t,o,r)},this.resetGLState=A,this.dispose=function(){re=[],ne=-1,te=[],oe=-1,W.removeEventListener("webglcontextlost",b,!1)},this.allocTextureUnit=function(){var t=ye;return t>=Ve.maxTextures&&e.logger.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Ve.maxTextures),ye+=1,t},this.setTexture=function(e,t){je.setTexture2D(e,t)},this.setTexture2D=function(e,t){je.setTexture2D(e,t)},this.setTextureCube=function(e,t){e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?je.setTextureCube(e,t):je.setTextureCubeDynamic(e,t)},this.getCurrentRenderTarget=function(){return ue},this.setRenderTarget=function(e){ue=e,e&&void 0===_e.get(e).__webglFramebuffer&&je.setupRenderTarget(e);var t,o=e&&e.isWebGLRenderTargetCube;if(e){var r=_e.get(e);t=o?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,fe.copy(e.scissor),ve=e.scissorTest,ge.copy(e.viewport)}else t=null,fe.copy(Se).multiplyScalar(Me),ve=Ce,ge.copy(Re).multiplyScalar(Me);if(de!==t&&(ze.bindFramebuffer(ze.FRAMEBUFFER,t),de=t),Oe.scissor(fe),Oe.setScissorTest(ve),Oe.viewport(ge),o){var n=_e.get(e.texture);ze.framebufferTexture2D(ze.FRAMEBUFFER,ze.COLOR_ATTACHMENT0,ze.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}},this.setFaceCulling=function(e,t){Oe.setCullFace(e),Oe.setFlipSided(0===t)},this.readRenderTargetPixels=function(t,o,r,n,i,a){if(!1===(t&&t.isWebGLRenderTarget))return void e.logger.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=_e.get(t).__webglFramebuffer;if(s){var l=!1;s!==de&&(ze.bindFramebuffer(ze.FRAMEBUFFER,s),l=!0);try{var c=t.texture,u=c.format,d=c.type;if(1023!==u&&S(u)!==ze.getParameter(ze.IMPLEMENTATION_COLOR_READ_FORMAT))return void e.logger.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===d||S(d)===ze.getParameter(ze.IMPLEMENTATION_COLOR_READ_TYPE)||1015===d&&(Fe.get("OES_texture_float")||Fe.get("WEBGL_color_buffer_float"))||1016===d&&Fe.get("EXT_color_buffer_half_float")))return void e.logger.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ze.checkFramebufferStatus(ze.FRAMEBUFFER)===ze.FRAMEBUFFER_COMPLETE?o>=0&&o<=t.width-n&&r>=0&&r<=t.height-i&&ze.readPixels(o,r,n,i,S(u),S(d),a):e.logger.error("WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&ze.bindFramebuffer(ze.FRAMEBUFFER,de)}}},this.render=function(t,o,i,a,s){if(void 0!==o&&!0!==o.isCamera)return void e.logger.error("WebGLRenderer.render: camera is not an instance of THREE.Camera.");pe="",he=-1,me=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===o.parent&&o.updateMatrixWorld(),o.matrixWorldInverse.getInverse(o.matrixWorld),qe.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),Be.setFromMatrix(qe),ee.length=0,ae.length=0,se.length=0,ke=this.localClippingEnabled,De=Te.init(this.clippingPlanes,ke,o);var l=8455969===t.classType;if(l||(oe=-1,ne=-1,U(t,o),te.length=oe+1,re.length=ne+1,!0===le.sortObjects&&(te.sort(r),re.sort(n))),s&&s.length>0&&(ee=s.slice()),De&&Te.beginShadows(),D(ee),Ze.render(t,o),T(ee,o),De&&Te.endShadows(),void 0===i&&(i=null),this.setRenderTarget(i),t.overrideMaterial){var c=t.overrideMaterial;l?z(t,o,c):(N(te,t,o,c),N(re,t,o,c))}else l?z(t,o,null):(Oe.setBlending(0),N(te,t,o),N(re,t,o));$e.render(t,o),et.render(t,o,ge),i&&je.updateRenderTargetMipmap(i),Oe.setDepthTest(!0),Oe.setDepthWrite(!0),Oe.setColorWrite(!0)};var tt=ze.createBuffer(),ot=ze.createBuffer(),rt=ze.createBuffer(),nt=ze.createBuffer();this.renderBufferImmediate=function(e,t,o){Oe.initAttributes();var r=_e.get(e);e.hasPositions&&!r.position&&(r.position=tt),e.hasNormals&&!r.normal&&(r.normal=ot),e.hasUvs&&!r.uv&&(r.uv=rt),e.hasColors&&!r.color&&(r.color=nt);var n=t.getAttributes();if(e.hasPositions&&(ze.bindBuffer(ze.ARRAY_BUFFER,r.position),ze.bufferData(ze.ARRAY_BUFFER,e.positionArray,ze.DYNAMIC_DRAW),Oe.enableAttribute(n.position),ze.vertexAttribPointer(n.position,3,ze.FLOAT,!1,0,0)),e.hasNormals){if(ze.bindBuffer(ze.ARRAY_BUFFER,r.normal),!o.isMeshPhongMaterial&&!o.isMeshStandardMaterial&&!o.isMeshNormalMaterial&&1===o.shading)for(var i=0,a=3*e.count;i<a;i+=9){var s=e.normalArray,l=(s[i+0]+s[i+3]+s[i+6])/3,c=(s[i+1]+s[i+4]+s[i+7])/3,u=(s[i+2]+s[i+5]+s[i+8])/3;s[i+0]=l,s[i+1]=c,s[i+2]=u,s[i+3]=l,s[i+4]=c,s[i+5]=u,s[i+6]=l,s[i+7]=c,s[i+8]=u}ze.bufferData(ze.ARRAY_BUFFER,e.normalArray,ze.DYNAMIC_DRAW),Oe.enableAttribute(n.normal),ze.vertexAttribPointer(n.normal,3,ze.FLOAT,!1,0,0)}e.hasUvs&&o.map&&(ze.bindBuffer(ze.ARRAY_BUFFER,r.uv),ze.bufferData(ze.ARRAY_BUFFER,e.uvArray,ze.DYNAMIC_DRAW),Oe.enableAttribute(n.uv),ze.vertexAttribPointer(n.uv,2,ze.FLOAT,!1,0,0)),e.hasColors&&0!==o.vertexColors&&(ze.bindBuffer(ze.ARRAY_BUFFER,r.color),ze.bufferData(ze.ARRAY_BUFFER,e.colorArray,ze.DYNAMIC_DRAW),Oe.enableAttribute(n.color),ze.vertexAttribPointer(n.color,3,ze.FLOAT,!1,0,0)),Oe.disableUnusedAttributes(),ze.drawArrays(ze.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,n,i,a){k(n);var s=P(e,t,n,i),l=!1,c=r.id+"_"+s.id+"_"+n.wireframe;c!==pe&&(pe=c,l=!0);var u=i.morphTargetInfluences;if(void 0!==u){for(var d=[],h=0,p=u.length;h<p;h++){var m=u[h];d.push([m,h])}d.sort(o),d.length>8&&(d.length=8);for(var f=r.morphAttributes,h=0,p=d.length;h<p;h++){var m=d[h];if(ie[h]=m[0],0!==m[0]){var v=m[1];!0===n.morphTargets&&f.position&&r.addAttribute("morphTarget"+h,f.position[v]),!0===n.morphNormals&&f.normal&&r.addAttribute("morphNormal"+h,f.normal[v])}else!0===n.morphTargets&&r.removeAttribute("morphTarget"+h),!0===n.morphNormals&&r.removeAttribute("morphNormal"+h)}for(var h=d.length,g=ie.length;h<g;h++)ie[h]=0;s.getUniforms().setValue(ze,"morphTargetInfluences",ie),l=!0}var y=r.index||r.indices||null,A=r.attributes.position,b=1;!0===n.wireframe&&(y=G(r),b=2);var w;null!==y?(w=Ke,w.setIndex(y)):w=Xe,l&&(H(n,s,r),null!==y&&ze.bindBuffer(ze.ELEMENT_ARRAY_BUFFER,Ge.getAttributeBuffer(y)));var E=0;null!==y?E=y.count:void 0!==A&&(E=A.count);var M=r.drawRange.start*b,S=r.drawRange.count*b,C=null!==a?a.start*b:0,R=null!==a?a.count*b:1/0,B=Math.max(M,C),T=Math.min(E,M+S,C+R)-1,D=Math.max(0,T-B+1);if(0!==D){if(i.isMesh)if(!0===n.wireframe)Oe.setLineWidth(n.wireframeLinewidth*x()),w.setMode(ze.LINES);else switch(i.drawMode){case 0:w.setMode(ze.TRIANGLES);break;case 1:w.setMode(ze.TRIANGLE_STRIP);break;case 2:w.setMode(ze.TRIANGLE_FAN)}else if(i.isLine){var q=n.linewidth;void 0===q&&(q=1),Oe.setLineWidth(q*x()),i.isLineSegments?w.setMode(ze.LINES):w.setMode(ze.LINE_STRIP)}else i.isPoints&&w.setMode(ze.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&w.renderInstances(r,B,D):w.render(B,D)}};var it=null,at=null,st=0,lt=e.isMobile()?393216e3:786432e3,ct=ze.createBuffer(),ut=ze.createBuffer(),dt=!1,ht=function(){return function(e,t){dt=void 0!=t&&t;var o=We.get(e);e.geometry.isGeometry&&o.updateFromObject(e);var r=o.index,n=o.attributes;null!==r&&O(r,ze.ELEMENT_ARRAY_BUFFER);for(var i in n)O(n[i],ze.ARRAY_BUFFER);var a=o.morphAttributes;for(var i in a)for(var s=a[i],l=0,c=s.length;l<c;l++)O(s[l],ze.ARRAY_BUFFER);return o}}();this.neonUpdata=V}return t}()}(Neon||(Neon={}));var Neon;!function(e){var t=(function(){function e(e){this.enable=!1,this.scene=e}e.prototype.render=function(e,t,o){1==this.enable&&(e.render(this.scene,t,null,null,o),this.enable=!1)},e.prototype.setEnable=function(e){this.enable=e}}(),function(){function e(e){}return e}());e.RenderManger=t}(Neon||(Neon={}));var Neon;!function(e){var t=new e.Queue;t.push({test:1}),t.push({qq:2}),t.push({queue:3}),e.logger.debug("..................................Queue test................."),e.logger.debug(t.shift()),e.logger.debug(t.shift()),e.logger.debug(t.shift()),e.logger.debug(t.shift()),e.logger.debug(t),e.logger.debug(".................................Queue test..................")}(Neon||(Neon={}));var Neon;!function(e){function t(e,t){switch(e){case"selected":void 0!=t&&o(t)}}function o(t){e.logger.debug("InitSelected",t)}e.InitAttribute=t}(Neon||(Neon={}));var Neon;!function(e){function t(){}function o(){e.cons.getControls().DragControl.deActive();var t=e.cons.getControls().OperateObject;t.active(),t.setModel("move")}function r(){e.cons.getControls().DragControl.deActive();var t=e.cons.getControls().OperateObject;t.active(),t.setModel("rotation")}function n(){e.cons.getControls().DragControl.deActive();var t=e.cons.getControls().OperateObject;t.active(),t.setModel("scale")}function i(){e.cons.getControls().DragControl.deActive(),e.cons.getControls().OperateObject.deActive()}e.loadBox=t,e.move=o,e.rotation=r,e.scale=n,e.end=i}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function t(t,r,n,i,a){this._object=new THREE.Object3D,this._type=null,this._matrix=null,this.createWorker=function(){function t(e){var t=e.data;if(2===t.objectDef&&32===t.packageType)for(var o=parseInt(t.package),r=0;r<t.vbo.length;++r)n.addGeometry(t.vbo[r],o+":"+r);if(++i==a){s.terminate();var h=new Error,p=n.getObject();null!=c&&c(h,p,n.getBox(),u,d)}else s.postMessage(l[i])}function r(c){if(c.data.error)return void e.logger.error(c.data);s.removeEventListener("message",r,!1),s.addEventListener("message",t,!1);var u=c.data.packages;l.length=0,a=u.length;for(var d=0;d<a;++d){var h={action:1,workerId:-1,url:e.CURRENT_MODEL_DIRECTORY+u[d],package:u[d],packageType:32,options:{responseType:2}};l.push(h)}delete c.data.packages,delete c.data.packageType,n=new o(c.data),s.postMessage(l[i])}var n,i=0,a=0,s=null,l=[],c=null,u=null,d=null;return function(e,t,o,n,i){c=o,u=n,d=i,null==s&&(s=new Worker(t),s.workerId=0,null==this.callback&&(this.callback=o)),s.addEventListener("message",r,!1),s.postMessage({action:1,url:e,package:"project.jdx",packageType:2147483648,options:{responseType:2}})}}(),this._type=r,this._matrix=n,""!=t?this.load(t,i):e.logger.error("error, hava no this model"),this._object.code=void 0===a?-1:a}return t.prototype.load=function(t,o){e.CURRENT_MODEL_DIRECTORY=t,this.createWorker(t,e.WORKER_CACHE_URL,o,this._type,this._matrix)},t}();e.Load=t;var o=function(){function t(t){this.box=new e.Box3;var o=this;o.fragSet=new e.FragmentSet(t,0,!0),o.geometryMap=t.geometries}return t.prototype.addGeometry=function(t,o){var r=this.geometryMap[o];if(e.isUndefined(r))return void e.logger.warn("hash is unvalid! ["+o+"]");this.fragSet.addGeometry(t,r),delete this.geometryMap[o]},t.prototype.getFragSet=function(){return this.fragSet},t.prototype.getObject=function(){for(var t=new THREE.Object3D,o=0;o<this.fragSet.getCount();++o){var r=this.fragSet.getMesh(o);r.geometry.computeBoundingSphere(),r.geometry.computeBoundingBox(),this.box.union(r.geometry.boundingBox),t.add(new e.Mesh(r.geometry,r.material))}for(var n=this.box.getCenter(),o=0;o<t.children.length;++o){var r=t.children[o];r.position.set(-n.x,-n.y,-n.z)}return this.box.setFromObject(t),t},t.prototype.getBox=function(){return this.box},t}()}(Neon||(Neon={}));var Neon;!function(e){e.loadPointCloud=function(){var t=null,o=null,r=new THREE.Points;!function(){var n=document.getElementById("file");n.onchange=function(i){var a=n.files[0];if(e.logger.debug(a),null==t&&null==o){e.coreModel[0].getOverlayScene().remove(r);var s=new XMLHttpRequest,l=e.STATIC_URL+"necn.js";e.logger.debug("url",l),s.open("GET",l,!0),s.withCredentials=!1,s.onload=function(){var n;try{n=new Blob([s.responseText],{type:"application/javascript"})}catch(t){e.logger.error("can't get resource: [ "+l+" ]")}t=URL.createObjectURL(n),e.logger.debug("src",t),o=new Worker(t),o.addEventListener("message",function(n){var i=n.data.positions,a=n.data.colors;e.controlService.hidenAll();var s=new THREE.BufferGeometry;s.addAttribute("position",new THREE.BufferAttribute(i,3)),s.addAttribute("color",new THREE.BufferAttribute(a,3)),console.log(s.boundingSphere),s.computeBoundingSphere();var l=new THREE.PointsMaterial({size:.1,vertexColors:THREE.VertexColors});r.geometry=s,r.material=l,e.coreModel[0].getOverlayScene().add(r),e.coreModel[0].getIterator().reset(),e.enableUp=!0;var c=e.coreModel[0].getCamera(),u=e.coreModel[0].getControlor();u.target.copy(s.boundingSphere.center),u.update(),c.lookAt(s.boundingSphere.center),console.log(s.boundingSphere,i),o.terminate(),o=null,t=null}),o.postMessage(a)},s.send()}else o.postMessage(a)}}()}}(Neon||(Neon={}));var Neon;!function(e){e.loadFBX=function(){new THREE.FBXLoader}}(Neon||(Neon={}));var Neon;!function(e){function t(e,t){var o=new r;return o.triangles=e,t&&o.matrix.copy(t),o}var o=function(){function t(t,o){this.normal=new e.Vector3,this.w=0,this.EPSILON=1e-5,t&&o&&(this.normal.copy(t),this.w=o)}return t.prototype.setFromPlan=function(t){var o=t.geometry,r=(new e.Matrix4).compose(t.position,(new e.Quaternion).setFromEuler(t.rotation),t.scale).multiply(t.matrixWorld),n=o.getAttribute("position").array,i=new e.Vector3(n[0],n[1],n[2]).applyMatrix4(r),a=new e.Vector3(n[3],n[4],n[5]).applyMatrix4(r),s=new e.Vector3(n[6],n[7],n[8]).applyMatrix4(r);return this.setFromPoints(i,a,s),this},t.prototype.setFromPoints=function(t,o,r){var n=(new e.Vector3).copy(o).sub(t).cross((new e.Vector3).copy(r).sub(t)).normalize();this.normal.copy(n),this.w=n.dot(t)},t.prototype.clone=function(){return new t(this.normal,this.w)},t.prototype.flip=function(){this.normal.negate(),this.w=-this.w},t.prototype.splitTriangle=function(t,o,r,n,a){for(var s=0,l=[],c=0;c<t.vertices.length;c++){var u=this.normal.dot(t.vertices[c])-this.w,d=u<-this.EPSILON?2:u>this.EPSILON?1:0;s|=d,l.push(d)}switch(s){case 0:(this.normal.dot(t.plan.normal)>0?o:r).push(t);break;case 1:n.push(t);break;case 2:a.push(t);break;case 3:for(var h=[],p=[],m=[],f=[],v=[],g=[],c=0;c<t.vertices.length;++c){var x=(c+1)%t.vertices.length,y=l[c],A=l[x],b=t.vertices[c],w=t.vertices[x],E=t.normals[c],M=t.vertices[x],S=t.uvs[c],C=t.uvs[x];if(2!=y&&(h.push(b),m.push(E),v.push(S)),1!=y&&(p.push(2!=y?b.clone():b),f.push(2!=y?E.clone():E),g.push(2!=y?S.clone():S)),3==(y|A)){var u=(this.w-this.normal.dot(b))/this.normal.dot((new e.Vector3).copy(w).sub(b)),R=b.clone().lerp(w,u),B=E.clone().lerp(M,u),T=S.clone().lerp(C,u);h.push(R),p.push(R.clone()),m.push(B),f.push(B.clone()),v.push(T),g.push(T.clone())}}h.length>=3&&n.push(new i(h,m,v)),p.length>=3&&a.push(new i(p,f,g))}},t}();e.CSGPlan=o,e.fromTriangles=t;var r=function(){function o(t,o,r){this.triangles=[],this.modelId=0,this.dynamicMode=null,this.matrix=new e.Matrix4,this.pos=null,this.nor=null,this.uvs=null,e.logger.log("init CSG"),t&&(t instanceof e.RenderBufferGeometry?this.fromRenderBufferGeometry(t,r):t instanceof e.BufferGeometry&&this.fromBufferGeometry(t),o&&this.matrix.copy(o),this.applyMatrix(this.matrix))}return o.prototype.renderBufferGeometryToTriangles=function(t,o){for(var r=0,n=o.length;r<n;r+=3){var a=new e.Vector3(t[8*o[r]],t[8*o[r]+1],t[8*o[r]+2]),s=new e.Vector3(t[8*o[r]+3],t[8*o[r]+4],t[8*o[r]+5]),l=new e.Vector2(t[8*o[r]+6],t[8*o[r]+7]),c=new e.Vector3(t[8*o[r+1]],t[8*o[r+1]+1],t[8*o[r+1]+2]),u=new e.Vector3(t[8*o[r+1]+3],t[8*o[r+1]+4],t[8*o[r+1]+5]),d=new e.Vector2(t[8*o[r+1]+6],t[8*o[r+1]+7]),h=new e.Vector3(t[8*o[r+2]],t[8*o[r+2]+1],t[8*o[r+2]+2]),p=new e.Vector3(t[8*o[r+2]+3],t[8*o[r+2]+4],t[8*o[r+2]+5]),m=new e.Vector2(t[8*o[r+2]+6],t[8*o[r+2]+7]);this.triangles.push(new i([a,c,h],[s,u,p],[l,d,m]))}},o.prototype.bufferGeometryToTriangles=function(t,o,r,n){for(var a=0,s=n.length;a<s;a+=3){var l=new e.Vector3(t[3*n[a]],t[3*n[a]+1],t[3*n[a]+2]),c=new e.Vector3(t[3*n[a+1]],t[3*n[a+1]+1],t[3*n[a+1]+2]),u=new e.Vector3(t[3*n[a+2]],t[3*n[a+2]+1],t[3*n[a+2]+2]),d=new e.Vector3(o[3*n[a]],o[3*n[a]+1],o[3*n[a]+2]),h=new e.Vector3(o[3*n[a+1]],o[3*n[a+1]+1],o[3*n[a+1]+2]),p=new e.Vector3(o[3*n[a+2]],o[3*n[a+2]+1],o[3*n[a+2]+2]),m=new e.Vector2(r[3*n[a]],r[3*n[a]+1]),f=new e.Vector2(r[3*n[a+1]],r[3*n[a+1]+1]),v=new e.Vector2(r[3*n[a+2]],r[3*n[a+2]+1]);this.triangles.push(new i([l,c,u],[d,h,p],[m,f,v]))}},o.prototype.getNeonAttribute=function(){var e=[];this.applyInverseMatrix(),this.triangles.map(function(t){t.vertices.map(function(t){e.push(t.x,t.y,t.z)}),t.normals.map(function(t){e.push(t.x,t.y,t.z)}),t.uvs.map(function(t){e.push(t.x,t.y)})}),this.applyMatrix(this.matrix);var t=new Float32Array(e.length),o=0;return e.map(function(e){t[o++]=e}),t},o.prototype.pushAttri=function(t,o,r,n){t instanceof e.Vector3&&o instanceof e.Vector3&&r instanceof e.Vector3?n.push(t.x,t.y,t.z,o.x,o.y,o.z,r.x,r.y,r.z):n.push(t.x,t.y,o.x,o.y,r.x,r.y)},o.prototype.setTHREEAttribute=function(){this.pos=[],this.nor=[],this.uvs=[];var t=this;this.applyInverseMatrix();for(var o=0,r=this.triangles.length;o<r;++o){var n=this.triangles[o];if(n.vertices.length===n.normals.length||n.normals.length===n.uvs.length||n.vertices.length==n.uvs.length)for(var i=0;i<n.vertices.length;++i)i>=2&&(t.pushAttri(n.vertices[0],n.vertices[i-1],n.vertices[i],t.pos),t.pushAttri(n.normals[0],n.normals[i-1],n.normals[i],t.nor),t.pushAttri(n.uvs[0],n.uvs[i-1],n.uvs[i],t.uvs));else e.logger.warn("polygon length not equal")}this.applyMatrix(this.matrix)},o.prototype.getPosition=function(){var e=[];return this.triangles.map(function(t){t.vertices.map(function(t){e.push(t.x,t.y,t.z)})}),new Float32Array(this.pos)},o.prototype.getNormal=function(){var e=[];return this.triangles.map(function(t){t.normals.map(function(t){e.push(t.x,t.y,t.z)})}),new Float32Array(this.nor)},o.prototype.getUv=function(){var e=[];return this.triangles.map(function(t){t.uvs.map(function(t){e.push(t.x,t.y)})}),new Float32Array(this.uvs)},o.prototype.getIndex=function(){for(var e=new(this.pos.length/3>256?this.triangles.length/3>65536?Uint32Array:Uint16Array:Uint8Array)(this.pos.length/3),t=0;t<e.length;++t)e[t]=t;return e},o.prototype.fromRenderBufferGeometry=function(e,t){this.modelId=t,this.dynamicMode=e.dynamicMode;var o=e.attributes.position.array,r=e.index.array;this.renderBufferGeometryToTriangles(o,r)},o.prototype.fromBufferGeometry=function(e){var t=e.getAttribute("position").array,o=e.getAttribute("normal").array,r=e.getAttribute("uv").array,n=e.index.array;this.bufferGeometryToTriangles(t,o,r,n)},o.prototype.applyMatrix=function(e){return this.triangles.map(function(t){t.vertices.map(function(t){t.applyMatrix4(e)})}),this},o.prototype.applyInverseMatrix=function(){var t=(new e.Matrix4).getInverse(this.matrix);this.applyMatrix(t)},o.prototype.clone=function(){var e=new o;return e.triangles=this.triangles.map(function(e){return e.clone()}),e.modelId=this.modelId,e.matrix.copy(this.matrix),e.dynamicMode=this.dynamicMode,e},o.prototype.toTriangles=function(){return this.triangles},o.prototype.add=function(e,o){var r=new n(this.clone().toTriangles()),i=new n(e.clone().toTriangles());return!0===o?(i.invert(),r.build(i.allTriangles())):r.build(i.allTriangles()),t(r.allTriangles(),this.matrix)},o.prototype.union=function(e){var o=new n(this.clone().toTriangles()),r=new n(e.clone().toTriangles());return o.clipTo(r),r.clipTo(o),r.invert(),r.clipTo(o),r.invert(),o.build(r.allTriangles()),t(o.allTriangles(),this.matrix)},o.prototype.subtract=function(e){var o=new n(this.clone().toTriangles()),r=new n(e.clone().toTriangles());return o.invert(),o.clipTo(r),r.clipTo(o),r.invert(),r.clipTo(o),r.invert(),o.build(r.allTriangles()),o.invert(),t(o.allTriangles(),this.matrix)},o.prototype.intersect=function(e){var o=new n(this.clone().toTriangles()),r=new n(e.clone().toTriangles());return o.invert(),r.clipTo(o),r.invert(),o.clipTo(r),r.clipTo(o),o.build(r.allTriangles()),o.invert(),t(o.allTriangles(),this.matrix)},o.prototype.inverse=function(){var e=this.clone();return e.triangles.map(function(e){e.flip()}),e},o.prototype.toRenderBufferGeometry=function(){var t=new e.RenderBufferGeometry,o=this.getNeonAttribute(),r=new e.RenderInterleavedBuffer(o,8,this.modelId),n=this.getIndex();return t.addAttribute("position",new e.RenderInterleavedBufferAttribute(r,3,0,!1)),t.addAttribute("normal",new e.RenderInterleavedBufferAttribute(r,3,3,!1)),t.addAttribute("uv",new e.RenderInterleavedBufferAttribute(r,2,6,!1)),t.setIndex(new e.RenderBufferAttribute(n,1,!1,this.modelId)),t.dynamicMode=this.dynamicMode,t},o.prototype.toBufferGeometry=function(){var t=new e.BufferGeometry;this.setTHREEAttribute();var o=this.getPosition(),r=this.getUv();this.getIndex();return t.addAttribute("position",new e.BufferAttribute(o,3,!1)),t.addAttribute("uv",new e.BufferAttribute(r,2,!1)),t.computeVertexNormals(),t},o}();e.CSG=r;var n=function(){function t(o){this.triangles=[],this.plan=null,this.front=null,this.back=null,this.clone_NonRecursive=function(){function o(e){var o=new t;return o.plan=e.plan&&e.plan.clone(),o.triangles=e.triangles.map(function(e){return e.clone()}),o}return function(){var t=new e.Queue,r=new e.Queue;t.push(this);var n=o(this);for(r.push(n);!t.empty();){var i=t.shift(),a=r.shift();if(null!=i&&null!=a){if(i.front){t.push(i.front);var s=o(i.front);a.front=s,r.push(s)}if(i.back){t.push(i.back);var s=o(i.back);a.back=s,r.push(s)}}}return n}}(),this.build_NonRecursive=function(){function o(e,t){var o=[],r=[];if(!e.length)return[o,r];t.plan||(t.plan=e[0].plan.clone());for(var n=0;n<e.length;++n)t.plan.splitTriangle(e[n],t.triangles,t.triangles,o,r);return[o,r]}return function(r){var n=new e.Queue;for(n.push({
csg:this,triangles:r});!n.empty();){var i=n.shift();if(null!=i){var a=o(i.triangles,i.csg),s=a[0],l=a[1];s.length>0&&(i.csg.front||(i.csg.front=new t),n.push({csg:i.csg.front,triangles:s})),l.length>0&&(i.csg.back||(i.csg.back=new t),n.push({csg:i.csg.back,triangles:l}))}}}}(),this.clipTriangles_NonRecursive=function(){function e(e,t){var o=[],r=[];return t.plan.splitTriangle(e,r,o,r,o),[r,o]}return function(t){var o=[],r=[],n=this;t.map(function(e){r.push({triangle:e,csg:n})});for(var i=r.pop();i;){for(var a=i.csg,s=i.triangle;a;){var l=e(s,a),c=l[0],u=l[1];if(c.length>0&&u.length>0){if(a.front&&a.back){r.push({triangle:c[0],csg:a.front}),r.push({triangle:u[0],csg:a.back});break}if(a.front&&!a.back)a=a.front,s=c[0];else if(!a.front&&a.back)o.push(c[0]),a=a.back,s=u[0];else if(!a.front&&!a.back){o.push(c[0]);break}}else if(c.length>0){if(!a.front){o.push(c[0]);break}a=a.front,s=c[0]}else if(u.length>0){if(!a.back)break;a=a.back,s=u[0]}}i=r.pop()}return o}}(),o&&this.build(o)}return t.prototype.invert=function(){this.invert_NonRecursive()},t.prototype.invert_Recursive=function(){this.plan.flip();for(var e=0;e<this.triangles.length;++e)this.triangles[e].flip();var t=this.back;this.back=this.front,this.front=t,this.back&&this.back.invert(),this.front&&this.front.invert()},t.prototype.invert_NonRecursive=function(){var t=new e.Queue;for(t.push(this);!t.empty();){var o=t.shift();if(o){for(var r=0;r<o.triangles.length;++r)o.triangles[r].flip();o.plan.flip(),o.back&&t.push(o.back),o.front&&t.push(o.front);var n=o.back;o.back=o.front,o.front=n}}},t.prototype.clone=function(){return this.clone_NonRecursive()},t.prototype.clone_Recursive=function(){var e=new t;return e.plan=this.plan&&this.plan.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.triangles=this.triangles.map(function(e){return e.clone()}),e},t.prototype.allTriangles=function(){return this.allTriagles_NonRecursive()},t.prototype.allTriagles_Recursive=function(){var e=this.triangles.slice();return this.front&&(e=e.concat(this.front.allTriagles_Recursive())),this.back&&(e=e.concat(this.back.allTriagles_Recursive())),e},t.prototype.allTriagles_NonRecursive=function(){var t=[],o=new e.Queue;for(o.push(this);!o.empty();){var r=o.shift();null!=r&&(t=t.concat(r.triangles.slice()),r.front&&o.push(r.front),r.back&&o.push(r.back))}return t},t.prototype.build=function(e){this.build_NonRecursive(e)},t.prototype.build_Recursive=function(e){if(e.length){this.plan||(this.plan=e[0].plan.clone());for(var o=[],r=[],n=0;n<e.length;++n)this.plan.splitTriangle(e[n],this.triangles,this.triangles,o,r);r.length>0&&(this.back||(this.back=new t),this.back.build_Recursive(r)),o.length>0&&(this.front||(this.front=new t),this.front.build_Recursive(o))}},t.prototype.clipTriangles=function(e){return this.clipTriangles_NonRecursive(e)},t.prototype.clipTriangles_Recursive=function(e){if(!this.plan)return e.slice();for(var t=[],o=[],r=0;r<e.length;++r)this.plan.splitTriangle(e[r],o,t,o,t);return this.front&&o.length&&(o=this.front.clipTriangles_Recursive(o)),t=this.back&&t.length?this.back.clipTriangles_Recursive(t):[],o.concat(t)},t.prototype.clipTo=function(e){this.clipTo_NonRecursive(e)},t.prototype.clipTo_Recursive=function(e){this.triangles=e.clipTriangles(this.triangles),this.front&&this.front.clipTo_Recursive(e),this.back&&this.back.clipTo_Recursive(e)},t.prototype.clipTo_NonRecursive=function(t){var o=new e.Queue;for(o.push(this);!o.empty();){var r=o.shift();null!=r&&(r.triangles=t.clipTriangles(r.triangles),r.front&&o.push(r.front),r.back&&o.push(r.back))}},t}();e.CSGNode=n;var i=function(){function e(e,t,r){this.vertices=[],this.plan=new o,this.normals=[],this.uvs=[],e&&t&&r&&(this.vertices=e,this.normals=t,this.uvs=r,this.plan.setFromPoints(e[0],e[1],e[2]))}return e.prototype.clone=function(){return new e(this.vertices.map(function(e){return e.clone()}),this.normals.map(function(e){return e.clone()}),this.uvs.map(function(e){return e.clone()}))},e.prototype.flip=function(){this.plan.flip(),this.normals.reverse().map(function(e){e.negate()}),this.vertices.reverse(),this.uvs.reverse()},e}();e.CSGTriangle=i}(Neon||(Neon={}));var Neon;!function(e){var t=function(){function t(){this.enable=!0,this.isActive=!1,this.meshs=[],this.material=null,this.getSplitCSG=function(){function t(t){return r=o(t),new e.CSG(t.geometry,r)}function o(t){var o=new e.Matrix4;return o.compose(t.position,(new e.Quaternion).setFromEuler(t.rotation),t.scale),o.multiply(t.matrixWorld),o}var r=(new THREE.Box3,new e.Matrix4);return function(r,n){var i=(new e.CSGPlan).setFromPlan(n),a=t(r),s=a.intersect(t(n)),l=[],c=[];this.setMaterial(r);for(var u=0,d=a.triangles.length;u<d;++u)i.splitTriangle(a.triangles[u],l,c,l,c);return[e.fromTriangles(l,o(r)).add(s),e.fromTriangles(c,o(r)).add(s,!0)]}}();var t=this;document.addEventListener("keydown",function(e){!0===e.ctrlKey&&"c"==e.key&&t.active()},!1)}return t.prototype.active=function(){var t=this;this.isActive=!0;var o=e._selector.get(),r=e.coreModel[0].getFragmentSet();if(e.coreModel[0].getHighIterator().clear(),o.length){e.hideAll();for(var n=0;n<o.length;++n){var i=r.uuid2fragid.get(o[n]);r.setState(i,1),i.map(function(o){var n=r.getMesh(o),i=r.getBoundingBox(o),a=new e.PlaneBufferGeometry(i.max.x-i.min.x+10,i.max.y-i.min.y),s=new e.Mesh(a,new e.MeshPhongMaterial({color:16776960}));s.position.copy(i.getCenter());var l=t.getFrontMesh(n,s);e.coreModel[0].getOverlayScene().add(l)})}e.coreModel[0].getIterator().reset()}},t.prototype.setMaterial=function(e){this.material=e.material},t.prototype.dispose=function(){},t.prototype.mouseUp=function(){!0===this.enable&&this.isActive},t.prototype.mouseMove=function(){!0===this.enable&&this.isActive},t.prototype.mouseClick=function(){!0===this.enable&&this.isActive},t.prototype.mouseDown=function(){!0===this.enable&&this.isActive},t.prototype.keyDown=function(e){console.log(e.ctrlKey,e.key),!0===e.ctrlKey&&"c"==e.key&&this.active()},t.prototype.setMeshs=function(e){this.meshs=this.meshs.concat(e)},t.prototype.pushMesh=function(e){this.meshs.push(e)},t.prototype.clearMesh=function(){this.meshs=[]},t.prototype.evenlySplitMesh=function(e,t){},t.prototype.splitBySurface=function(e){this.meshs},t.prototype.getFrontGeometry=function(e,t){return this.getSplitCSG(e,t)[0].toBufferGeometry()},t.prototype.getBackGeometry=function(e,t){return this.getSplitCSG(e,t)[1].toBufferGeometry()},t.prototype.getBothGeometry=function(e,t){var o=this.getSplitCSG(e,t),r=o[0],n=o[1];return[r.toBufferGeometry(),n.toBufferGeometry()]},t.prototype.getFrontMesh=function(t,o){var r=this.getFrontGeometry(t,o),n=new e.Mesh(r,this.material);if(t instanceof e.Mesh)n.position.copy(t.position),n.rotation.copy(t.rotation),n.scale.copy(t.scale);else{var i=new e.Quaternion;t.matrix.decompose(n.position,i,n.scale),n.rotation.setFromQuaternion(i)}return new e.Mesh(r,this.material)},t}();e.Spliter=t}(Neon||(Neon={}));var Neon;!function(e){e.testCSG=function(){var t=new THREE.BoxBufferGeometry(2e3,2e3,2e3,1,1,1),o=new THREE.SphereBufferGeometry(1350,100,100),r=new THREE.PlaneBufferGeometry(4001,4001),n=new THREE.Mesh(t,new THREE.MeshPhongMaterial({color:255,wireframe:!1}));n.position.set(0,5e3,0);var i=new THREE.Mesh(o,new THREE.MeshPhongMaterial({color:65280,wireframe:!1}));i.position.set(0,5e3,0);var a=new THREE.Mesh(r,new THREE.MeshPhongMaterial({color:16776960,side:THREE.DoubleSide}));return a.position.set(0,5e3,0),{union:function(){var r=new e.CSG(t),a=new e.CSG(o),s=r.union(a),l=s.toBufferGeometry();l.computeVertexNormals();var c=new THREE.Mesh(l,new THREE.MeshPhongMaterial({color:255,wireframe:!1}));c.position.set(0,-2e3,0),e.coreModel[0].getOverlayScene().add(c),e.coreModel[0].getOverlayScene().add(n),e.coreModel[0].getOverlayScene().add(i)},subtract:function(){var r=new e.CSG(t),a=new e.CSG(o),s=r.subtract(a),l=s.toBufferGeometry();l.computeVertexNormals();var c=new THREE.Mesh(l,new THREE.MeshPhongMaterial({color:16776960,wireframe:!1,side:THREE.FrontSide})),u=new THREE.Mesh(l,new THREE.MeshPhongMaterial({color:16776960,wireframe:!0}));c.position.set(0,-2e3,3e3),u.position.set(0,-2e3,3e3),e.coreModel[0].getOverlayScene().add(c),e.coreModel[0].getOverlayScene().add(u),e.coreModel[0].getOverlayScene().add(n),e.coreModel[0].getOverlayScene().add(i)},intersect:function(){var r=new e.CSG(t),s=new e.CSG(o),l=r.intersect(s),c=l.toBufferGeometry();c.computeVertexNormals();var u=new THREE.Mesh(c,new THREE.MeshPhongMaterial({color:65280,wireframe:!1,side:THREE.FrontSide}));u.position.set(0,-2e3,-3e3),e.coreModel[0].getOverlayScene().add(u),e.coreModel[0].getOverlayScene().add(n),e.coreModel[0].getOverlayScene().add(i),e.coreModel[0].getOverlayScene().add(a)}}}()}(Neon||(Neon={}));var Neon;!function(e){e.callBackMap=function(){var t=new Map;return{setCallBack:function(o,r){t.has(o)&&e.logger.warn("name "+o+" has one callBack",r),t.set(o,r)},runCallBack:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];for(var n=0,i=arguments.length;n<i;++n){var a=t.get(arguments[n].name);if(e.logger.log("args",arguments[n]),void 0!=a){var s=[].slice.call(a.arguments);s.push(arguments[n].args),a.fn.apply(a.target,s),e.logger.log("args: ",s,a,arguments[n].args)}else e.logger.warn("have no callBack named "+arguments[n].name+"\n you can set callBack by setCallBack(name: string).")}},getCallBack:function(e){return t.get(e)}}}(),e.inCallBack=function(){var t=new Map;return{add:function(e,o){t.set(e,o)},clear:function(){t.clear()},run:function(o){if(void 0===o)t.forEach(function(t,o){t.fn.apply(t.target,t.arguments),e.logger.log("name",o)});else{var r=t.get(o);r?r.fn.apply(r.target,r.arguments):e.logger.warn("Name error! Have no callback named "+o)}},deleteCb:function(e){t.delete(e)}}}()}(Neon||(Neon={}));var Neon;!function(e){function t(t){var o=e.coreModel[0].getScene(),r=e.coreModel[0].getOverlayScene(),n=e.cons.getControls().DragControl.getObjects(),i=new Map;i.set("scene",o),i.set("overlayScene",r),n.forEach(function(o,r){var n=o.object;e.logger.debug("renderSceneModels",o.sceneName),1==t?i.get(o.sceneName).add(n):0==t&&i.get(o.sceneName).remove(n)}),e.coreModel[0].getIterator().reset()}e.renderSceneModels=t,e.taskApis=function(){function t(){var t=e.coreModel[0].getFragmentSet();h.copy(new e.Box3),p.clear(),x.forEach(function(o,r){var n=t.getBoundingBoxFromUuid(r);if(n){h.union(n);var i=t.getAttributeUUID(r);if(void 0!=i){var a=i.floorNum;void 0!=a&&e.isNumber(a)&&p.add(a)}}}),h.expandByScalar(10)}function o(t){var o=m.get(t),r=e.coreModel[0].getFragmentSet(),n=[];if(void 0!=o)for(var i=0,a=o.length;i<a;++i)x.set(o[i].uuid,o[i].info),n=r.uuid2fragid.get(o[i].uuid),n.map(function(e){w.union(r.getBoundingBox(e))})}function r(){var o=e.coreModel[0].getFragmentSet(),r=e.coreModel[0].getHighIterator(),n=0;r.clear(),t();for(var i=0,a=o.getCount();i<a;++i){var s=o.getAttribute(i),l=o.getUUID(i);x.has(l)?(r.push(i),o.setState(i,2),e.logger.log("uuid",l)):n<200&&e.insectBox(h,o.getBoundingBoxFromUuid(l))&&s&&void 0!=s.floorNum&&p.has(s.floorNum)?(r.push(i,e.HMATERIAL.OPICATY),o.setState(i,1),n++):o.setState(i,1)}e.coreModel[0].getHighIterator().reset(),e.coreModel[0].getIterator().reset()}function n(t,o){var r=e.coreModel[0].getHighIterator();if(1==t)for(var n=0,i=o.length;n<i;++n)r.push(o[n],e.HMATERIAL.GREEN);else if(2==t)for(var n=0,i=o.length;n<i;++n)r.push(o[n],e.HMATERIAL.RED)}function i(t){var o=m.get(t),r=[],n=e.coreModel[0].getFragmentSet(),i=e.coreModel[0].getHighIterator();i.reverse(),o&&o.map(function(t){var o=e.coreModel[0].getProperty(n.frag2idx[n.uuid2fragid.get(t.uuid)[0]],t.uuid,!1);o.isSelected=!1,r.push(o)}),L(r,!0),e.callBackMap.runCallBack({name:"finish",args:y}),D(t),i.reset()}function a(e){d=e}function s(){return d}function l(){f.clear(),m.forEach(function(e,t){e.map(function(e,t){var o=e.uuid,r=f.get(o);r||(r=[],f.set(o,r)),r.push(t)})})}function c(e){return l(),f.has(e)}function u(e){return l(),f.get(e)}var d=!1,h=new e.Box3,p=new Set,m=null,f=new Map,v=new Set,g=!1,x=new Map,y=[],A=new Map,b=null,w=new THREE.Box3,E=function(t){b=t;var n=e.coreModel[0].getControlor();if(e.logger.log(m),e.isNumber(t))x.clear(),w.copy(new e.Box3),o(t);else if(e.isArray(t)){x.clear(),w.copy(new e.Box3);for(var i=0,a=t.length;i<a;++i)o(t[i])}r(),n.target.copy(w.getCenter()),n.update()},M=function(){g=!1,e.coreModel[0].getHighIterator().clear(),e.coreModel[0].getIterator().reset(),e.coreModel[0].getHighIterator().reset()},S=function(){return e._selector.get()},C=function(){return e._selector.clear()},R=function(){M(),e.hideAll(),e.logger.debug("reset state")},B=function(t){var o=e.coreModel[0].getHighIterator(),r=e.coreModel[0].getFragmentSet();o.clear();for(var n=r.uuid2fragid.get(t),i=0;i<n.length;++i)o.push(n[i]);r.setState(n,2),e.coreModel[0].getHighIterator().reset(),e.coreModel[0].getIterator().reset()},T=function(e){x.clear(),o(e),x.forEach(function(e,t){B(t)})},D=function(t){var r=e.coreModel[0].getFragmentSet(),i=e.coreModel[0].getHighIterator();x.clear(),o(t),x.forEach(function(e,t){var o=r.uuid2fragid.get(t);r.setState(o,2),n(e.isFinished,o)}),g=!0,i.reset()},k=function(t){m||(m=t),e.logger.log("init uuidMap",m)},q=function(){m=null},I=function(t,o){e.callBackMap.setCallBack(t,o)},U=function(){e.logger.log("\u6dfb\u52a0\u6784\u5efa"),M(),e._selector.clear()},N=function(){return e.logger.log("\u6dfb\u52a0\u5b8c\u6210"),null!=b&&E(b),e._selector.get()},P=function(t){var r=e.coreModel[0].getFragmentSet(),i=e.coreModel[0].getHighIterator();r.setState(i.getFragIds(),2),x.clear(),o(t),i.clear();for(var a=0,s=y.length;a<s;++a)if(y[a].isSelected&&y[a].uuid&&1==y[a].isSelected){var l=y[a].uuid,c=r.uuid2fragid.get(l);n(x.get(l).isFinished,c);for(var u=0;u<c.length;++u)i.push(c[u])}e.coreModel[0].getHighIterator().reset(),e.coreModel[0].getIterator().reset()},H=function(){e.logger.log("runCallBack"),g&&e.coreModel[0].getHighIterator().length()>0&&(e.callBackMap.runCallBack({name:"finish",args:y}),e.logger.log("propers",y))},z=function(t){return e.callBackMap.getCallBack(t)},L=function(){var t=new Set;return function(o,r){r&&(y.length=0,t.clear(),A.clear()),e.logger.log("setPropers",r);for(var n=0;n<o.length;++n)o[n].uuid&&!t.has(o[n].uuid)&&(y.push(o[n]),t.add(o[n].uuid),A.set(o[n].uuid,o[n]))}}(),F=function(t){var o=e.coreModel[0].getFragmentSet(),r=o.uuid2fragid.get(t);o.setState(r,1),e.coreModel[0].getIterator().reset()};return{renderTask:E,unSelect:M,renderUuid:B,hiddenUuid:F,hiddenTask:function(t){if(e.isNumber(t))x.clear(),o(t);else if(e.isArray(t)){x.clear();for(var r=0,n=t.length;r<n;++r)o(t[r])}x.forEach(function(e,t){F(t)})},renderUuidsFromTask:T,getSelectedUUIDs:S,clearSelectedUUIDS:C,resetState:R,renderFinishedMode:D,init:k,dispose:q,setCallBack:I,isInTask:c,getUuid2Task:u,addFragment:U,addOver:N,getCallBack:z,runCallBack:H,setHighLight:P,setPropers:L,getTaskPros:i,isEnable:s,enableTask:a,taskUuids:v}}()}(Neon||(Neon={}));var Neon;!function(e){e.attriApi=function(){return{}}()}(Neon||(Neon={}));var Neon;!function(e){e.tpTestApi=function(){function t(t){var o=e.coreModel[0].getFragmentSet(),r=e.coreModel[0].capToPipleMap;void 0===r&&(f(),r=e.coreModel[0].capToPipleMap);var n=e.coreModel[0].getHighIterator();if(n.clear(),e.hideAll(),"\u57fa\u67f1"===t)if(s="\u6869",r)r.forEach(function(t,r){t.map(function(e){void 0!==o.getAttributeUUID(e)&&o.setState(o.uuid2fragid.get(e),2)}),o.uuid2fragid.get(r).map(function(t){n.push(t,e.HMATERIAL.OPICATY)})});else{for(var i=e.coreModel[0].getFragmentSet(),a=0;a<i.uuids.length;++a){var l=i.getAttributeUUID(i.uuids[a]);if(l&&l.cNames===s)i.setState(i.uuid2fragid.get(i.uuids[a]),2);else if(l&&"\u57fa\u7840\u627f\u53f0"===l.cNames){var c=i.uuid2fragid.get(i.uuids[a]);c.map(function(t){n.push(t,e.HMATERIAL.OPICATY)})}else i.setState(i.uuid2fragid.get(i.uuids[a]),1)}e.coreModel[0].getIterator().reset()}else"CFG\u6869"===t&&(s="CFG\u6869");e.coreModel[0].getIterator().reset(),e.coreModel[0].getHighIterator().reset()}var o=null,r="",n=!1,i=!1,a=this,s="\u6869",l=function(t){if(n){var r=e.coreModel[0].getFragSet(),i=r.getAttributeUUID(t);if(i&&i.cNames===s){for(var a=0,l=r.uuids.length;a<l;++a){var c=r.uuids[a],u=r.getAttributeUUID(c);u.pileCate==i.pileCate&&i.pileSize==u.pileSize?r.setState(r.uuid2fragid.get(c),2):r.setState(r.uuid2fragid.get(c),1)}e._selector.clear(),e.coreModel[0].getIterator().reset(),e.coreModel[0].getHighIterator().reset(),o=t}}},c=function(){if("\u6869"===s){var t=e.coreModel[0].getFragSet(),r=e.coreModel[0].capToPipleMap,n=0;if(null!=o){var i=t.getAttributeUUID(o);r.forEach(function(e,o){e.map(function(e){var o=t.getAttributeUUID(e);o.pileCate==i.pileCate&&o.pileSize==i.pileSize&&n++})})}return n}},u={"\u4f4e\u5e94\u53d8\u6cd5":function(){var t=e._selector.get(),r=e.coreModel[0].capToPipleMap,n=e.coreModel[0].getFragSet(),i=new Map,a=0,s=n.getAttributeUUID(o);r.forEach(function(e,t){i.set(t,!1)}),r.forEach(function(o,r){var l=!1,c=!0;o.map(function(o){var r=n.getAttributeUUID(o);r.pileCate==s.pileCate&&r.pileSize==s.pileSize&&(e.isInArray(o,t)&&(l=!0),c=!1,a++)}),l||!l&&c?i.set(r,!0):i.set(r,!1)});var l={f:!0,info:""};if(i.forEach(function(e,t){e||(l={f:!1,info:"\u4f4e\u5e94\u53d8\u6cd5\u4e0d\u6ee1\u8db3\u201c\u6bcf\u4e00\u6839\u627f\u53f0\u90fd\u81f3\u5c11\u6709\u4e00\u6839\u6ee1\u8db3\u8981\u6c42\u7684\u6869\u9700\u8981\u68c0\u6d4b\u201d\u6761\u4ef6\u3002"})}),!l.f)return l;if(a<20)return t.length===a?{f:!0,info:"\u4f4e\u5e94\u53d8\u6cd5\u540c\u7c7b\u578b\u6784\u4ef6\u5c0f\u4e8e20\u6839\uff0c \u68c0\u6d4b\u6570\u91cf\u5df2\u7ecf\u6ee1\u8db3\u8981\u6c42\u3002"}:{f:!1,info:"\u4f4e\u5e94\u53d8\u6cd5\u603b\u6570\u5c11\u4e8e20\u6839\uff0c\u9700\u5c06\u6240\u6709\u7684\u6869\u90fd\u52a0\u5165\u68c0\u6d4b"};var c=Math.floor(.3*a)>20?Math.floor(.3*a):20;return t.length<c?{f:!1,info:"\u4f4e\u5e94\u53d8\u6cd5\u4e0d\u6ee1\u8db3\u201c\u4e0d\u5c11\u4e8e\u603b\u662f30%\u4e14\u4e0d\u5c11\u4e8e20\u6839\u201d\u6761\u4ef6\u3002"}:{f:!0,info:"\u4f4e\u5e94\u53d8\u6cd5\u68c0\u6d4b\u6570\u91cf\u6ee1\u8db3\u8981\u6c42\u3002"}},"\u58f0\u6ce2\u6295\u5c04\u6cd5":function(){var t=c();return e._selector.get().length>=Math.floor(.1*t)?{f:!0,info:"\u58f0\u6ce2\u6295\u5c04\u6cd5\u68c0\u6d4b\u6570\u91cf\u6ee1\u8db3\u8981\u6c42"}:{f:!1,info:"\u58f0\u6ce2\u6295\u5c04\u6cd5\u4e0d\u6ee1\u8db3\u68c0\u6d4b\u6570\u91cf\u4e0d\u5c11\u4e8e\u603b\u4f53\u6570\u91cf10%\u7684\u8981\u6c42"}},"\u94bb\u82af\u6cd5":function(){var t=c();return e._selector.get().length>=Math.floor(.1*t)?{f:!0,info:"\u94bb\u82af\u6cd5\u68c0\u6d4b\u6570\u91cf\u6ee1\u8db3\u8981\u6c42"}:{f:!1,info:"\u94bb\u82af\u6cd5\u4e0d\u6ee1\u8db3\u68c0\u6d4b\u6570\u91cf\u4e0d\u5c11\u4e8e\u603b\u4f53\u6570\u91cf10%\u7684\u8981\u6c42"}}},d=function(t){if(e.logger.log(t),n&&null!=o)return u[t]()},h=function(){if(n){var t=e._selector.get(),o=[],r=e.coreModel[0].getFragSet();return t.map(function(e){var t=r.getAttributeUUID(e);t?(o.push({uuid:e,pipleNo:t.no}),console.log(t)):o.push({uuid:e,pipleNo:void 0})}),o}},p=function(t,o){e.callBackMap.setCallBack(t,o),r=t},m=function(){e.logger.log("runCallBack");var t=e.coreModel[0].getFragSet();if(n&&i&&e.coreModel[0].getHighIterator().length()>0){var o=e._selector.get()[0],a=o?t.getAttributeUUID(o):void 0;a&&a.cNames===s&&e.callBackMap.runCallBack({name:r,args:[]})}},f=function(){e.callBackMap.runCallBack({name:"initPile",args:[]})};return{renderSamePiles:l,runCallBack:m,getSelctPiplesInfo:h,setCallBack:p,isFitRule:d,setEnable:function(r,i){n=r,!0===r?e.ISLOADOVER?(t(i),e.enableAxis(!0)):e.inCallBack.add("tpTestApi",{fn:function(){t(i),setTimeout(function(){e.enableAxis(!0)},1)},target:a,arguments:[]}):!1===r&&(e.inCallBack.deleteCb("tpTestApi"),o=null)},enableCallBack:function(e){i=e},getPileUUid:function(){return e._selector.get()},getPileAttributes:function(t){var o=e.coreModel[0].getFragmentSet(),r=o.getAttributeUUID(t);return r?{uuid:t,size:r.pileSize,type:r.pileCate,no:r.no,location:r.pileLocation,level:r.pileBlockLevel,depth:r.pileDepth,specification:r.specification}:void 0},computePilesNo:f}}()}(Neon||(Neon={}));var Neon;!function(e){e.tpTest=function(){e.coreModel[0].getFragSet();e.tpTestApi.setEnable(!0,"\u57fa\u67f1"),e.tpTestApi.renderSamePiles("9f6f30fb-09c6-4230-b699-c97a4c303689"),console.log(e.tpTestApi.isFitRule("\u4f4e\u5e94\u53d8\u6cd5")),console.log(".....................................")}}(Neon||(Neon={}));var Neon;!function(e){var t=function(t){function o(o){var r=t.call(this)||this,n=r,i=null,a={"\u662f\u5426\u5168\u88c5\u4fee":!1,"\u4e3b\u4f53\u7ed3\u6784\u5206\u503c":"","\u8ba1\u7b97\u4e3b\u4f53\u7ed3\u6784\u5206\u503c":function(){var t=n.calcScore(e.assemblyRateStrategis.majorStructure.nonVertical(),20,30,.35,.8)+n.calcScore(e.assemblyRateStrategis.majorStructure.vertical(),10,20,.7,.8);i&&(a["\u4e3b\u4f53\u7ed3\u6784\u5206\u503c"]=String(t.toFixed(1)))},"\u56f4\u62a4\u5899\u548c\u5185\u9694\u5899\u5206\u503c":"","\u8ba1\u7b97\u56f4\u62a4\u5899\u548c\u5185\u9694\u5899\u5206\u503c":function(){var t=n.calcScore_min(e.assemblyRateStrategis.wall.retainingWall.preRate(),.8,5)+n.calcScore(e.assemblyRateStrategis.wall.retainingWall.integration(),2,5,.5,.8)+n.calcScore_min(e.assemblyRateStrategis.wall.brickWall.preRate(),.5,5)+n.calcScore(e.assemblyRateStrategis.wall.brickWall.integration(),2,5,.5,.8);i&&(a["\u56f4\u62a4\u5899\u548c\u5185\u9694\u5899\u5206\u503c"]=String(t.toFixed(1)))},"\u88c5\u4fee\u548c\u8bbe\u5907\u7ba1\u7ebf\u5206\u503c":"","\u8ba1\u7b97\u88c5\u4fee\u548c\u8bbe\u5907\u7ba1\u7ebf\u5206\u503c":function(){var t=0;!0===a["\u662f\u5426\u5168\u88c5\u4fee"]&&(t+=6),t+=n.calcScore_min(e.assemblyRateStrategis.fitUp.board(),.7,6)+n.calcScore(e.assemblyRateStrategis.fitUp.kitchen(),3,6,.7,.9)+n.calcScore(e.assemblyRateStrategis.fitUp.bathroom(),3,6,.7,.9),i&&(a["\u88c5\u4fee\u548c\u8bbe\u5907\u7ba1\u7ebf\u5206\u503c"]=String(t.toFixed(1)))},"\u603b\u4f53\u88c5\u914d\u7387\u5206\u503c":"","\u603b\u4f53\u88c5\u914d\u7387":"","\u8ba1\u7b97\u603b\u4f53\u88c5\u914d\u7387":function(){a["\u8ba1\u7b97\u4e3b\u4f53\u7ed3\u6784\u5206\u503c"](),a["\u8ba1\u7b97\u56f4\u62a4\u5899\u548c\u5185\u9694\u5899\u5206\u503c"](),a["\u8ba1\u7b97\u88c5\u4fee\u548c\u8bbe\u5907\u7ba1\u7ebf\u5206\u503c"](),a["\u603b\u4f53\u88c5\u914d\u7387\u5206\u503c"]=String(parseFloat(a["\u4e3b\u4f53\u7ed3\u6784\u5206\u503c"])+parseFloat(a["\u56f4\u62a4\u5899\u548c\u5185\u9694\u5899\u5206\u503c"])+parseFloat(a["\u88c5\u4fee\u548c\u8bbe\u5907\u7ba1\u7ebf\u5206\u503c"]))}};return r.getHotKey=function(){return{needLongPress:!1,hotkey:"ctr+x"}},r.getName=function(){return"assemblyRateAction"},r.regist=function(){i=new dat.GUI({autoPlace:!1,width:400}),e.container.appendChild(i.domElement),i.add(a,"\u662f\u5426\u5168\u88c5\u4fee").fire,i.add(a,"\u4e3b\u4f53\u7ed3\u6784\u5206\u503c").listen(),i.add(a,"\u8ba1\u7b97\u4e3b\u4f53\u7ed3\u6784\u5206\u503c"),i.add(a,"\u56f4\u62a4\u5899\u548c\u5185\u9694\u5899\u5206\u503c").listen(),i.add(a,"\u8ba1\u7b97\u56f4\u62a4\u5899\u548c\u5185\u9694\u5899\u5206\u503c"),i.add(a,"\u88c5\u4fee\u548c\u8bbe\u5907\u7ba1\u7ebf\u5206\u503c").listen(),i.add(a,"\u8ba1\u7b97\u88c5\u4fee\u548c\u8bbe\u5907\u7ba1\u7ebf\u5206\u503c"),i.add(a,"\u603b\u4f53\u88c5\u914d\u7387\u5206\u503c").listen(),i.add(a,"\u603b\u4f53\u88c5\u914d\u7387").listen(),i.add(a,"\u8ba1\u7b97\u603b\u4f53\u88c5\u914d\u7387"),i.domElement.style.top="35px",i.domElement.style.left="10%",i.domElement.style.zIndex="3",i.domElement.style.position="absolute",e.container.appendChild(i.domElement)},r.unRegist=function(){i&&e.container.removeChild(i.domElement),i=null},r}return __extends(o,t),o.prototype.calcScore=function(e,t,o,r,n){return e<r?0:e>n?o:(e-r)*Math.abs((o-t)/(n-r))+t},o.prototype.calcScore_min=function(e,t,o){return e>=t?o:0},o=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],o)}(e.BaseControl);e.AssemblyRateAction=t}(Neon||(Neon={}));var Neon;!function(e){e.selectorService=function(){var t=e.getSelector();return{get:function(){return t.get()},clear:function(){return t.clear()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.highLightService=function(){return{getHighlightUuids:function(){return e._selector.get()},clearHighLight:function(){e._selector.clear(),e.coreModel[0].getHighIterator().clear(),e.coreModel[0].getHighIterator().reset()},push:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var r=e.coreModel[0].getFragmentSet(),n=e.coreModel[0].getHighIterator(),i=0;i<arguments.length;++i){var a=r.uuid2fragid.get(arguments[i]);e._selector.add(arguments[i]);for(var s=0;s<a.length;++s)n.push(a[i])}e.coreModel[0].getHighIterator().reset()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.levelService=function(){var t="c";return{enableLevel:function(o){!0===o?e.cutLevel(t):(e.enableBLevel=!1,e.enableCLevel=!1,e.coreModel[0].getIterator().reset())},levelSwitcher:function(o){e.cutLevel(o),t=o}}}()}(Neon||(Neon={}));var Neon;!function(e){e.axisNetService=function(){return{enableAxisNet:function(t){e.enableAxis(t)}}}()}(Neon||(Neon={}));var Neon;!function(e){e.controlService=function(){return{hidenAll:function(){e.hideAll()},shownAll:function(){e.showAll()},shownByUuid:function(t){var o=e.coreModel[0].getFragmentSet(),r=o.uuid2fragid.get(t);o.setState(r,2),e.coreModel[0].getIterator().reset()},hidenByUuid:function(t){var o=e.coreModel[0].getFragmentSet(),r=o.uuid2fragid.get(t);o.setState(r,1),e.coreModel[0].getIterator().reset()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.amplifierService=function(){return{active:function(){e.cons.getControls().AmplifierControl.active()},deActive:function(){e.cons.getControls().AmplifierControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.clickService=function(){return{active:function(){e.cons.getControls().ClickControl.active()},deActive:function(){e.cons.getControls().ClickControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.focusService=function(){return{active:function(){e.cons.getControls().FocusControl.active()},deActive:function(){e.cons.getControls().FocusControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.hiddenService=function(){return{active:function(){e.cons.getControls().HiddenControl.active()},deActive:function(){e.cons.getControls().HiddenControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.magnifyService=function(){return{active:function(){e.cons.getControls().MagnifyControl.active()},deActive:function(){e.cons.getControls().MagnifyControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.measureService=function(){return{active:function(){e.cons.getControls().MeasureControl.active()},deActive:function(){e.cons.getControls().MeasureControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.panService=function(){return{active:function(){e.cons.getControls().PanControl.active()},deActive:function(){e.cons.getControls().PanControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.partitionService=function(){return{active:function(){e.cons.getControls().PartitionControl.active()},deActive:function(){e.cons.getControls().PartitionControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.peelService=function(){return{active:function(){e.cons.getControls().PeelControl.active()},deActive:function(){e.cons.getControls().PeelControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.regionService=function(){return{active:function(){e.cons.getControls().RegionControl.active()},deActive:function(){e.cons.getControls().RegionControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.shrinkService=function(){return{active:function(){e.cons.getControls().ShrinkControl.active()},deActive:function(){e.cons.getControls().ShrinkControl.deActive()}}}()}(Neon||(Neon={}));var Neon;!function(e){e.wanderService=function(){return{active:function(){e.cons.getControls().WanderControl.active()},deActive:function(){e.cons.getControls().WanderControl.deActive()}}}()}(Neon||(Neon={}));